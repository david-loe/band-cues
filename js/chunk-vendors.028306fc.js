(self["webpackChunkband_cues"]=self["webpackChunkband_cues"]||[]).push([[998],{2262:function(t,e,n){"use strict";n.d(e,{Bj:function(){return r},Fl:function(){return Lt},IU:function(){return Mt},Jd:function(){return T},PG:function(){return Tt},Um:function(){return yt},WL:function(){return Vt},X$:function(){return M},X3:function(){return kt},Xl:function(){return Ct},dq:function(){return It},j:function(){return A},lk:function(){return S},qj:function(){return bt},qq:function(){return b},yT:function(){return At}});var s=n(3577);let i;class r{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&i&&(this.parent=i,this.index=(i.scopes||(i.scopes=[])).push(this)-1)}run(t){if(this.active)try{return i=this,t()}finally{i=this.parent}else 0}on(){i=this}off(){i=this.parent}stop(t){if(this.active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}function o(t,e=i){e&&e.active&&e.effects.push(t)}const a=t=>{const e=new Set(t);return e.w=0,e.n=0,e},l=t=>(t.w&p)>0,c=t=>(t.n&p)>0,u=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=p},h=t=>{const{deps:e}=t;if(e.length){let n=0;for(let s=0;s<e.length;s++){const i=e[s];l(i)&&!c(i)?i.delete(t):e[n++]=i,i.w&=~p,i.n&=~p}e.length=n}},_=new WeakMap;let f=0,p=1;const d=30;let m;const g=Symbol(""),v=Symbol("");class b{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,o(this,n)}run(){if(!this.active)return this.fn();let t=m,e=w;while(t){if(t===this)return;t=t.parent}try{return this.parent=m,m=this,w=!0,p=1<<++f,f<=d?u(this):y(this),this.fn()}finally{f<=d&&h(this),p=1<<--f,m=this.parent,w=e,this.parent=void 0}}stop(){this.active&&(y(this),this.onStop&&this.onStop(),this.active=!1)}}function y(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let w=!0;const x=[];function T(){x.push(w),w=!1}function S(){const t=x.pop();w=void 0===t||t}function A(t,e,n){if(w&&m){let e=_.get(t);e||_.set(t,e=new Map);let s=e.get(n);s||e.set(n,s=a());const i=void 0;k(s,i)}}function k(t,e){let n=!1;f<=d?c(t)||(t.n|=p,n=!l(t)):n=!t.has(m),n&&(t.add(m),m.deps.push(t))}function M(t,e,n,i,r,o){const l=_.get(t);if(!l)return;let c=[];if("clear"===e)c=[...l.values()];else if("length"===n&&(0,s.kJ)(t))l.forEach(((t,e)=>{("length"===e||e>=i)&&c.push(t)}));else switch(void 0!==n&&c.push(l.get(n)),e){case"add":(0,s.kJ)(t)?(0,s.S0)(n)&&c.push(l.get("length")):(c.push(l.get(g)),(0,s._N)(t)&&c.push(l.get(v)));break;case"delete":(0,s.kJ)(t)||(c.push(l.get(g)),(0,s._N)(t)&&c.push(l.get(v)));break;case"set":(0,s._N)(t)&&c.push(l.get(g));break}if(1===c.length)c[0]&&C(c[0]);else{const t=[];for(const e of c)e&&t.push(...e);C(a(t))}}function C(t,e){for(const n of(0,s.kJ)(t)?t:[...t])(n!==m||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const R=(0,s.fY)("__proto__,__v_isRef,__isVue"),E=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(s.yk)),O=V(),B=V(!1,!0),I=V(!0),P=N();function N(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Mt(this);for(let e=0,i=this.length;e<i;e++)A(n,"get",e+"");const s=n[e](...t);return-1===s||!1===s?n[e](...t.map(Mt)):s}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){T();const n=Mt(this)[e].apply(this,t);return S(),n}})),t}function V(t=!1,e=!1){return function(n,i,r){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_isShallow"===i)return e;if("__v_raw"===i&&r===(t?e?mt:dt:e?pt:ft).get(n))return n;const o=(0,s.kJ)(n);if(!t&&o&&(0,s.RI)(P,i))return Reflect.get(P,i,r);const a=Reflect.get(n,i,r);if((0,s.yk)(i)?E.has(i):R(i))return a;if(t||A(n,"get",i),e)return a;if(It(a)){const t=!o||!(0,s.S0)(i);return t?a.value:a}return(0,s.Kn)(a)?t?wt(a):bt(a):a}}const D=F(),L=F(!0);function F(t=!1){return function(e,n,i,r){let o=e[n];if(St(o)&&It(o)&&!It(i))return!1;if(!t&&!St(i)&&(At(i)||(i=Mt(i),o=Mt(o)),!(0,s.kJ)(e)&&It(o)&&!It(i)))return o.value=i,!0;const a=(0,s.kJ)(e)&&(0,s.S0)(n)?Number(n)<e.length:(0,s.RI)(e,n),l=Reflect.set(e,n,i,r);return e===Mt(r)&&(a?(0,s.aU)(i,o)&&M(e,"set",n,i,o):M(e,"add",n,i)),l}}function q(t,e){const n=(0,s.RI)(t,e),i=t[e],r=Reflect.deleteProperty(t,e);return r&&n&&M(t,"delete",e,void 0,i),r}function j(t,e){const n=Reflect.has(t,e);return(0,s.yk)(e)&&E.has(e)||A(t,"has",e),n}function H(t){return A(t,"iterate",(0,s.kJ)(t)?"length":g),Reflect.ownKeys(t)}const X={get:O,set:D,deleteProperty:q,has:j,ownKeys:H},U={get:I,set(t,e){return!0},deleteProperty(t,e){return!0}},Y=(0,s.l7)({},X,{get:B,set:L}),W=t=>t,G=t=>Reflect.getPrototypeOf(t);function z(t,e,n=!1,s=!1){t=t["__v_raw"];const i=Mt(t),r=Mt(e);e!==r&&!n&&A(i,"get",e),!n&&A(i,"get",r);const{has:o}=G(i),a=s?W:n?Et:Rt;return o.call(i,e)?a(t.get(e)):o.call(i,r)?a(t.get(r)):void(t!==i&&t.get(e))}function Z(t,e=!1){const n=this["__v_raw"],s=Mt(n),i=Mt(t);return t!==i&&!e&&A(s,"has",t),!e&&A(s,"has",i),t===i?n.has(t):n.has(t)||n.has(i)}function K(t,e=!1){return t=t["__v_raw"],!e&&A(Mt(t),"iterate",g),Reflect.get(t,"size",t)}function Q(t){t=Mt(t);const e=Mt(this),n=G(e),s=n.has.call(e,t);return s||(e.add(t),M(e,"add",t,t)),this}function $(t,e){e=Mt(e);const n=Mt(this),{has:i,get:r}=G(n);let o=i.call(n,t);o||(t=Mt(t),o=i.call(n,t));const a=r.call(n,t);return n.set(t,e),o?(0,s.aU)(e,a)&&M(n,"set",t,e,a):M(n,"add",t,e),this}function J(t){const e=Mt(this),{has:n,get:s}=G(e);let i=n.call(e,t);i||(t=Mt(t),i=n.call(e,t));const r=s?s.call(e,t):void 0,o=e.delete(t);return i&&M(e,"delete",t,void 0,r),o}function tt(){const t=Mt(this),e=0!==t.size,n=void 0,s=t.clear();return e&&M(t,"clear",void 0,void 0,n),s}function et(t,e){return function(n,s){const i=this,r=i["__v_raw"],o=Mt(r),a=e?W:t?Et:Rt;return!t&&A(o,"iterate",g),r.forEach(((t,e)=>n.call(s,a(t),a(e),i)))}}function nt(t,e,n){return function(...i){const r=this["__v_raw"],o=Mt(r),a=(0,s._N)(o),l="entries"===t||t===Symbol.iterator&&a,c="keys"===t&&a,u=r[t](...i),h=n?W:e?Et:Rt;return!e&&A(o,"iterate",c?v:g),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:l?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function st(t){return function(...e){return"delete"!==t&&this}}function it(){const t={get(t){return z(this,t)},get size(){return K(this)},has:Z,add:Q,set:$,delete:J,clear:tt,forEach:et(!1,!1)},e={get(t){return z(this,t,!1,!0)},get size(){return K(this)},has:Z,add:Q,set:$,delete:J,clear:tt,forEach:et(!1,!0)},n={get(t){return z(this,t,!0)},get size(){return K(this,!0)},has(t){return Z.call(this,t,!0)},add:st("add"),set:st("set"),delete:st("delete"),clear:st("clear"),forEach:et(!0,!1)},s={get(t){return z(this,t,!0,!0)},get size(){return K(this,!0)},has(t){return Z.call(this,t,!0)},add:st("add"),set:st("set"),delete:st("delete"),clear:st("clear"),forEach:et(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((i=>{t[i]=nt(i,!1,!1),n[i]=nt(i,!0,!1),e[i]=nt(i,!1,!0),s[i]=nt(i,!0,!0)})),[t,n,e,s]}const[rt,ot,at,lt]=it();function ct(t,e){const n=e?t?lt:at:t?ot:rt;return(e,i,r)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,s.RI)(n,i)&&i in e?n:e,i,r)}const ut={get:ct(!1,!1)},ht={get:ct(!1,!0)},_t={get:ct(!0,!1)};const ft=new WeakMap,pt=new WeakMap,dt=new WeakMap,mt=new WeakMap;function gt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:gt((0,s.W7)(t))}function bt(t){return St(t)?t:xt(t,!1,X,ut,ft)}function yt(t){return xt(t,!1,Y,ht,pt)}function wt(t){return xt(t,!0,U,_t,dt)}function xt(t,e,n,i,r){if(!(0,s.Kn)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=r.get(t);if(o)return o;const a=vt(t);if(0===a)return t;const l=new Proxy(t,2===a?i:n);return r.set(t,l),l}function Tt(t){return St(t)?Tt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function St(t){return!(!t||!t["__v_isReadonly"])}function At(t){return!(!t||!t["__v_isShallow"])}function kt(t){return Tt(t)||St(t)}function Mt(t){const e=t&&t["__v_raw"];return e?Mt(e):t}function Ct(t){return(0,s.Nj)(t,"__v_skip",!0),t}const Rt=t=>(0,s.Kn)(t)?bt(t):t,Et=t=>(0,s.Kn)(t)?wt(t):t;function Ot(t){w&&m&&(t=Mt(t),k(t.dep||(t.dep=a())))}function Bt(t,e){t=Mt(t),t.dep&&C(t.dep)}function It(t){return!(!t||!0!==t.__v_isRef)}function Pt(t){return It(t)?t.value:t}const Nt={get:(t,e,n)=>Pt(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return It(i)&&!It(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function Vt(t){return Tt(t)?t:new Proxy(t,Nt)}class Dt{constructor(t,e,n,s){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new b(t,(()=>{this._dirty||(this._dirty=!0,Bt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!s,this["__v_isReadonly"]=n}get value(){const t=Mt(this);return Ot(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Lt(t,e,n=!1){let i,r;const o=(0,s.mf)(t);o?(i=t,r=s.dG):(i=t.get,r=t.set);const a=new Dt(i,r,o||!r,n);return a}Promise.resolve()},6252:function(t,e,n){"use strict";n.d(e,{$d:function(){return o},FN:function(){return un},HY:function(){return Ae},Ko:function(){return en},P$:function(){return ot},Q6:function(){return _t},U2:function(){return lt},Uk:function(){return ze},Us:function(){return ve},Wm:function(){return Ue},Y8:function(){return st},_:function(){return Xe},h:function(){return Mn},iD:function(){return Ve},ic:function(){return Mt},kq:function(){return Ze},nK:function(){return ht},wg:function(){return Oe},wy:function(){return ue}});var s=n(2262),i=n(3577);function r(t,e,n,s){let i;try{i=s?t(...s):t()}catch(r){a(r,e,n)}return i}function o(t,e,n,s){if((0,i.mf)(t)){const o=r(t,e,n,s);return o&&(0,i.tI)(o)&&o.catch((t=>{a(t,e,n)})),o}const l=[];for(let i=0;i<t.length;i++)l.push(o(t[i],e,n,s));return l}function a(t,e,n,s=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const i=e.proxy,o=n;while(s){const e=s.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;s=s.parent}const a=e.appContext.config.errorHandler;if(a)return void r(a,null,10,[t,i,o])}l(t,n,i,s)}function l(t,e,n,s=!0){console.error(t)}let c=!1,u=!1;const h=[];let _=0;const f=[];let p=null,d=0;const m=[];let g=null,v=0;const b=Promise.resolve();let y=null,w=null;function x(t){const e=y||b;return t?e.then(this?t.bind(this):t):e}function T(t){let e=_+1,n=h.length;while(e<n){const s=e+n>>>1,i=B(h[s]);i<t?e=s+1:n=s}return e}function S(t){h.length&&h.includes(t,c&&t.allowRecurse?_+1:_)||t===w||(null==t.id?h.push(t):h.splice(T(t.id),0,t),A())}function A(){c||u||(u=!0,y=b.then(I))}function k(t){const e=h.indexOf(t);e>_&&h.splice(e,1)}function M(t,e,n,s){(0,i.kJ)(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?s+1:s)||n.push(t),A()}function C(t){M(t,p,f,d)}function R(t){M(t,g,m,v)}function E(t,e=null){if(f.length){for(w=e,p=[...new Set(f)],f.length=0,d=0;d<p.length;d++)p[d]();p=null,d=0,w=null,E(t,e)}}function O(t){if(m.length){const t=[...new Set(m)];if(m.length=0,g)return void g.push(...t);for(g=t,g.sort(((t,e)=>B(t)-B(e))),v=0;v<g.length;v++)g[v]();g=null,v=0}}const B=t=>null==t.id?1/0:t.id;function I(t){u=!1,c=!0,E(t),h.sort(((t,e)=>B(t)-B(e)));i.dG;try{for(_=0;_<h.length;_++){const t=h[_];t&&!1!==t.active&&r(t,null,14)}}finally{_=0,h.length=0,O(t),c=!1,y=null,(h.length||f.length||m.length)&&I(t)}}new Set;new Map;function P(t,e,...n){const s=t.vnode.props||i.kT;let r=n;const a=e.startsWith("update:"),l=a&&e.slice(7);if(l&&l in s){const t=`${"modelValue"===l?"model":l}Modifiers`,{number:e,trim:o}=s[t]||i.kT;o?r=n.map((t=>t.trim())):e&&(r=n.map(i.He))}let c;let u=s[c=(0,i.hR)(e)]||s[c=(0,i.hR)((0,i._A)(e))];!u&&a&&(u=s[c=(0,i.hR)((0,i.rs)(e))]),u&&o(u,t,6,r);const h=s[c+"Once"];if(h){if(t.emitted){if(t.emitted[c])return}else t.emitted={};t.emitted[c]=!0,o(h,t,6,r)}}function N(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(void 0!==r)return r;const o=t.emits;let a={},l=!1;if(!(0,i.mf)(t)){const s=t=>{const n=N(t,e,!0);n&&(l=!0,(0,i.l7)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}return o||l?((0,i.kJ)(o)?o.forEach((t=>a[t]=null)):(0,i.l7)(a,o),s.set(t,a),a):(s.set(t,null),null)}function V(t,e){return!(!t||!(0,i.F7)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.RI)(t,e[0].toLowerCase()+e.slice(1))||(0,i.RI)(t,(0,i.rs)(e))||(0,i.RI)(t,e))}let D=null,L=null;function F(t){const e=D;return D=t,L=t&&t.type.__scopeId||null,e}function q(t,e=D,n){if(!e)return t;if(t._n)return t;const s=(...n)=>{s._d&&Pe(-1);const i=F(e),r=t(...n);return F(i),s._d&&Pe(1),r};return s._n=!0,s._c=!0,s._d=!0,s}function j(t){const{type:e,vnode:n,proxy:s,withProxy:r,props:o,propsOptions:[l],slots:c,attrs:u,emit:h,render:_,renderCache:f,data:p,setupState:d,ctx:m,inheritAttrs:g}=t;let v,b;const y=F(t);try{if(4&n.shapeFlag){const t=r||s;v=Ke(_.call(t,t,f,o,d,p,m)),b=u}else{const t=e;0,v=Ke(t.length>1?t(o,{attrs:u,slots:c,emit:h}):t(o,null)),b=e.props?u:H(u)}}catch(x){Re.length=0,a(x,t,1),v=Ue(Me)}let w=v;if(b&&!1!==g){const t=Object.keys(b),{shapeFlag:e}=w;t.length&&7&e&&(l&&t.some(i.tR)&&(b=X(b,l)),w=Ge(w,b))}return n.dirs&&(w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),v=w,F(y),v}const H=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,i.F7)(n))&&((e||(e={}))[n]=t[n]);return e},X=(t,e)=>{const n={};for(const s in t)(0,i.tR)(s)&&s.slice(9)in e||(n[s]=t[s]);return n};function U(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&l>=0))return!(!i&&!a||a&&a.$stable)||s!==o&&(s?!o||Y(s,o,c):!!o);if(1024&l)return!0;if(16&l)return s?Y(s,o,c):!!o;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(o[n]!==s[n]&&!V(c,n))return!0}}return!1}function Y(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!V(n,r))return!0}return!1}function W({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const G=t=>t.__isSuspense;function z(t,e){e&&e.pendingBranch?(0,i.kJ)(t)?e.effects.push(...t):e.effects.push(t):R(t)}function Z(t,e){if(cn){let n=cn.provides;const s=cn.parent&&cn.parent.provides;s===n&&(n=cn.provides=Object.create(s)),n[t]=e}else 0}function K(t,e,n=!1){const s=cn||D;if(s){const r=null==s.parent?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&(0,i.mf)(e)?e.call(s.proxy):e}else 0}const Q={};function $(t,e,n){return J(t,e,n)}function J(t,e,{immediate:n,deep:a,flush:l,onTrack:c,onTrigger:u}=i.kT){const h=cn;let _,f,p=!1,d=!1;if((0,s.dq)(t)?(_=()=>t.value,p=(0,s.yT)(t)):(0,s.PG)(t)?(_=()=>t,a=!0):(0,i.kJ)(t)?(d=!0,p=t.some(s.PG),_=()=>t.map((t=>(0,s.dq)(t)?t.value:(0,s.PG)(t)?nt(t):(0,i.mf)(t)?r(t,h,2):void 0))):_=(0,i.mf)(t)?e?()=>r(t,h,2):()=>{if(!h||!h.isUnmounted)return f&&f(),o(t,h,3,[m])}:i.dG,e&&a){const t=_;_=()=>nt(t())}let m=t=>{f=y.onStop=()=>{r(t,h,4)}};if(mn)return m=i.dG,e?n&&o(e,h,3,[_(),d?[]:void 0,m]):_(),i.dG;let g=d?[]:Q;const v=()=>{if(y.active)if(e){const t=y.run();(a||p||(d?t.some(((t,e)=>(0,i.aU)(t,g[e]))):(0,i.aU)(t,g)))&&(f&&f(),o(e,h,3,[t,g===Q?void 0:g,m]),g=t)}else y.run()};let b;v.allowRecurse=!!e,b="sync"===l?v:"post"===l?()=>ge(v,h&&h.suspense):()=>{!h||h.isMounted?C(v):v()};const y=new s.qq(_,b);return e?n?v():g=y.run():"post"===l?ge(y.run.bind(y),h&&h.suspense):y.run(),()=>{y.stop(),h&&h.scope&&(0,i.Od)(h.scope.effects,y)}}function tt(t,e,n){const s=this.proxy,r=(0,i.HD)(t)?t.includes(".")?et(s,t):()=>s[t]:t.bind(s,s);let o;(0,i.mf)(e)?o=e:(o=e.handler,n=e);const a=cn;hn(this);const l=J(r,o.bind(s),n);return a?hn(a):_n(),l}function et(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function nt(t,e){if(!(0,i.Kn)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,s.dq)(t))nt(t.value,e);else if((0,i.kJ)(t))for(let n=0;n<t.length;n++)nt(t[n],e);else if((0,i.DM)(t)||(0,i._N)(t))t.forEach((t=>{nt(t,e)}));else if((0,i.PO)(t))for(const n in t)nt(t[n],e);return t}function st(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return At((()=>{t.isMounted=!0})),Ct((()=>{t.isUnmounting=!0})),t}const it=[Function,Array],rt={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:it,onEnter:it,onAfterEnter:it,onEnterCancelled:it,onBeforeLeave:it,onLeave:it,onAfterLeave:it,onLeaveCancelled:it,onBeforeAppear:it,onAppear:it,onAfterAppear:it,onAppearCancelled:it},setup(t,{slots:e}){const n=un(),i=st();let r;return()=>{const o=e.default&&_t(e.default(),!0);if(!o||!o.length)return;const a=(0,s.IU)(t),{mode:l}=a;const c=o[0];if(i.isLeaving)return ct(c);const u=ut(c);if(!u)return ct(c);const h=lt(u,a,i,n);ht(u,h);const _=n.subTree,f=_&&ut(_);let p=!1;const{getTransitionKey:d}=u.type;if(d){const t=d();void 0===r?r=t:t!==r&&(r=t,p=!0)}if(f&&f.type!==Me&&(!Fe(u,f)||p)){const t=lt(f,a,i,n);if(ht(f,t),"out-in"===l)return i.isLeaving=!0,t.afterLeave=()=>{i.isLeaving=!1,n.update()},ct(c);"in-out"===l&&u.type!==Me&&(t.delayLeave=(t,e,n)=>{const s=at(i,f);s[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return c}}},ot=rt;function at(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function lt(t,e,n,s){const{appear:i,mode:r,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:_,onLeave:f,onAfterLeave:p,onLeaveCancelled:d,onBeforeAppear:m,onAppear:g,onAfterAppear:v,onAppearCancelled:b}=e,y=String(t.key),w=at(n,t),x=(t,e)=>{t&&o(t,s,9,e)},T={mode:r,persisted:a,beforeEnter(e){let s=l;if(!n.isMounted){if(!i)return;s=m||l}e._leaveCb&&e._leaveCb(!0);const r=w[y];r&&Fe(t,r)&&r.el._leaveCb&&r.el._leaveCb(),x(s,[e])},enter(t){let e=c,s=u,r=h;if(!n.isMounted){if(!i)return;e=g||c,s=v||u,r=b||h}let o=!1;const a=t._enterCb=e=>{o||(o=!0,x(e?r:s,[t]),T.delayedLeave&&T.delayedLeave(),t._enterCb=void 0)};e?(e(t,a),e.length<=1&&a()):a()},leave(e,s){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return s();x(_,[e]);let r=!1;const o=e._leaveCb=n=>{r||(r=!0,s(),x(n?d:p,[e]),e._leaveCb=void 0,w[i]===t&&delete w[i])};w[i]=t,f?(f(e,o),f.length<=1&&o()):o()},clone(t){return lt(t,e,n,s)}};return T}function ct(t){if(pt(t))return t=Ge(t),t.children=null,t}function ut(t){return pt(t)?t.children?t.children[0]:void 0:t}function ht(t,e){6&t.shapeFlag&&t.component?ht(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function _t(t,e=!1){let n=[],s=0;for(let i=0;i<t.length;i++){const r=t[i];r.type===Ae?(128&r.patchFlag&&s++,n=n.concat(_t(r.children,e))):(e||r.type!==Me)&&n.push(r)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}const ft=t=>!!t.type.__asyncLoader;const pt=t=>t.type.__isKeepAlive;RegExp,RegExp;function dt(t,e){return(0,i.kJ)(t)?t.some((t=>dt(t,e))):(0,i.HD)(t)?t.split(",").includes(e):!!t.test&&t.test(e)}function mt(t,e){vt(t,"a",e)}function gt(t,e){vt(t,"da",e)}function vt(t,e,n=cn){const s=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(xt(e,s,n),n){let t=n.parent;while(t&&t.parent)pt(t.parent.vnode)&&bt(s,e,n,t),t=t.parent}}function bt(t,e,n,s){const r=xt(e,t,s,!0);Rt((()=>{(0,i.Od)(s[e],r)}),n)}function yt(t){let e=t.shapeFlag;256&e&&(e-=256),512&e&&(e-=512),t.shapeFlag=e}function wt(t){return 128&t.shapeFlag?t.ssContent:t}function xt(t,e,n=cn,i=!1){if(n){const r=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...i)=>{if(n.isUnmounted)return;(0,s.Jd)(),hn(n);const r=o(e,n,t,i);return _n(),(0,s.lk)(),r});return i?r.unshift(a):r.push(a),a}}const Tt=t=>(e,n=cn)=>(!mn||"sp"===t)&&xt(t,e,n),St=Tt("bm"),At=Tt("m"),kt=Tt("bu"),Mt=Tt("u"),Ct=Tt("bum"),Rt=Tt("um"),Et=Tt("sp"),Ot=Tt("rtg"),Bt=Tt("rtc");function It(t,e=cn){xt("ec",t,e)}let Pt=!0;function Nt(t){const e=Ft(t),n=t.proxy,r=t.ctx;Pt=!1,e.beforeCreate&&Dt(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:l,watch:c,provide:u,inject:h,created:_,beforeMount:f,mounted:p,beforeUpdate:d,updated:m,activated:g,deactivated:v,beforeDestroy:b,beforeUnmount:y,destroyed:w,unmounted:x,render:T,renderTracked:S,renderTriggered:A,errorCaptured:k,serverPrefetch:M,expose:C,inheritAttrs:R,components:E,directives:O,filters:B}=e,I=null;if(h&&Vt(h,r,I,t.appContext.config.unwrapInjectedRef),l)for(const s in l){const t=l[s];(0,i.mf)(t)&&(r[s]=t.bind(n))}if(o){0;const e=o.call(n,n);0,(0,i.Kn)(e)&&(t.data=(0,s.qj)(e))}if(Pt=!0,a)for(const s in a){const t=a[s],e=(0,i.mf)(t)?t.bind(n,n):(0,i.mf)(t.get)?t.get.bind(n,n):i.dG;0;const o=!(0,i.mf)(t)&&(0,i.mf)(t.set)?t.set.bind(n):i.dG,l=kn({get:e,set:o});Object.defineProperty(r,s,{enumerable:!0,configurable:!0,get:()=>l.value,set:t=>l.value=t})}if(c)for(const s in c)Lt(c[s],r,n,s);if(u){const t=(0,i.mf)(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{Z(e,t[e])}))}function P(t,e){(0,i.kJ)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(_&&Dt(_,t,"c"),P(St,f),P(At,p),P(kt,d),P(Mt,m),P(mt,g),P(gt,v),P(It,k),P(Bt,S),P(Ot,A),P(Ct,y),P(Rt,x),P(Et,M),(0,i.kJ)(C))if(C.length){const e=t.exposed||(t.exposed={});C.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});T&&t.render===i.dG&&(t.render=T),null!=R&&(t.inheritAttrs=R),E&&(t.components=E),O&&(t.directives=O)}function Vt(t,e,n=i.dG,r=!1){(0,i.kJ)(t)&&(t=Ut(t));for(const o in t){const n=t[o];let a;a=(0,i.Kn)(n)?"default"in n?K(n.from||o,n.default,!0):K(n.from||o):K(n),(0,s.dq)(a)&&r?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:t=>a.value=t}):e[o]=a}}function Dt(t,e,n){o((0,i.kJ)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function Lt(t,e,n,s){const r=s.includes(".")?et(n,s):()=>n[s];if((0,i.HD)(t)){const n=e[t];(0,i.mf)(n)&&$(r,n)}else if((0,i.mf)(t))$(r,t.bind(n));else if((0,i.Kn)(t))if((0,i.kJ)(t))t.forEach((t=>Lt(t,e,n,s)));else{const s=(0,i.mf)(t.handler)?t.handler.bind(n):e[t.handler];(0,i.mf)(s)&&$(r,s,t)}else 0}function Ft(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:i.length||n||s?(l={},i.length&&i.forEach((t=>qt(l,t,o,!0))),qt(l,e,o)):l=e,r.set(e,l),l}function qt(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&qt(t,r,n,!0),i&&i.forEach((e=>qt(t,e,n,!0)));for(const o in e)if(s&&"expose"===o);else{const s=jt[o]||n&&n[o];t[o]=s?s(t[o],e[o]):e[o]}return t}const jt={data:Ht,props:Wt,emits:Wt,methods:Wt,computed:Wt,beforeCreate:Yt,created:Yt,beforeMount:Yt,mounted:Yt,beforeUpdate:Yt,updated:Yt,beforeDestroy:Yt,beforeUnmount:Yt,destroyed:Yt,unmounted:Yt,activated:Yt,deactivated:Yt,errorCaptured:Yt,serverPrefetch:Yt,components:Wt,directives:Wt,watch:Gt,provide:Ht,inject:Xt};function Ht(t,e){return e?t?function(){return(0,i.l7)((0,i.mf)(t)?t.call(this,this):t,(0,i.mf)(e)?e.call(this,this):e)}:e:t}function Xt(t,e){return Wt(Ut(t),Ut(e))}function Ut(t){if((0,i.kJ)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Yt(t,e){return t?[...new Set([].concat(t,e))]:e}function Wt(t,e){return t?(0,i.l7)((0,i.l7)(Object.create(null),t),e):e}function Gt(t,e){if(!t)return e;if(!e)return t;const n=(0,i.l7)(Object.create(null),t);for(const s in e)n[s]=Yt(t[s],e[s]);return n}function zt(t,e,n,r=!1){const o={},a={};(0,i.Nj)(a,qe,1),t.propsDefaults=Object.create(null),Kt(t,e,o,a);for(const s in t.propsOptions[0])s in o||(o[s]=void 0);n?t.props=r?o:(0,s.Um)(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function Zt(t,e,n,r){const{props:o,attrs:a,vnode:{patchFlag:l}}=t,c=(0,s.IU)(o),[u]=t.propsOptions;let h=!1;if(!(r||l>0)||16&l){let s;Kt(t,e,o,a)&&(h=!0);for(const r in c)e&&((0,i.RI)(e,r)||(s=(0,i.rs)(r))!==r&&(0,i.RI)(e,s))||(u?!n||void 0===n[r]&&void 0===n[s]||(o[r]=Qt(u,c,r,void 0,t,!0)):delete o[r]);if(a!==c)for(const t in a)e&&(0,i.RI)(e,t)||(delete a[t],h=!0)}else if(8&l){const n=t.vnode.dynamicProps;for(let s=0;s<n.length;s++){let r=n[s];const l=e[r];if(u)if((0,i.RI)(a,r))l!==a[r]&&(a[r]=l,h=!0);else{const e=(0,i._A)(r);o[e]=Qt(u,c,e,l,t,!1)}else l!==a[r]&&(a[r]=l,h=!0)}}h&&(0,s.X$)(t,"set","$attrs")}function Kt(t,e,n,r){const[o,a]=t.propsOptions;let l,c=!1;if(e)for(let s in e){if((0,i.Gg)(s))continue;const u=e[s];let h;o&&(0,i.RI)(o,h=(0,i._A)(s))?a&&a.includes(h)?(l||(l={}))[h]=u:n[h]=u:V(t.emitsOptions,s)||s in r&&u===r[s]||(r[s]=u,c=!0)}if(a){const e=(0,s.IU)(n),r=l||i.kT;for(let s=0;s<a.length;s++){const l=a[s];n[l]=Qt(o,e,l,r[l],t,!(0,i.RI)(r,l))}}return c}function Qt(t,e,n,s,r,o){const a=t[n];if(null!=a){const t=(0,i.RI)(a,"default");if(t&&void 0===s){const t=a.default;if(a.type!==Function&&(0,i.mf)(t)){const{propsDefaults:i}=r;n in i?s=i[n]:(hn(r),s=i[n]=t.call(null,e),_n())}else s=t}a[0]&&(o&&!t?s=!1:!a[1]||""!==s&&s!==(0,i.rs)(n)||(s=!0))}return s}function $t(t,e,n=!1){const s=e.propsCache,r=s.get(t);if(r)return r;const o=t.props,a={},l=[];let c=!1;if(!(0,i.mf)(t)){const s=t=>{c=!0;const[n,s]=$t(t,e,!0);(0,i.l7)(a,n),s&&l.push(...s)};!n&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}if(!o&&!c)return s.set(t,i.Z6),i.Z6;if((0,i.kJ)(o))for(let h=0;h<o.length;h++){0;const t=(0,i._A)(o[h]);Jt(t)&&(a[t]=i.kT)}else if(o){0;for(const t in o){const e=(0,i._A)(t);if(Jt(e)){const n=o[t],s=a[e]=(0,i.kJ)(n)||(0,i.mf)(n)?{type:n}:n;if(s){const t=ne(Boolean,s.type),n=ne(String,s.type);s[0]=t>-1,s[1]=n<0||t<n,(t>-1||(0,i.RI)(s,"default"))&&l.push(e)}}}}const u=[a,l];return s.set(t,u),u}function Jt(t){return"$"!==t[0]}function te(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function ee(t,e){return te(t)===te(e)}function ne(t,e){return(0,i.kJ)(e)?e.findIndex((e=>ee(e,t))):(0,i.mf)(e)&&ee(e,t)?0:-1}const se=t=>"_"===t[0]||"$stable"===t,ie=t=>(0,i.kJ)(t)?t.map(Ke):[Ke(t)],re=(t,e,n)=>{const s=q(((...t)=>ie(e(...t))),n);return s._c=!1,s},oe=(t,e,n)=>{const s=t._ctx;for(const r in t){if(se(r))continue;const n=t[r];if((0,i.mf)(n))e[r]=re(r,n,s);else if(null!=n){0;const t=ie(n);e[r]=()=>t}}},ae=(t,e)=>{const n=ie(e);t.slots.default=()=>n},le=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=(0,s.IU)(e),(0,i.Nj)(e,"_",n)):oe(e,t.slots={})}else t.slots={},e&&ae(t,e);(0,i.Nj)(t.slots,qe,1)},ce=(t,e,n)=>{const{vnode:s,slots:r}=t;let o=!0,a=i.kT;if(32&s.shapeFlag){const t=e._;t?n&&1===t?o=!1:((0,i.l7)(r,e),n||1!==t||delete r._):(o=!e.$stable,oe(e,r)),a=e}else e&&(ae(t,e),a={default:1});if(o)for(const i in r)se(i)||i in a||delete r[i]};function ue(t,e){const n=D;if(null===n)return t;const s=n.proxy,r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[t,n,a,l=i.kT]=e[o];(0,i.mf)(t)&&(t={mounted:t,updated:t}),t.deep&&nt(n),r.push({dir:t,instance:s,value:n,oldValue:void 0,arg:a,modifiers:l})}return t}function he(t,e,n,i){const r=t.dirs,a=e&&e.dirs;for(let l=0;l<r.length;l++){const c=r[l];a&&(c.oldValue=a[l].value);let u=c.dir[i];u&&((0,s.Jd)(),o(u,n,8,[t.el,c,t,e]),(0,s.lk)())}}function _e(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fe=0;function pe(t,e){return function(n,s=null){null==s||(0,i.Kn)(s)||(s=null);const r=_e(),o=new Set;let a=!1;const l=r.app={_uid:fe++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:Cn,get config(){return r.config},set config(t){0},use(t,...e){return o.has(t)||(t&&(0,i.mf)(t.install)?(o.add(t),t.install(l,...e)):(0,i.mf)(t)&&(o.add(t),t(l,...e))),l},mixin(t){return r.mixins.includes(t)||r.mixins.push(t),l},component(t,e){return e?(r.components[t]=e,l):r.components[t]},directive(t,e){return e?(r.directives[t]=e,l):r.directives[t]},mount(i,o,c){if(!a){const u=Ue(n,s);return u.appContext=r,o&&e?e(u,i):t(u,i,c),a=!0,l._container=i,i.__vue_app__=l,Tn(u.component)||u.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(t,e){return r.provides[t]=e,l}};return l}}function de(t,e,n,o,a=!1){if((0,i.kJ)(t))return void t.forEach(((t,s)=>de(t,e&&((0,i.kJ)(e)?e[s]:e),n,o,a)));if(ft(o)&&!a)return;const l=4&o.shapeFlag?Tn(o.component)||o.component.proxy:o.el,c=a?null:l,{i:u,r:h}=t;const _=e&&e.r,f=u.refs===i.kT?u.refs={}:u.refs,p=u.setupState;if(null!=_&&_!==h&&((0,i.HD)(_)?(f[_]=null,(0,i.RI)(p,_)&&(p[_]=null)):(0,s.dq)(_)&&(_.value=null)),(0,i.mf)(h))r(h,u,12,[c,f]);else{const e=(0,i.HD)(h),r=(0,s.dq)(h);if(e||r){const r=()=>{if(t.f){const n=e?f[h]:h.value;a?(0,i.kJ)(n)&&(0,i.Od)(n,l):(0,i.kJ)(n)?n.includes(l)||n.push(l):e?f[h]=[l]:(h.value=[l],t.k&&(f[t.k]=h.value))}else e?(f[h]=c,(0,i.RI)(p,h)&&(p[h]=c)):(0,s.dq)(h)&&(h.value=c,t.k&&(f[t.k]=c))};c?(r.id=-1,ge(r,n)):r()}else 0}}function me(){}const ge=z;function ve(t){return be(t)}function be(t,e){me();const n=(0,i.E9)();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:l,createText:c,createComment:u,setText:h,setElementText:_,parentNode:f,nextSibling:p,setScopeId:d=i.dG,cloneNode:m,insertStaticContent:g}=t,v=(t,e,n,s=null,i=null,r=null,o=!1,a=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!Fe(t,e)&&(s=J(t),z(t,i,r,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:c,ref:u,shapeFlag:h}=e;switch(c){case ke:b(t,e,n,s);break;case Me:y(t,e,n,s);break;case Ce:null==t&&w(e,n,s,o);break;case Ae:N(t,e,n,s,i,r,o,a,l);break;default:1&h?A(t,e,n,s,i,r,o,a,l):6&h?V(t,e,n,s,i,r,o,a,l):(64&h||128&h)&&c.process(t,e,n,s,i,r,o,a,l,et)}null!=u&&i&&de(u,t&&t.ref,r,e||t,!e)},b=(t,e,n,s)=>{if(null==t)r(e.el=c(e.children),n,s);else{const n=e.el=t.el;e.children!==t.children&&h(n,e.children)}},y=(t,e,n,s)=>{null==t?r(e.el=u(e.children||""),n,s):e.el=t.el},w=(t,e,n,s)=>{[t.el,t.anchor]=g(t.children,e,n,s,t.el,t.anchor)},x=({el:t,anchor:e},n,s)=>{let i;while(t&&t!==e)i=p(t),r(t,n,s),t=i;r(e,n,s)},T=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),o(t),t=n;o(e)},A=(t,e,n,s,i,r,o,a,l)=>{o=o||"svg"===e.type,null==t?M(e,n,s,i,r,o,a,l):B(t,e,i,r,o,a,l)},M=(t,e,n,s,o,c,u,h)=>{let f,p;const{type:d,props:g,shapeFlag:v,transition:b,patchFlag:y,dirs:w}=t;if(t.el&&void 0!==m&&-1===y)f=t.el=m(t.el);else{if(f=t.el=l(t.type,c,g&&g.is,g),8&v?_(f,t.children):16&v&&R(t.children,f,null,s,o,c&&"foreignObject"!==d,u,h),w&&he(t,null,s,"created"),g){for(const e in g)"value"===e||(0,i.Gg)(e)||a(f,e,null,g[e],c,t.children,s,o,$);"value"in g&&a(f,"value",null,g.value),(p=g.onVnodeBeforeMount)&&tn(p,s,t)}C(f,t,t.scopeId,u,s)}w&&he(t,null,s,"beforeMount");const x=(!o||o&&!o.pendingBranch)&&b&&!b.persisted;x&&b.beforeEnter(f),r(f,e,n),((p=g&&g.onVnodeMounted)||x||w)&&ge((()=>{p&&tn(p,s,t),x&&b.enter(f),w&&he(t,null,s,"mounted")}),o)},C=(t,e,n,s,i)=>{if(n&&d(t,n),s)for(let r=0;r<s.length;r++)d(t,s[r]);if(i){let n=i.subTree;if(e===n){const e=i.vnode;C(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},R=(t,e,n,s,i,r,o,a,l=0)=>{for(let c=l;c<t.length;c++){const l=t[c]=a?Qe(t[c]):Ke(t[c]);v(null,l,e,n,s,i,r,o,a)}},B=(t,e,n,s,r,o,l)=>{const c=e.el=t.el;let{patchFlag:u,dynamicChildren:h,dirs:f}=e;u|=16&t.patchFlag;const p=t.props||i.kT,d=e.props||i.kT;let m;n&&ye(n,!1),(m=d.onVnodeBeforeUpdate)&&tn(m,n,e,t),f&&he(e,t,n,"beforeUpdate"),n&&ye(n,!0);const g=r&&"foreignObject"!==e.type;if(h?I(t.dynamicChildren,h,c,n,s,g,o):l||H(t,e,c,null,n,s,g,o,!1),u>0){if(16&u)P(c,e,p,d,n,s,r);else if(2&u&&p.class!==d.class&&a(c,"class",null,d.class,r),4&u&&a(c,"style",p.style,d.style,r),8&u){const i=e.dynamicProps;for(let e=0;e<i.length;e++){const o=i[e],l=p[o],u=d[o];u===l&&"value"!==o||a(c,o,l,u,r,t.children,n,s,$)}}1&u&&t.children!==e.children&&_(c,e.children)}else l||null!=h||P(c,e,p,d,n,s,r);((m=d.onVnodeUpdated)||f)&&ge((()=>{m&&tn(m,n,e,t),f&&he(e,t,n,"updated")}),s)},I=(t,e,n,s,i,r,o)=>{for(let a=0;a<e.length;a++){const l=t[a],c=e[a],u=l.el&&(l.type===Ae||!Fe(l,c)||70&l.shapeFlag)?f(l.el):n;v(l,c,u,null,s,i,r,o,!0)}},P=(t,e,n,s,r,o,l)=>{if(n!==s){for(const c in s){if((0,i.Gg)(c))continue;const u=s[c],h=n[c];u!==h&&"value"!==c&&a(t,c,h,u,l,e.children,r,o,$)}if(n!==i.kT)for(const c in n)(0,i.Gg)(c)||c in s||a(t,c,n[c],null,l,e.children,r,o,$);"value"in s&&a(t,"value",n.value,s.value)}},N=(t,e,n,s,i,o,a,l,u)=>{const h=e.el=t?t.el:c(""),_=e.anchor=t?t.anchor:c("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:d}=e;d&&(l=l?l.concat(d):d),null==t?(r(h,n,s),r(_,n,s),R(e.children,n,_,i,o,a,l,u)):f>0&&64&f&&p&&t.dynamicChildren?(I(t.dynamicChildren,p,n,i,o,a,l),(null!=e.key||i&&e===i.subTree)&&we(t,e,!0)):H(t,e,n,_,i,o,a,l,u)},V=(t,e,n,s,i,r,o,a,l)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,s,o,l):D(e,n,s,i,r,o,l):L(t,e,l)},D=(t,e,n,s,i,r,o)=>{const a=t.component=ln(t,s,i);if(pt(t)&&(a.ctx.renderer=et),gn(a),a.asyncDep){if(i&&i.registerDep(a,F),!t.el){const t=a.subTree=Ue(Me);y(null,t,e,n)}}else F(a,t,e,n,i,r,o)},L=(t,e,n)=>{const s=e.component=t.component;if(U(t,e,n)){if(s.asyncDep&&!s.asyncResolved)return void q(s,e,n);s.next=e,k(s.update),s.update()}else e.component=t.component,e.el=t.el,s.vnode=e},F=(t,e,n,r,o,a,l)=>{const c=()=>{if(t.isMounted){let e,{next:n,bu:s,u:r,parent:c,vnode:u}=t,h=n;0,ye(t,!1),n?(n.el=u.el,q(t,n,l)):n=u,s&&(0,i.ir)(s),(e=n.props&&n.props.onVnodeBeforeUpdate)&&tn(e,c,n,u),ye(t,!0);const _=j(t);0;const p=t.subTree;t.subTree=_,v(p,_,f(p.el),J(p),t,o,a),n.el=_.el,null===h&&W(t,_.el),r&&ge(r,o),(e=n.props&&n.props.onVnodeUpdated)&&ge((()=>tn(e,c,n,u)),o)}else{let s;const{el:l,props:c}=e,{bm:u,m:h,parent:_}=t,f=ft(e);if(ye(t,!1),u&&(0,i.ir)(u),!f&&(s=c&&c.onVnodeBeforeMount)&&tn(s,_,e),ye(t,!0),l&&st){const n=()=>{t.subTree=j(t),st(l,t.subTree,t,o,null)};f?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{0;const s=t.subTree=j(t);0,v(null,s,n,r,t,o,a),e.el=s.el}if(h&&ge(h,o),!f&&(s=c&&c.onVnodeMounted)){const t=e;ge((()=>tn(s,_,t)),o)}256&e.shapeFlag&&t.a&&ge(t.a,o),t.isMounted=!0,e=n=r=null}},u=t.effect=new s.qq(c,(()=>S(t.update)),t.scope),h=t.update=u.run.bind(u);h.id=t.uid,ye(t,!0),h()},q=(t,e,n)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,Zt(t,e.props,i,n),ce(t,e.children,n),(0,s.Jd)(),E(void 0,t.update),(0,s.lk)()},H=(t,e,n,s,i,r,o,a,l=!1)=>{const c=t&&t.children,u=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void Y(c,h,n,s,i,r,o,a,l);if(256&f)return void X(c,h,n,s,i,r,o,a,l)}8&p?(16&u&&$(c,i,r),h!==c&&_(n,h)):16&u?16&p?Y(c,h,n,s,i,r,o,a,l):$(c,i,r,!0):(8&u&&_(n,""),16&p&&R(h,n,s,i,r,o,a,l))},X=(t,e,n,s,r,o,a,l,c)=>{t=t||i.Z6,e=e||i.Z6;const u=t.length,h=e.length,_=Math.min(u,h);let f;for(f=0;f<_;f++){const s=e[f]=c?Qe(e[f]):Ke(e[f]);v(t[f],s,n,null,r,o,a,l,c)}u>h?$(t,r,o,!0,!1,_):R(e,n,s,r,o,a,l,c,_)},Y=(t,e,n,s,r,o,a,l,c)=>{let u=0;const h=e.length;let _=t.length-1,f=h-1;while(u<=_&&u<=f){const s=t[u],i=e[u]=c?Qe(e[u]):Ke(e[u]);if(!Fe(s,i))break;v(s,i,n,null,r,o,a,l,c),u++}while(u<=_&&u<=f){const s=t[_],i=e[f]=c?Qe(e[f]):Ke(e[f]);if(!Fe(s,i))break;v(s,i,n,null,r,o,a,l,c),_--,f--}if(u>_){if(u<=f){const t=f+1,i=t<h?e[t].el:s;while(u<=f)v(null,e[u]=c?Qe(e[u]):Ke(e[u]),n,i,r,o,a,l,c),u++}}else if(u>f)while(u<=_)z(t[u],r,o,!0),u++;else{const p=u,d=u,m=new Map;for(u=d;u<=f;u++){const t=e[u]=c?Qe(e[u]):Ke(e[u]);null!=t.key&&m.set(t.key,u)}let g,b=0;const y=f-d+1;let w=!1,x=0;const T=new Array(y);for(u=0;u<y;u++)T[u]=0;for(u=p;u<=_;u++){const s=t[u];if(b>=y){z(s,r,o,!0);continue}let i;if(null!=s.key)i=m.get(s.key);else for(g=d;g<=f;g++)if(0===T[g-d]&&Fe(s,e[g])){i=g;break}void 0===i?z(s,r,o,!0):(T[i-d]=u+1,i>=x?x=i:w=!0,v(s,e[i],n,null,r,o,a,l,c),b++)}const S=w?xe(T):i.Z6;for(g=S.length-1,u=y-1;u>=0;u--){const t=d+u,i=e[t],_=t+1<h?e[t+1].el:s;0===T[u]?v(null,i,n,_,r,o,a,l,c):w&&(g<0||u!==S[g]?G(i,n,_,2):g--)}}},G=(t,e,n,s,i=null)=>{const{el:o,type:a,transition:l,children:c,shapeFlag:u}=t;if(6&u)return void G(t.component.subTree,e,n,s);if(128&u)return void t.suspense.move(e,n,s);if(64&u)return void a.move(t,e,n,et);if(a===Ae){r(o,e,n);for(let t=0;t<c.length;t++)G(c[t],e,n,s);return void r(t.anchor,e,n)}if(a===Ce)return void x(t,e,n);const h=2!==s&&1&u&&l;if(h)if(0===s)l.beforeEnter(o),r(o,e,n),ge((()=>l.enter(o)),i);else{const{leave:t,delayLeave:s,afterLeave:i}=l,a=()=>r(o,e,n),c=()=>{t(o,(()=>{a(),i&&i()}))};s?s(o,a,c):c()}else r(o,e,n)},z=(t,e,n,s=!1,i=!1)=>{const{type:r,props:o,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:h,dirs:_}=t;if(null!=a&&de(a,null,n,t,!0),256&u)return void e.ctx.deactivate(t);const f=1&u&&_,p=!ft(t);let d;if(p&&(d=o&&o.onVnodeBeforeUnmount)&&tn(d,e,t),6&u)Q(t.component,n,s);else{if(128&u)return void t.suspense.unmount(n,s);f&&he(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,n,i,et,s):c&&(r!==Ae||h>0&&64&h)?$(c,e,n,!1,!0):(r===Ae&&384&h||!i&&16&u)&&$(l,e,n),s&&Z(t)}(p&&(d=o&&o.onVnodeUnmounted)||f)&&ge((()=>{d&&tn(d,e,t),f&&he(t,null,e,"unmounted")}),n)},Z=t=>{const{type:e,el:n,anchor:s,transition:i}=t;if(e===Ae)return void K(n,s);if(e===Ce)return void T(t);const r=()=>{o(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:s}=i,o=()=>e(n,r);s?s(t.el,r,o):o()}else r()},K=(t,e)=>{let n;while(t!==e)n=p(t),o(t),t=n;o(e)},Q=(t,e,n)=>{const{bum:s,scope:r,update:o,subTree:a,um:l}=t;s&&(0,i.ir)(s),r.stop(),o&&(o.active=!1,z(a,t,e,n)),l&&ge(l,e),ge((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},$=(t,e,n,s=!1,i=!1,r=0)=>{for(let o=r;o<t.length;o++)z(t[o],e,n,s,i)},J=t=>6&t.shapeFlag?J(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),tt=(t,e,n)=>{null==t?e._vnode&&z(e._vnode,null,null,!0):v(e._vnode||null,t,e,null,null,null,n),O(),e._vnode=t},et={p:v,um:z,m:G,r:Z,mt:D,mc:R,pc:H,pbc:I,n:J,o:t};let nt,st;return e&&([nt,st]=e(et)),{render:tt,hydrate:nt,createApp:pe(tt,nt)}}function ye({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function we(t,e,n=!1){const s=t.children,r=e.children;if((0,i.kJ)(s)&&(0,i.kJ)(r))for(let i=0;i<s.length;i++){const t=s[i];let e=r[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=r[i]=Qe(r[i]),e.el=t.el),n||we(t,e))}}function xe(t){const e=t.slice(),n=[0];let s,i,r,o,a;const l=t.length;for(s=0;s<l;s++){const l=t[s];if(0!==l){if(i=n[n.length-1],t[i]<l){e[s]=i,n.push(s);continue}r=0,o=n.length-1;while(r<o)a=r+o>>1,t[n[a]]<l?r=a+1:o=a;l<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}r=n.length,o=n[r-1];while(r-- >0)n[r]=o,o=e[o];return n}const Te=t=>t.__isTeleport;const Se=Symbol();const Ae=Symbol(void 0),ke=Symbol(void 0),Me=Symbol(void 0),Ce=Symbol(void 0),Re=[];let Ee=null;function Oe(t=!1){Re.push(Ee=t?null:[])}function Be(){Re.pop(),Ee=Re[Re.length-1]||null}let Ie=1;function Pe(t){Ie+=t}function Ne(t){return t.dynamicChildren=Ie>0?Ee||i.Z6:null,Be(),Ie>0&&Ee&&Ee.push(t),t}function Ve(t,e,n,s,i,r){return Ne(Xe(t,e,n,s,i,r,!0))}function De(t,e,n,s,i){return Ne(Ue(t,e,n,s,i,!0))}function Le(t){return!!t&&!0===t.__v_isVNode}function Fe(t,e){return t.type===e.type&&t.key===e.key}const qe="__vInternal",je=({key:t})=>null!=t?t:null,He=({ref:t,ref_key:e,ref_for:n})=>null!=t?(0,i.HD)(t)||(0,s.dq)(t)||(0,i.mf)(t)?{i:D,r:t,k:e,f:!!n}:t:null;function Xe(t,e=null,n=null,s=0,r=null,o=(t===Ae?0:1),a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&je(e),ref:e&&He(e),scopeId:L,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return l?($e(c,n),128&o&&t.normalize(c)):n&&(c.shapeFlag|=(0,i.HD)(n)?8:16),Ie>0&&!a&&Ee&&(c.patchFlag>0||6&o)&&32!==c.patchFlag&&Ee.push(c),c}const Ue=Ye;function Ye(t,e=null,n=null,r=0,o=null,a=!1){if(t&&t!==Se||(t=Me),Le(t)){const s=Ge(t,e,!0);return n&&$e(s,n),s}if(An(t)&&(t=t.__vccOpts),e){e=We(e);let{class:t,style:n}=e;t&&!(0,i.HD)(t)&&(e.class=(0,i.C_)(t)),(0,i.Kn)(n)&&((0,s.X3)(n)&&!(0,i.kJ)(n)&&(n=(0,i.l7)({},n)),e.style=(0,i.j5)(n))}const l=(0,i.HD)(t)?1:G(t)?128:Te(t)?64:(0,i.Kn)(t)?4:(0,i.mf)(t)?2:0;return Xe(t,e,n,r,o,l,a,!0)}function We(t){return t?(0,s.X3)(t)||qe in t?(0,i.l7)({},t):t:null}function Ge(t,e,n=!1){const{props:s,ref:r,patchFlag:o,children:a}=t,l=e?Je(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&je(l),ref:e&&e.ref?n&&r?(0,i.kJ)(r)?r.concat(He(e)):[r,He(e)]:He(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ae?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ge(t.ssContent),ssFallback:t.ssFallback&&Ge(t.ssFallback),el:t.el,anchor:t.anchor};return c}function ze(t=" ",e=0){return Ue(ke,null,t,e)}function Ze(t="",e=!1){return e?(Oe(),De(Me,null,t)):Ue(Me,null,t)}function Ke(t){return null==t||"boolean"===typeof t?Ue(Me):(0,i.kJ)(t)?Ue(Ae,null,t.slice()):"object"===typeof t?Qe(t):Ue(ke,null,String(t))}function Qe(t){return null===t.el||t.memo?t:Ge(t)}function $e(t,e){let n=0;const{shapeFlag:s}=t;if(null==e)e=null;else if((0,i.kJ)(e))n=16;else if("object"===typeof e){if(65&s){const n=e.default;return void(n&&(n._c&&(n._d=!1),$e(t,n()),n._c&&(n._d=!0)))}{n=32;const s=e._;s||qe in e?3===s&&D&&(1===D.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=D}}else(0,i.mf)(e)?(e={default:e,_ctx:D},n=32):(e=String(e),64&s?(n=16,e=[ze(e)]):n=8);t.children=e,t.shapeFlag|=n}function Je(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const t in s)if("class"===t)e.class!==s.class&&(e.class=(0,i.C_)([e.class,s.class]));else if("style"===t)e.style=(0,i.j5)([e.style,s.style]);else if((0,i.F7)(t)){const n=e[t],r=s[t];!r||n===r||(0,i.kJ)(n)&&n.includes(r)||(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=s[t])}return e}function tn(t,e,n,s=null){o(t,e,7,[n,s])}function en(t,e,n,s){let r;const o=n&&n[s];if((0,i.kJ)(t)||(0,i.HD)(t)){r=new Array(t.length);for(let n=0,s=t.length;n<s;n++)r[n]=e(t[n],n,void 0,o&&o[n])}else if("number"===typeof t){0,r=new Array(t);for(let n=0;n<t;n++)r[n]=e(n+1,n,void 0,o&&o[n])}else if((0,i.Kn)(t))if(t[Symbol.iterator])r=Array.from(t,((t,n)=>e(t,n,void 0,o&&o[n])));else{const n=Object.keys(t);r=new Array(n.length);for(let s=0,i=n.length;s<i;s++){const i=n[s];r[s]=e(t[i],i,s,o&&o[s])}}else r=[];return n&&(n[s]=r),r}const nn=t=>t?fn(t)?Tn(t)||t.proxy:nn(t.parent):null,sn=(0,i.l7)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>nn(t.parent),$root:t=>nn(t.root),$emit:t=>t.emit,$options:t=>Ft(t),$forceUpdate:t=>()=>S(t.update),$nextTick:t=>x.bind(t.proxy),$watch:t=>tt.bind(t)}),rn={get({_:t},e){const{ctx:n,setupState:r,data:o,props:a,accessCache:l,type:c,appContext:u}=t;let h;if("$"!==e[0]){const s=l[e];if(void 0!==s)switch(s){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(r!==i.kT&&(0,i.RI)(r,e))return l[e]=1,r[e];if(o!==i.kT&&(0,i.RI)(o,e))return l[e]=2,o[e];if((h=t.propsOptions[0])&&(0,i.RI)(h,e))return l[e]=3,a[e];if(n!==i.kT&&(0,i.RI)(n,e))return l[e]=4,n[e];Pt&&(l[e]=0)}}const _=sn[e];let f,p;return _?("$attrs"===e&&(0,s.j)(t,"get",e),_(t)):(f=c.__cssModules)&&(f=f[e])?f:n!==i.kT&&(0,i.RI)(n,e)?(l[e]=4,n[e]):(p=u.config.globalProperties,(0,i.RI)(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:s,setupState:r,ctx:o}=t;return r!==i.kT&&(0,i.RI)(r,e)?(r[e]=n,!0):s!==i.kT&&(0,i.RI)(s,e)?(s[e]=n,!0):!(0,i.RI)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:o}},a){let l;return!!n[a]||t!==i.kT&&(0,i.RI)(t,a)||e!==i.kT&&(0,i.RI)(e,a)||(l=o[0])&&(0,i.RI)(l,a)||(0,i.RI)(s,a)||(0,i.RI)(sn,a)||(0,i.RI)(r.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?this.set(t,e,n.get(),null):null!=n.value&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};const on=_e();let an=0;function ln(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||on,a={uid:an++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new s.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$t(r,o),emitsOptions:N(r,o),emit:null,emitted:null,propsDefaults:i.kT,inheritAttrs:r.inheritAttrs,ctx:i.kT,data:i.kT,props:i.kT,attrs:i.kT,slots:i.kT,refs:i.kT,setupState:i.kT,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=P.bind(null,a),t.ce&&t.ce(a),a}let cn=null;const un=()=>cn||D,hn=t=>{cn=t,t.scope.on()},_n=()=>{cn&&cn.scope.off(),cn=null};function fn(t){return 4&t.vnode.shapeFlag}let pn,dn,mn=!1;function gn(t,e=!1){mn=e;const{props:n,children:s}=t.vnode,i=fn(t);zt(t,n,i,e),le(t,s);const r=i?vn(t,e):void 0;return mn=!1,r}function vn(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=(0,s.Xl)(new Proxy(t.ctx,rn));const{setup:o}=n;if(o){const n=t.setupContext=o.length>1?xn(t):null;hn(t),(0,s.Jd)();const l=r(o,t,0,[t.props,n]);if((0,s.lk)(),_n(),(0,i.tI)(l)){if(l.then(_n,_n),e)return l.then((n=>{bn(t,n,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=l}else bn(t,l,e)}else yn(t,e)}function bn(t,e,n){(0,i.mf)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Kn)(e)&&(t.setupState=(0,s.WL)(e)),yn(t,n)}function yn(t,e,n){const r=t.type;if(!t.render){if(!e&&pn&&!r.render){const e=r.template;if(e){0;const{isCustomElement:n,compilerOptions:s}=t.appContext.config,{delimiters:o,compilerOptions:a}=r,l=(0,i.l7)((0,i.l7)({isCustomElement:n,delimiters:o},s),a);r.render=pn(e,l)}}t.render=r.render||i.dG,dn&&dn(t)}hn(t),(0,s.Jd)(),Nt(t),(0,s.lk)(),_n()}function wn(t){return new Proxy(t.attrs,{get(e,n){return(0,s.j)(t,"get","$attrs"),e[n]}})}function xn(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=wn(t))},slots:t.slots,emit:t.emit,expose:e}}function Tn(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,s.WL)((0,s.Xl)(t.exposed)),{get(e,n){return n in e?e[n]:n in sn?sn[n](t):void 0}}))}function Sn(t){return(0,i.mf)(t)&&t.displayName||t.name}function An(t){return(0,i.mf)(t)&&"__vccOpts"in t}const kn=(t,e)=>(0,s.Fl)(t,e,mn);function Mn(t,e,n){const s=arguments.length;return 2===s?(0,i.Kn)(e)&&!(0,i.kJ)(e)?Le(e)?Ue(t,null,[e]):Ue(t,e):Ue(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):3===s&&Le(n)&&(n=[n]),Ue(t,e,n))}Symbol("");const Cn="3.2.31"},9963:function(t,e,n){"use strict";n.d(e,{bM:function(){return ot},e8:function(){return it},iM:function(){return _t},nr:function(){return st},ri:function(){return mt}});var s=n(3577),i=n(6252);n(2262);const r="http://www.w3.org/2000/svg",o="undefined"!==typeof document?document:null,a=o&&o.createElement("template"),l={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e?o.createElementNS(r,t):o.createElement(t,n?{is:n}:void 0);return"select"===t&&s&&null!=s.multiple&&i.setAttribute("multiple",s.multiple),i},createText:t=>o.createTextNode(t),createComment:t=>o.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>o.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),n),i===r||!(i=i.nextSibling))break}else{a.innerHTML=s?`<svg>${t}</svg>`:t;const i=a.content;if(s){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function c(t,e,n){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function u(t,e,n){const i=t.style,r=(0,s.HD)(n);if(n&&!r){for(const t in n)_(i,t,n[t]);if(e&&!(0,s.HD)(e))for(const t in e)null==n[t]&&_(i,t,"")}else{const s=i.display;r?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=s)}}const h=/\s*!important$/;function _(t,e,n){if((0,s.kJ)(n))n.forEach((n=>_(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const i=d(t,e);h.test(n)?t.setProperty((0,s.rs)(i),n.replace(h,""),"important"):t[i]=n}}const f=["Webkit","Moz","ms"],p={};function d(t,e){const n=p[e];if(n)return n;let i=(0,s._A)(e);if("filter"!==i&&i in t)return p[e]=i;i=(0,s.kC)(i);for(let s=0;s<f.length;s++){const n=f[s]+i;if(n in t)return p[e]=n}return e}const m="http://www.w3.org/1999/xlink";function g(t,e,n,i,r){if(i&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(m,e.slice(6,e.length)):t.setAttributeNS(m,e,n);else{const i=(0,s.Pq)(e);null==n||i&&!(0,s.yA)(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function v(t,e,n,i,r,o,a){if("innerHTML"===e||"textContent"===e)return i&&a(i,r,o),void(t[e]=null==n?"":n);if("value"===e&&"PROGRESS"!==t.tagName&&!t.tagName.includes("-")){t._value=n;const s=null==n?"":n;return t.value===s&&"OPTION"!==t.tagName||(t.value=s),void(null==n&&t.removeAttribute(e))}if(""===n||null==n){const i=typeof t[e];if("boolean"===i)return void(t[e]=(0,s.yA)(n));if(null==n&&"string"===i)return t[e]="",void t.removeAttribute(e);if("number"===i){try{t[e]=0}catch(l){}return void t.removeAttribute(e)}}try{t[e]=n}catch(c){0}}let b=Date.now,y=!1;if("undefined"!==typeof window){b()>document.createEvent("Event").timeStamp&&(b=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);y=!!(t&&Number(t[1])<=53)}let w=0;const x=Promise.resolve(),T=()=>{w=0},S=()=>w||(x.then(T),w=b());function A(t,e,n,s){t.addEventListener(e,n,s)}function k(t,e,n,s){t.removeEventListener(e,n,s)}function M(t,e,n,s,i=null){const r=t._vei||(t._vei={}),o=r[e];if(s&&o)o.value=s;else{const[n,a]=R(e);if(s){const o=r[e]=E(s,i);A(t,n,o,a)}else o&&(k(t,n,o,a),r[e]=void 0)}}const C=/(?:Once|Passive|Capture)$/;function R(t){let e;if(C.test(t)){let n;e={};while(n=t.match(C))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[(0,s.rs)(t.slice(2)),e]}function E(t,e){const n=t=>{const s=t.timeStamp||b();(y||s>=n.attached-1)&&(0,i.$d)(O(t,n.value),e,5,[t])};return n.value=t,n.attached=S(),n}function O(t,e){if((0,s.kJ)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const B=/^on[a-z]/,I=(t,e,n,i,r=!1,o,a,l,h)=>{"class"===e?c(t,i,r):"style"===e?u(t,n,i):(0,s.F7)(e)?(0,s.tR)(e)||M(t,e,n,i,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):P(t,e,i,r))?v(t,e,i,o,a,l,h):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),g(t,e,i,r))};function P(t,e,n,i){return i?"innerHTML"===e||"textContent"===e||!!(e in t&&B.test(e)&&(0,s.mf)(n)):"spellcheck"!==e&&"draggable"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!B.test(e)||!(0,s.HD)(n))&&e in t))))}"undefined"!==typeof HTMLElement&&HTMLElement;const N="transition",V="animation",D=(t,{slots:e})=>(0,i.h)(i.P$,j(t),e);D.displayName="Transition";const L={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},F=(D.props=(0,s.l7)({},i.P$.props,L),(t,e=[])=>{(0,s.kJ)(t)?t.forEach((t=>t(...e))):t&&t(...e)}),q=t=>!!t&&((0,s.kJ)(t)?t.some((t=>t.length>1)):t.length>1);function j(t){const e={};for(const s in t)s in L||(e[s]=t[s]);if(!1===t.css)return e;const{name:n="v",type:i,duration:r,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=o,appearActiveClass:u=a,appearToClass:h=l,leaveFromClass:_=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,d=H(r),m=d&&d[0],g=d&&d[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:y,onLeave:w,onLeaveCancelled:x,onBeforeAppear:T=v,onAppear:S=b,onAppearCancelled:A=y}=e,k=(t,e,n)=>{Y(t,e?h:l),Y(t,e?u:a),n&&n()},M=(t,e)=>{Y(t,p),Y(t,f),e&&e()},C=t=>(e,n)=>{const s=t?S:b,r=()=>k(e,t,n);F(s,[e,r]),W((()=>{Y(e,t?c:o),U(e,t?h:l),q(s)||z(e,i,m,r)}))};return(0,s.l7)(e,{onBeforeEnter(t){F(v,[t]),U(t,o),U(t,a)},onBeforeAppear(t){F(T,[t]),U(t,c),U(t,u)},onEnter:C(!1),onAppear:C(!0),onLeave(t,e){const n=()=>M(t,e);U(t,_),$(),U(t,f),W((()=>{Y(t,_),U(t,p),q(w)||z(t,i,g,n)})),F(w,[t,n])},onEnterCancelled(t){k(t,!1),F(y,[t])},onAppearCancelled(t){k(t,!0),F(A,[t])},onLeaveCancelled(t){M(t),F(x,[t])}})}function H(t){if(null==t)return null;if((0,s.Kn)(t))return[X(t.enter),X(t.leave)];{const e=X(t);return[e,e]}}function X(t){const e=(0,s.He)(t);return e}function U(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function Y(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function W(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let G=0;function z(t,e,n,s){const i=t._endId=++G,r=()=>{i===t._endId&&s()};if(n)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=Z(t,e);if(!o)return s();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,_),r()},_=e=>{e.target===t&&++u>=l&&h()};setTimeout((()=>{u<l&&h()}),a+1),t.addEventListener(c,_)}function Z(t,e){const n=window.getComputedStyle(t),s=t=>(n[t]||"").split(", "),i=s(N+"Delay"),r=s(N+"Duration"),o=K(i,r),a=s(V+"Delay"),l=s(V+"Duration"),c=K(a,l);let u=null,h=0,_=0;e===N?o>0&&(u=N,h=o,_=r.length):e===V?c>0&&(u=V,h=c,_=l.length):(h=Math.max(o,c),u=h>0?o>c?N:V:null,_=u?u===N?r.length:l.length:0);const f=u===N&&/\b(transform|all)(,|$)/.test(n[N+"Property"]);return{type:u,timeout:h,propCount:_,hasTransform:f}}function K(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,n)=>Q(e)+Q(t[n]))))}function Q(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function $(){return document.body.offsetHeight}new WeakMap,new WeakMap;const J=t=>{const e=t.props["onUpdate:modelValue"];return(0,s.kJ)(e)?t=>(0,s.ir)(e,t):e};function tt(t){t.target.composing=!0}function et(t){const e=t.target;e.composing&&(e.composing=!1,nt(e,"input"))}function nt(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}const st={created(t,{modifiers:{lazy:e,trim:n,number:i}},r){t._assign=J(r);const o=i||r.props&&"number"===r.props.type;A(t,e?"change":"input",(e=>{if(e.target.composing)return;let i=t.value;n?i=i.trim():o&&(i=(0,s.He)(i)),t._assign(i)})),n&&A(t,"change",(()=>{t.value=t.value.trim()})),e||(A(t,"compositionstart",tt),A(t,"compositionend",et),A(t,"change",et))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:r}},o){if(t._assign=J(o),t.composing)return;if(document.activeElement===t){if(n)return;if(i&&t.value.trim()===e)return;if((r||"number"===t.type)&&(0,s.He)(t.value)===e)return}const a=null==e?"":e;t.value!==a&&(t.value=a)}},it={deep:!0,created(t,e,n){t._assign=J(n),A(t,"change",(()=>{const e=t._modelValue,n=lt(t),i=t.checked,r=t._assign;if((0,s.kJ)(e)){const t=(0,s.hq)(e,n),o=-1!==t;if(i&&!o)r(e.concat(n));else if(!i&&o){const n=[...e];n.splice(t,1),r(n)}}else if((0,s.DM)(e)){const t=new Set(e);i?t.add(n):t.delete(n),r(t)}else r(ct(t,i))}))},mounted:rt,beforeUpdate(t,e,n){t._assign=J(n),rt(t,e,n)}};function rt(t,{value:e,oldValue:n},i){t._modelValue=e,(0,s.kJ)(e)?t.checked=(0,s.hq)(e,i.props.value)>-1:(0,s.DM)(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=(0,s.WV)(e,ct(t,!0)))}const ot={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const r=(0,s.DM)(e);A(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>n?(0,s.He)(lt(t)):lt(t)));t._assign(t.multiple?r?new Set(e):e:e[0])})),t._assign=J(i)},mounted(t,{value:e}){at(t,e)},beforeUpdate(t,e,n){t._assign=J(n)},updated(t,{value:e}){at(t,e)}};function at(t,e){const n=t.multiple;if(!n||(0,s.kJ)(e)||(0,s.DM)(e)){for(let i=0,r=t.options.length;i<r;i++){const r=t.options[i],o=lt(r);if(n)(0,s.kJ)(e)?r.selected=(0,s.hq)(e,o)>-1:r.selected=e.has(o);else if((0,s.WV)(lt(r),e))return void(t.selectedIndex!==i&&(t.selectedIndex=i))}n||-1===t.selectedIndex||(t.selectedIndex=-1)}}function lt(t){return"_value"in t?t._value:t.value}function ct(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const ut=["ctrl","shift","alt","meta"],ht={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>ut.some((n=>t[`${n}Key`]&&!e.includes(n)))},_t=(t,e)=>(n,...s)=>{for(let t=0;t<e.length;t++){const s=ht[e[t]];if(s&&s(n,e))return}return t(n,...s)};const ft=(0,s.l7)({patchProp:I},l);let pt;function dt(){return pt||(pt=(0,i.Us)(ft))}const mt=(...t)=>{const e=dt().createApp(...t);const{mount:n}=e;return e.mount=t=>{const i=gt(t);if(!i)return;const r=e._component;(0,s.mf)(r)||r.render||r.template||(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function gt(t){if((0,s.HD)(t)){const e=document.querySelector(t);return e}return t}},3577:function(t,e,n){"use strict";function s(t,e){const n=Object.create(null),s=t.split(",");for(let i=0;i<s.length;i++)n[s[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}n.d(e,{C_:function(){return f},DM:function(){return B},E9:function(){return st},F7:function(){return S},Gg:function(){return U},HD:function(){return N},He:function(){return et},Kn:function(){return D},NO:function(){return x},Nj:function(){return tt},Od:function(){return M},PO:function(){return H},Pq:function(){return a},RI:function(){return R},S0:function(){return X},W7:function(){return j},WV:function(){return d},Z6:function(){return y},_A:function(){return G},_N:function(){return O},aU:function(){return $},dG:function(){return w},e1:function(){return r},fY:function(){return s},hR:function(){return Q},hq:function(){return m},ir:function(){return J},j5:function(){return c},kC:function(){return K},kJ:function(){return E},kT:function(){return b},l7:function(){return k},mf:function(){return P},rs:function(){return Z},tI:function(){return L},tR:function(){return A},yA:function(){return l},yk:function(){return V},zw:function(){return g}});const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",r=s(i);const o="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",a=s(o);function l(t){return!!t||""===t}function c(t){if(E(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=N(s)?_(s):c(s);if(i)for(const t in i)e[t]=i[t]}return e}return N(t)||D(t)?t:void 0}const u=/;(?![^(]*\))/g,h=/:(.+)/;function _(t){const e={};return t.split(u).forEach((t=>{if(t){const n=t.split(h);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function f(t){let e="";if(N(t))e=t;else if(E(t))for(let n=0;n<t.length;n++){const s=f(t[n]);s&&(e+=s+" ")}else if(D(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function p(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=d(t[s],e[s]);return n}function d(t,e){if(t===e)return!0;let n=I(t),s=I(e);if(n||s)return!(!n||!s)&&t.getTime()===e.getTime();if(n=E(t),s=E(e),n||s)return!(!n||!s)&&p(t,e);if(n=D(t),s=D(e),n||s){if(!n||!s)return!1;const i=Object.keys(t).length,r=Object.keys(e).length;if(i!==r)return!1;for(const n in t){const s=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(s&&!i||!s&&i||!d(t[n],e[n]))return!1}}return String(t)===String(e)}function m(t,e){return t.findIndex((t=>d(t,e)))}const g=t=>N(t)?t:null==t?"":E(t)||D(t)&&(t.toString===F||!P(t.toString))?JSON.stringify(t,v,2):String(t),v=(t,e)=>e&&e.__v_isRef?v(t,e.value):O(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:B(e)?{[`Set(${e.size})`]:[...e.values()]}:!D(e)||E(e)||H(e)?e:String(e),b={},y=[],w=()=>{},x=()=>!1,T=/^on[^a-z]/,S=t=>T.test(t),A=t=>t.startsWith("onUpdate:"),k=Object.assign,M=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},C=Object.prototype.hasOwnProperty,R=(t,e)=>C.call(t,e),E=Array.isArray,O=t=>"[object Map]"===q(t),B=t=>"[object Set]"===q(t),I=t=>t instanceof Date,P=t=>"function"===typeof t,N=t=>"string"===typeof t,V=t=>"symbol"===typeof t,D=t=>null!==t&&"object"===typeof t,L=t=>D(t)&&P(t.then)&&P(t.catch),F=Object.prototype.toString,q=t=>F.call(t),j=t=>q(t).slice(8,-1),H=t=>"[object Object]"===q(t),X=t=>N(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,U=s(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Y=t=>{const e=Object.create(null);return n=>{const s=e[n];return s||(e[n]=t(n))}},W=/-(\w)/g,G=Y((t=>t.replace(W,((t,e)=>e?e.toUpperCase():"")))),z=/\B([A-Z])/g,Z=Y((t=>t.replace(z,"-$1").toLowerCase())),K=Y((t=>t.charAt(0).toUpperCase()+t.slice(1))),Q=Y((t=>t?`on${K(t)}`:"")),$=(t,e)=>!Object.is(t,e),J=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},tt=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},et=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let nt;const st=()=>nt||(nt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{})},5382:function(t,e,n){(function(t,s){s(e,n(2),n(2547),n(3515))})(0,(function(t,e,n,s){"use strict";function i(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var r=i(e),o=i(n),a=i(s),l=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},c=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},u=function(t,e){return{startTime:e,type:"setValue",value:t}},h=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},_=function(t,e,n){var s=n.startTime,i=n.target,r=n.timeConstant;return i+(e-i)*Math.exp((s-t)/r)},f=function(t){return"exponentialRampToValue"===t.type},p=function(t){return"linearRampToValue"===t.type},d=function(t){return f(t)||p(t)},m=function(t){return"setValue"===t.type},g=function(t){return"setValueCurve"===t.type},v=function t(e,n,s,i){var r=e[n];return void 0===r?i:d(r)||m(r)?r.value:g(r)?r.values[r.values.length-1]:_(s,t(e,n-1,r.startTime,i),r)},b=function(t,e,n,s,i){return void 0===n?[s.insertTime,i]:d(n)?[n.endTime,n.value]:m(n)?[n.startTime,n.value]:g(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,v(t,e-1,n.startTime,i)]},y=function(t){return"cancelAndHold"===t.type},w=function(t){return"cancelScheduledValues"===t.type},x=function(t){return y(t)||w(t)?t.cancelTime:f(t)||p(t)?t.endTime:t.startTime},T=function(t,e,n,s){var i=s.endTime,r=s.value;return n===r?r:0<n&&0<r||n<0&&r<0?n*Math.pow(r/n,(t-e)/(i-e)):0},S=function(t,e,n,s){var i=s.endTime,r=s.value;return n+(t-e)/(i-e)*(r-n)},A=function(t,e){var n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]},k=function(t,e){var n=e.duration,s=e.startTime,i=e.values,r=(t-s)/n*(i.length-1);return A(i,r)},M=function(t){return"setTarget"===t.type},C=function(t){function e(t){o["default"](this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return a["default"](e,[{key:t,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=x(t);if(y(t)||w(t)){var n=this._automationEvents.findIndex((function(n){return w(t)&&g(n)?n.startTime+n.duration>=e:x(n)>=e})),s=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),y(t)){var i=this._automationEvents[this._automationEvents.length-1];if(void 0!==s&&d(s)){if(M(i))throw new Error("The internal list is malformed.");var r=g(i)?i.startTime+i.duration:x(i),o=g(i)?i.values[i.values.length-1]:i.value,a=f(s)?T(e,r,o,s):S(e,r,o,s),_=f(s)?l(a,e,this._currenTime):c(a,e,this._currenTime);this._automationEvents.push(_)}void 0!==i&&M(i)&&this._automationEvents.push(u(this.getValue(e),e)),void 0!==i&&g(i)&&i.startTime+i.duration>e&&(this._automationEvents[this._automationEvents.length-1]=h(new Float32Array([6,7]),i.startTime,e-i.startTime))}}else{var m=this._automationEvents.findIndex((function(t){return x(t)>e})),v=-1===m?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[m-1];if(void 0!==v&&g(v)&&x(v)+v.duration>e)return!1;var b=f(t)?l(t.value,t.endTime,this._currenTime):p(t)?c(t.value,e,this._currenTime):t;if(-1===m)this._automationEvents.push(b);else{if(g(t)&&e+t.duration>x(this._automationEvents[m]))return!1;this._automationEvents.splice(m,0,b)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return x(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),s=n[0];M(s)&&n.unshift(u(v(this._automationEvents,e-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var e=this._automationEvents.findIndex((function(e){return x(e)>t})),n=this._automationEvents[e],s=(-1===e?this._automationEvents.length:e)-1,i=this._automationEvents[s];if(void 0!==i&&M(i)&&(void 0===n||!d(n)||n.insertTime>t))return _(t,v(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(void 0!==i&&m(i)&&(void 0===n||!d(n)))return i.value;if(void 0!==i&&g(i)&&(void 0===n||!d(n)||i.startTime+i.duration>t))return t<i.startTime+i.duration?k(t,i):i.values[i.values.length-1];if(void 0!==i&&d(i)&&(void 0===n||!d(n)))return i.value;if(void 0!==n&&f(n)){var o=b(this._automationEvents,s,i,n,this._defaultValue),a=r["default"](o,2),l=a[0],c=a[1];return T(t,l,c,n)}if(void 0!==n&&p(n)){var u=b(this._automationEvents,s,i,n,this._defaultValue),h=r["default"](u,2),y=h[0],w=h[1];return S(t,y,w,n)}return this._defaultValue}}]),e}(Symbol.iterator),R=function(t){return{cancelTime:t,type:"cancelAndHold"}},E=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},O=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},B=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},I=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}};t.AutomationEventList=C,t.createCancelAndHoldAutomationEvent=R,t.createCancelScheduledValuesAutomationEvent=E,t.createExponentialRampToValueAutomationEvent=O,t.createLinearRampToValueAutomationEvent=B,t.createSetTargetAutomationEvent=I,t.createSetValueAutomationEvent=u,t.createSetValueCurveAutomationEvent=h,Object.defineProperty(t,"__esModule",{value:!0})}))},9662:function(t,e,n){var s=n(7854),i=n(614),r=n(6330),o=s.TypeError;t.exports=function(t){if(i(t))return t;throw o(r(t)+" is not a function")}},6077:function(t,e,n){var s=n(7854),i=n(614),r=s.String,o=s.TypeError;t.exports=function(t){if("object"==typeof t||i(t))return t;throw o("Can't set "+r(t)+" as a prototype")}},9670:function(t,e,n){var s=n(7854),i=n(111),r=s.String,o=s.TypeError;t.exports=function(t){if(i(t))return t;throw o(r(t)+" is not an object")}},4019:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var s,i,r,o=n(4019),a=n(9781),l=n(7854),c=n(614),u=n(111),h=n(2597),_=n(648),f=n(6330),p=n(8880),d=n(1320),m=n(3070).f,g=n(7976),v=n(9518),b=n(7674),y=n(5112),w=n(9711),x=l.Int8Array,T=x&&x.prototype,S=l.Uint8ClampedArray,A=S&&S.prototype,k=x&&v(x),M=T&&v(T),C=Object.prototype,R=l.TypeError,E=y("toStringTag"),O=w("TYPED_ARRAY_TAG"),B=w("TYPED_ARRAY_CONSTRUCTOR"),I=o&&!!b&&"Opera"!==_(l.opera),P=!1,N={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},V={BigInt64Array:8,BigUint64Array:8},D=function(t){if(!u(t))return!1;var e=_(t);return"DataView"===e||h(N,e)||h(V,e)},L=function(t){if(!u(t))return!1;var e=_(t);return h(N,e)||h(V,e)},F=function(t){if(L(t))return t;throw R("Target is not a typed array")},q=function(t){if(c(t)&&(!b||g(k,t)))return t;throw R(f(t)+" is not a typed array constructor")},j=function(t,e,n,s){if(a){if(n)for(var i in N){var r=l[i];if(r&&h(r.prototype,t))try{delete r.prototype[t]}catch(o){try{r.prototype[t]=e}catch(c){}}}M[t]&&!n||d(M,t,n?e:I&&T[t]||e,s)}},H=function(t,e,n){var s,i;if(a){if(b){if(n)for(s in N)if(i=l[s],i&&h(i,t))try{delete i[t]}catch(r){}if(k[t]&&!n)return;try{return d(k,t,n?e:I&&k[t]||e)}catch(r){}}for(s in N)i=l[s],!i||i[t]&&!n||d(i,t,e)}};for(s in N)i=l[s],r=i&&i.prototype,r?p(r,B,i):I=!1;for(s in V)i=l[s],r=i&&i.prototype,r&&p(r,B,i);if((!I||!c(k)||k===Function.prototype)&&(k=function(){throw R("Incorrect invocation")},I))for(s in N)l[s]&&b(l[s],k);if((!I||!M||M===C)&&(M=k.prototype,I))for(s in N)l[s]&&b(l[s].prototype,M);if(I&&v(A)!==M&&b(A,M),a&&!h(M,E))for(s in P=!0,m(M,E,{get:function(){return u(this)?this[O]:void 0}}),N)l[s]&&p(l[s],O,s);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_CONSTRUCTOR:B,TYPED_ARRAY_TAG:P&&O,aTypedArray:F,aTypedArrayConstructor:q,exportTypedArrayMethod:j,exportTypedArrayStaticMethod:H,isView:D,isTypedArray:L,TypedArray:k,TypedArrayPrototype:M}},1318:function(t,e,n){var s=n(5656),i=n(1400),r=n(6244),o=function(t){return function(e,n,o){var a,l=s(e),c=r(l),u=i(o,c);if(t&&n!=n){while(c>u)if(a=l[u++],a!=a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},4326:function(t,e,n){var s=n(1702),i=s({}.toString),r=s("".slice);t.exports=function(t){return r(i(t),8,-1)}},648:function(t,e,n){var s=n(7854),i=n(1694),r=n(614),o=n(4326),a=n(5112),l=a("toStringTag"),c=s.Object,u="Arguments"==o(function(){return arguments}()),h=function(t,e){try{return t[e]}catch(n){}};t.exports=i?o:function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=h(e=c(t),l))?n:u?o(e):"Object"==(s=o(e))&&r(e.callee)?"Arguments":s}},7741:function(t,e,n){var s=n(1702),i=s("".replace),r=function(t){return String(Error(t).stack)}("zxcasd"),o=/\n\s*at [^:]*:[^\n]*/,a=o.test(r);t.exports=function(t,e){if(a&&"string"==typeof t)while(e--)t=i(t,o,"");return t}},2128:function(t,e,n){var s=n(2597),i=n(3887),r=n(1236),o=n(3070);t.exports=function(t,e,n){for(var a=i(e),l=o.f,c=r.f,u=0;u<a.length;u++){var h=a[u];s(t,h)||n&&s(n,h)||l(t,h,c(e,h))}}},9920:function(t,e,n){var s=n(7293);t.exports=!s((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8880:function(t,e,n){var s=n(9781),i=n(3070),r=n(9114);t.exports=s?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},9781:function(t,e,n){var s=n(7293);t.exports=!s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(t,e,n){var s=n(7854),i=n(111),r=s.document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},8113:function(t,e,n){var s=n(5005);t.exports=s("navigator","userAgent")||""},7392:function(t,e,n){var s,i,r=n(7854),o=n(8113),a=r.process,l=r.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(s=u.split("."),i=s[0]>0&&s[0]<4?1:+(s[0]+s[1])),!i&&o&&(s=o.match(/Edge\/(\d+)/),(!s||s[1]>=74)&&(s=o.match(/Chrome\/(\d+)/),s&&(i=+s[1]))),t.exports=i},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:function(t,e,n){var s=n(7293),i=n(9114);t.exports=!s((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",i(1,7)),7!==t.stack)}))},2109:function(t,e,n){var s=n(7854),i=n(1236).f,r=n(8880),o=n(1320),a=n(3505),l=n(2128),c=n(4705);t.exports=function(t,e){var n,u,h,_,f,p,d=t.target,m=t.global,g=t.stat;if(u=m?s:g?s[d]||a(d,{}):(s[d]||{}).prototype,u)for(h in e){if(f=e[h],t.noTargetGet?(p=i(u,h),_=p&&p.value):_=u[h],n=c(m?h:d+(g?".":"#")+h,t.forced),!n&&void 0!==_){if(typeof f==typeof _)continue;l(f,_)}(t.sham||_&&_.sham)&&r(f,"sham",!0),o(u,h,f,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},2104:function(t,e,n){var s=n(4374),i=Function.prototype,r=i.apply,o=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(s?o.bind(r):function(){return o.apply(r,arguments)})},4374:function(t,e,n){var s=n(7293);t.exports=!s((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var s=n(4374),i=Function.prototype.call;t.exports=s?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(t,e,n){var s=n(9781),i=n(2597),r=Function.prototype,o=s&&Object.getOwnPropertyDescriptor,a=i(r,"name"),l=a&&"something"===function(){}.name,c=a&&(!s||s&&o(r,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},1702:function(t,e,n){var s=n(4374),i=Function.prototype,r=i.bind,o=i.call,a=s&&r.bind(o,o);t.exports=s?function(t){return t&&a(t)}:function(t){return t&&function(){return o.apply(t,arguments)}}},5005:function(t,e,n){var s=n(7854),i=n(614),r=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?r(s[t]):s[t]&&s[t][e]}},8173:function(t,e,n){var s=n(9662);t.exports=function(t,e){var n=t[e];return null==n?void 0:s(n)}},7854:function(t,e,n){var s=function(t){return t&&t.Math==Math&&t};t.exports=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof self&&self)||s("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(t,e,n){var s=n(1702),i=n(7908),r=s({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(i(t),e)}},3501:function(t){t.exports={}},4664:function(t,e,n){var s=n(9781),i=n(7293),r=n(317);t.exports=!s&&!i((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var s=n(7854),i=n(1702),r=n(7293),o=n(4326),a=s.Object,l=i("".split);t.exports=r((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?l(t,""):a(t)}:a},9587:function(t,e,n){var s=n(614),i=n(111),r=n(7674);t.exports=function(t,e,n){var o,a;return r&&s(o=e.constructor)&&o!==n&&i(a=o.prototype)&&a!==n.prototype&&r(t,a),t}},2788:function(t,e,n){var s=n(1702),i=n(614),r=n(5465),o=s(Function.toString);i(r.inspectSource)||(r.inspectSource=function(t){return o(t)}),t.exports=r.inspectSource},8340:function(t,e,n){var s=n(111),i=n(8880);t.exports=function(t,e){s(e)&&"cause"in e&&i(t,"cause",e.cause)}},9909:function(t,e,n){var s,i,r,o=n(8536),a=n(7854),l=n(1702),c=n(111),u=n(8880),h=n(2597),_=n(5465),f=n(6200),p=n(3501),d="Object already initialized",m=a.TypeError,g=a.WeakMap,v=function(t){return r(t)?i(t):s(t,{})},b=function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw m("Incompatible receiver, "+t+" required");return n}};if(o||_.state){var y=_.state||(_.state=new g),w=l(y.get),x=l(y.has),T=l(y.set);s=function(t,e){if(x(y,t))throw new m(d);return e.facade=t,T(y,t,e),e},i=function(t){return w(y,t)||{}},r=function(t){return x(y,t)}}else{var S=f("state");p[S]=!0,s=function(t,e){if(h(t,S))throw new m(d);return e.facade=t,u(t,S,e),e},i=function(t){return h(t,S)?t[S]:{}},r=function(t){return h(t,S)}}t.exports={set:s,get:i,has:r,enforce:v,getterFor:b}},614:function(t){t.exports=function(t){return"function"==typeof t}},4705:function(t,e,n){var s=n(7293),i=n(614),r=/#|\.prototype\./,o=function(t,e){var n=l[a(t)];return n==u||n!=c&&(i(e)?s(e):!!e)},a=o.normalize=function(t){return String(t).replace(r,".").toLowerCase()},l=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},111:function(t,e,n){var s=n(614);t.exports=function(t){return"object"==typeof t?null!==t:s(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var s=n(7854),i=n(5005),r=n(614),o=n(7976),a=n(3307),l=s.Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return r(e)&&o(e.prototype,l(t))}},6244:function(t,e,n){var s=n(7466);t.exports=function(t){return s(t.length)}},133:function(t,e,n){var s=n(7392),i=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&s&&s<41}))},8536:function(t,e,n){var s=n(7854),i=n(614),r=n(2788),o=s.WeakMap;t.exports=i(o)&&/native code/.test(r(o))},6277:function(t,e,n){var s=n(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:s(t)}},3070:function(t,e,n){var s=n(7854),i=n(9781),r=n(4664),o=n(3353),a=n(9670),l=n(4948),c=s.TypeError,u=Object.defineProperty,h=Object.getOwnPropertyDescriptor,_="enumerable",f="configurable",p="writable";e.f=i?o?function(t,e,n){if(a(t),e=l(e),a(n),"function"===typeof t&&"prototype"===e&&"value"in n&&p in n&&!n[p]){var s=h(t,e);s&&s[p]&&(t[e]=n.value,n={configurable:f in n?n[f]:s[f],enumerable:_ in n?n[_]:s[_],writable:!1})}return u(t,e,n)}:u:function(t,e,n){if(a(t),e=l(e),a(n),r)try{return u(t,e,n)}catch(s){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var s=n(9781),i=n(6916),r=n(5296),o=n(9114),a=n(5656),l=n(4948),c=n(2597),u=n(4664),h=Object.getOwnPropertyDescriptor;e.f=s?h:function(t,e){if(t=a(t),e=l(e),u)try{return h(t,e)}catch(n){}if(c(t,e))return o(!i(r.f,t,e),t[e])}},8006:function(t,e,n){var s=n(6324),i=n(748),r=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return s(t,r)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var s=n(7854),i=n(2597),r=n(614),o=n(7908),a=n(6200),l=n(9920),c=a("IE_PROTO"),u=s.Object,h=u.prototype;t.exports=l?u.getPrototypeOf:function(t){var e=o(t);if(i(e,c))return e[c];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof u?h:null}},7976:function(t,e,n){var s=n(1702);t.exports=s({}.isPrototypeOf)},6324:function(t,e,n){var s=n(1702),i=n(2597),r=n(5656),o=n(1318).indexOf,a=n(3501),l=s([].push);t.exports=function(t,e){var n,s=r(t),c=0,u=[];for(n in s)!i(a,n)&&i(s,n)&&l(u,n);while(e.length>c)i(s,n=e[c++])&&(~o(u,n)||l(u,n));return u}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,i=s&&!n.call({1:2},1);e.f=i?function(t){var e=s(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var s=n(1702),i=n(9670),r=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(n,[]),e=n instanceof Array}catch(o){}return function(n,s){return i(n),r(s),e?t(n,s):n.__proto__=s,n}}():void 0)},2140:function(t,e,n){var s=n(7854),i=n(6916),r=n(614),o=n(111),a=s.TypeError;t.exports=function(t,e){var n,s;if("string"===e&&r(n=t.toString)&&!o(s=i(n,t)))return s;if(r(n=t.valueOf)&&!o(s=i(n,t)))return s;if("string"!==e&&r(n=t.toString)&&!o(s=i(n,t)))return s;throw a("Can't convert object to primitive value")}},3887:function(t,e,n){var s=n(5005),i=n(1702),r=n(8006),o=n(5181),a=n(9670),l=i([].concat);t.exports=s("Reflect","ownKeys")||function(t){var e=r.f(a(t)),n=o.f;return n?l(e,n(t)):e}},1320:function(t,e,n){var s=n(7854),i=n(614),r=n(2597),o=n(8880),a=n(3505),l=n(2788),c=n(9909),u=n(6530).CONFIGURABLE,h=c.get,_=c.enforce,f=String(String).split("String");(t.exports=function(t,e,n,l){var c,h=!!l&&!!l.unsafe,p=!!l&&!!l.enumerable,d=!!l&&!!l.noTargetGet,m=l&&void 0!==l.name?l.name:e;i(n)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!r(n,"name")||u&&n.name!==m)&&o(n,"name",m),c=_(n),c.source||(c.source=f.join("string"==typeof m?m:""))),t!==s?(h?!d&&t[e]&&(p=!0):delete t[e],p?t[e]=n:o(t,e,n)):p?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return i(this)&&h(this).source||l(this)}))},4488:function(t,e,n){var s=n(7854),i=s.TypeError;t.exports=function(t){if(void 0==t)throw i("Can't call method on "+t);return t}},3505:function(t,e,n){var s=n(7854),i=Object.defineProperty;t.exports=function(t,e){try{i(s,t,{value:e,configurable:!0,writable:!0})}catch(n){s[t]=e}return e}},6200:function(t,e,n){var s=n(2309),i=n(9711),r=s("keys");t.exports=function(t){return r[t]||(r[t]=i(t))}},5465:function(t,e,n){var s=n(7854),i=n(3505),r="__core-js_shared__",o=s[r]||i(r,{});t.exports=o},2309:function(t,e,n){var s=n(1913),i=n(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:s?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:function(t,e,n){var s=n(9303),i=Math.max,r=Math.min;t.exports=function(t,e){var n=s(t);return n<0?i(n+e,0):r(n,e)}},5656:function(t,e,n){var s=n(8361),i=n(4488);t.exports=function(t){return s(i(t))}},9303:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){var s=+t;return s!==s||0===s?0:(s>0?n:e)(s)}},7466:function(t,e,n){var s=n(9303),i=Math.min;t.exports=function(t){return t>0?i(s(t),9007199254740991):0}},7908:function(t,e,n){var s=n(7854),i=n(4488),r=s.Object;t.exports=function(t){return r(i(t))}},4590:function(t,e,n){var s=n(7854),i=n(3002),r=s.RangeError;t.exports=function(t,e){var n=i(t);if(n%e)throw r("Wrong offset");return n}},3002:function(t,e,n){var s=n(7854),i=n(9303),r=s.RangeError;t.exports=function(t){var e=i(t);if(e<0)throw r("The argument can't be less than 0");return e}},7593:function(t,e,n){var s=n(7854),i=n(6916),r=n(111),o=n(2190),a=n(8173),l=n(2140),c=n(5112),u=s.TypeError,h=c("toPrimitive");t.exports=function(t,e){if(!r(t)||o(t))return t;var n,s=a(t,h);if(s){if(void 0===e&&(e="default"),n=i(s,t,e),!r(n)||o(n))return n;throw u("Can't convert object to primitive value")}return void 0===e&&(e="number"),l(t,e)}},4948:function(t,e,n){var s=n(7593),i=n(2190);t.exports=function(t){var e=s(t,"string");return i(e)?e:e+""}},1694:function(t,e,n){var s=n(5112),i=s("toStringTag"),r={};r[i]="z",t.exports="[object z]"===String(r)},1340:function(t,e,n){var s=n(7854),i=n(648),r=s.String;t.exports=function(t){if("Symbol"===i(t))throw TypeError("Cannot convert a Symbol value to a string");return r(t)}},6330:function(t,e,n){var s=n(7854),i=s.String;t.exports=function(t){try{return i(t)}catch(e){return"Object"}}},9711:function(t,e,n){var s=n(1702),i=0,r=Math.random(),o=s(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++i+r,36)}},3307:function(t,e,n){var s=n(133);t.exports=s&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var s=n(9781),i=n(7293);t.exports=s&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},5112:function(t,e,n){var s=n(7854),i=n(2309),r=n(2597),o=n(9711),a=n(133),l=n(3307),c=i("wks"),u=s.Symbol,h=u&&u["for"],_=l?u:u&&u.withoutSetter||o;t.exports=function(t){if(!r(c,t)||!a&&"string"!=typeof c[t]){var e="Symbol."+t;a&&r(u,t)?c[t]=u[t]:c[t]=l&&h?h(e):_(e)}return c[t]}},9191:function(t,e,n){"use strict";var s=n(5005),i=n(2597),r=n(8880),o=n(7976),a=n(7674),l=n(2128),c=n(9587),u=n(6277),h=n(8340),_=n(7741),f=n(2914),p=n(1913);t.exports=function(t,e,n,d){var m=d?2:1,g=t.split("."),v=g[g.length-1],b=s.apply(null,g);if(b){var y=b.prototype;if(!p&&i(y,"cause")&&delete y.cause,!n)return b;var w=s("Error"),x=e((function(t,e){var n=u(d?e:t,void 0),s=d?new b(t):new b;return void 0!==n&&r(s,"message",n),f&&r(s,"stack",_(s.stack,2)),this&&o(y,this)&&c(s,this,x),arguments.length>m&&h(s,arguments[m]),s}));if(x.prototype=y,"Error"!==v&&(a?a(x,w):l(x,w,{name:!0})),l(x,b),!p)try{y.name!==v&&r(y,"name",v),y.constructor=x}catch(T){}return x}}},1703:function(t,e,n){var s=n(2109),i=n(7854),r=n(2104),o=n(9191),a="WebAssembly",l=i[a],c=7!==Error("e",{cause:7}).cause,u=function(t,e){var n={};n[t]=o(t,e,c),s({global:!0,forced:c},n)},h=function(t,e){if(l&&l[t]){var n={};n[t]=o(a+"."+t,e,c),s({target:a,stat:!0,forced:c},n)}};u("Error",(function(t){return function(e){return r(t,this,arguments)}})),u("EvalError",(function(t){return function(e){return r(t,this,arguments)}})),u("RangeError",(function(t){return function(e){return r(t,this,arguments)}})),u("ReferenceError",(function(t){return function(e){return r(t,this,arguments)}})),u("SyntaxError",(function(t){return function(e){return r(t,this,arguments)}})),u("TypeError",(function(t){return function(e){return r(t,this,arguments)}})),u("URIError",(function(t){return function(e){return r(t,this,arguments)}})),h("CompileError",(function(t){return function(e){return r(t,this,arguments)}})),h("LinkError",(function(t){return function(e){return r(t,this,arguments)}})),h("RuntimeError",(function(t){return function(e){return r(t,this,arguments)}}))},8675:function(t,e,n){"use strict";var s=n(260),i=n(6244),r=n(9303),o=s.aTypedArray,a=s.exportTypedArrayMethod;a("at",(function(t){var e=o(this),n=i(e),s=r(t),a=s>=0?s:n+s;return a<0||a>=n?void 0:e[a]}))},3462:function(t,e,n){"use strict";var s=n(7854),i=n(6916),r=n(260),o=n(6244),a=n(4590),l=n(7908),c=n(7293),u=s.RangeError,h=s.Int8Array,_=h&&h.prototype,f=_&&_.set,p=r.aTypedArray,d=r.exportTypedArrayMethod,m=!c((function(){var t=new Uint8ClampedArray(2);return i(f,t,{length:1,0:3},1),3!==t[1]})),g=m&&r.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var t=new h(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));d("set",(function(t){p(this);var e=a(arguments.length>1?arguments[1]:void 0,1),n=l(t);if(m)return i(f,this,n,e);var s=this.length,r=o(n),c=0;if(r+e>s)throw u("Wrong length");while(c<r)this[e+c]=n[c++]}),!m||g)},7514:function(t,e,n){var s=n(1038),i=(s.System,s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays,s.new_array_n,s.new_byte,s.new_double,s.new_float),r=(s.new_float_n,s.new_int,s.new_int_n,s.assert,n(687));function o(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=i(r.SBMAX_l),this.s=i(r.SBMAX_s),this.psfb21=i(r.PSFB21),this.psfb12=i(r.PSFB12),this.cb_l=i(r.CBANDS),this.cb_s=i(r.CBANDS),this.eql_w=i(r.BLKSIZE/2)}t.exports=o},3724:function(t,e,n){var s=n(1038),i=s.System,r=(s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays),o=(s.new_array_n,s.new_byte),a=(s.new_double,s.new_float,s.new_float_n),l=s.new_int,c=(s.new_int_n,s.assert),u=n(5638),h=n(7721),_=n(687),f=n(1998);function p(){var t=this,e=32773,n=32,s=null,p=null,d=null,m=null;this.setModules=function(t,e,n,i){s=t,p=e,d=n,m=i};var g=null,v=0,b=0,y=0;function w(t){i.arraycopy(t.header[t.w_ptr].buf,0,g,b,t.sideinfo_len),b+=t.sideinfo_len,v+=8*t.sideinfo_len,t.w_ptr=t.w_ptr+1&f.MAX_HEADER_BUF-1}function x(t,e,s){c(s<n-2);while(s>0){var i;0==y&&(y=8,b++,c(b<Lame.LAME_MAXMP3BUFFER),c(t.header[t.w_ptr].write_timing>=v),t.header[t.w_ptr].write_timing==v&&w(t),g[b]=0),i=Math.min(s,y),s-=i,y-=i,c(s<n),c(y<n),g[b]|=e>>s<<y,v+=i}}function T(t,e,s){c(s<n-2);while(s>0){var i;0==y&&(y=8,b++,c(b<Lame.LAME_MAXMP3BUFFER),g[b]=0),i=Math.min(s,y),s-=i,y-=i,c(s<n),c(y<n),g[b]|=e>>s<<y,v+=i}}function S(t,e){var n,s=t.internal_flags;if(c(e>=0),e>=8&&(x(s,76,8),e-=8),e>=8&&(x(s,65,8),e-=8),e>=8&&(x(s,77,8),e-=8),e>=8&&(x(s,69,8),e-=8),e>=32){var i=d.getLameShortVersion();if(e>=32)for(n=0;n<i.length&&e>=8;++n)e-=8,x(s,i.charAt(n),8)}for(;e>=1;e-=1)x(s,s.ancillary_flag,1),s.ancillary_flag^=t.disable_reservoir?0:1;c(0==e)}function A(t,e,s){var i=t.header[t.h_ptr].ptr;while(s>0){var r=Math.min(s,8-(7&i));s-=r,c(s<n),t.header[t.h_ptr].buf[i>>3]|=e>>s<<8-(7&i)-r,i+=r}t.header[t.h_ptr].ptr=i}function k(t,n){t<<=8;for(var s=0;s<8;s++)t<<=1,n<<=1,0!=(65536&(n^t))&&(n^=e);return n}function M(t,e){var n,s,o,a=t.internal_flags;if(n=a.l3_side,a.header[a.h_ptr].ptr=0,r.fill(a.header[a.h_ptr].buf,0,a.sideinfo_len,0),t.out_samplerate<16e3?A(a,4094,12):A(a,4095,12),A(a,t.version,1),A(a,1,2),A(a,t.error_protection?0:1,1),A(a,a.bitrate_index,4),A(a,a.samplerate_index,2),A(a,a.padding,1),A(a,t.extension,1),A(a,t.mode.ordinal(),2),A(a,a.mode_ext,2),A(a,t.copyright,1),A(a,t.original,1),A(a,t.emphasis,2),t.error_protection&&A(a,0,16),1==t.version){for(c(n.main_data_begin>=0),A(a,n.main_data_begin,9),2==a.channels_out?A(a,n.private_bits,3):A(a,n.private_bits,5),o=0;o<a.channels_out;o++){var l;for(l=0;l<4;l++)A(a,n.scfsi[o][l],1)}for(s=0;s<2;s++)for(o=0;o<a.channels_out;o++){var u=n.tt[s][o];A(a,u.part2_3_length+u.part2_length,12),A(a,u.big_values/2,9),A(a,u.global_gain,8),A(a,u.scalefac_compress,4),u.block_type!=_.NORM_TYPE?(A(a,1,1),A(a,u.block_type,2),A(a,u.mixed_block_flag,1),14==u.table_select[0]&&(u.table_select[0]=16),A(a,u.table_select[0],5),14==u.table_select[1]&&(u.table_select[1]=16),A(a,u.table_select[1],5),A(a,u.subblock_gain[0],3),A(a,u.subblock_gain[1],3),A(a,u.subblock_gain[2],3)):(A(a,0,1),14==u.table_select[0]&&(u.table_select[0]=16),A(a,u.table_select[0],5),14==u.table_select[1]&&(u.table_select[1]=16),A(a,u.table_select[1],5),14==u.table_select[2]&&(u.table_select[2]=16),A(a,u.table_select[2],5),c(0<=u.region0_count&&u.region0_count<16),c(0<=u.region1_count&&u.region1_count<8),A(a,u.region0_count,4),A(a,u.region1_count,3)),A(a,u.preflag,1),A(a,u.scalefac_scale,1),A(a,u.count1table_select,1)}}else for(c(n.main_data_begin>=0),A(a,n.main_data_begin,8),A(a,n.private_bits,a.channels_out),s=0,o=0;o<a.channels_out;o++){u=n.tt[s][o];A(a,u.part2_3_length+u.part2_length,12),A(a,u.big_values/2,9),A(a,u.global_gain,8),A(a,u.scalefac_compress,9),u.block_type!=_.NORM_TYPE?(A(a,1,1),A(a,u.block_type,2),A(a,u.mixed_block_flag,1),14==u.table_select[0]&&(u.table_select[0]=16),A(a,u.table_select[0],5),14==u.table_select[1]&&(u.table_select[1]=16),A(a,u.table_select[1],5),A(a,u.subblock_gain[0],3),A(a,u.subblock_gain[1],3),A(a,u.subblock_gain[2],3)):(A(a,0,1),14==u.table_select[0]&&(u.table_select[0]=16),A(a,u.table_select[0],5),14==u.table_select[1]&&(u.table_select[1]=16),A(a,u.table_select[1],5),14==u.table_select[2]&&(u.table_select[2]=16),A(a,u.table_select[2],5),c(0<=u.region0_count&&u.region0_count<16),c(0<=u.region1_count&&u.region1_count<8),A(a,u.region0_count,4),A(a,u.region1_count,3)),A(a,u.scalefac_scale,1),A(a,u.count1table_select,1)}t.error_protection&&CRC_writeheader(a,a.header[a.h_ptr].buf);var h=a.h_ptr;c(a.header[h].ptr==8*a.sideinfo_len),a.h_ptr=h+1&f.MAX_HEADER_BUF-1,a.header[a.h_ptr].write_timing=a.header[h].write_timing+e,a.h_ptr==a.w_ptr&&i.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}function C(t,e){var n,s=h.ht[e.count1table_select+32],i=0,r=e.big_values,o=e.big_values;for(c(e.count1table_select<2),n=(e.count1-e.big_values)/4;n>0;--n){var a,l=0,u=0;a=e.l3_enc[r+0],0!=a&&(u+=8,e.xr[o+0]<0&&l++,c(a<=1)),a=e.l3_enc[r+1],0!=a&&(u+=4,l*=2,e.xr[o+1]<0&&l++,c(a<=1)),a=e.l3_enc[r+2],0!=a&&(u+=2,l*=2,e.xr[o+2]<0&&l++,c(a<=1)),a=e.l3_enc[r+3],0!=a&&(u++,l*=2,e.xr[o+3]<0&&l++,c(a<=1)),r+=4,o+=4,x(t,l+s.table[u],s.hlen[u]),i+=s.hlen[u]}return i}function R(t,e,s,i,r){var o=h.ht[e],a=0;if(c(e<32),0==e)return a;for(var l=s;l<i;l+=2){var u=0,_=0,f=o.xlen,p=o.xlen,d=0,m=r.l3_enc[l],g=r.l3_enc[l+1];if(0!=m&&(r.xr[l]<0&&d++,u--),e>15){if(m>14){var v=m-15;c(v<=o.linmax),d|=v<<1,_=f,m=15}if(g>14){var b=g-15;c(b<=o.linmax),d<<=f,d|=b,_+=f,g=15}p=16}0!=g&&(d<<=1,r.xr[l+1]<0&&d++,u--),c((m|g)<16),m=m*p+g,_-=u,u+=o.hlen[m],c(u<=n),c(_<=n),x(t,o.table[m],u),x(t,d,_),a+=u+_}return a}function E(t,e){var n=3*t.scalefac_band.s[3];n>e.big_values&&(n=e.big_values);var s=R(t,e.table_select[0],0,n,e);return s+=R(t,e.table_select[1],n,e.big_values,e),s}function O(t,e){var n,s,i,r;n=e.big_values,c(0<=n&&n<=576);var o=e.region0_count+1;return c(0<=o),c(o<t.scalefac_band.l.length),i=t.scalefac_band.l[o],o+=e.region1_count+1,c(0<=o),c(o<t.scalefac_band.l.length),r=t.scalefac_band.l[o],i>n&&(i=n),r>n&&(r=n),s=R(t,e.table_select[0],0,i,e),s+=R(t,e.table_select[1],i,r,e),s+=R(t,e.table_select[2],r,n,e),s}function B(t){var e,n,s,i,r=0,o=t.internal_flags,a=o.l3_side;if(1==t.version)for(e=0;e<2;e++)for(n=0;n<o.channels_out;n++){var l=a.tt[e][n],h=u.slen1_tab[l.scalefac_compress],f=u.slen2_tab[l.scalefac_compress];for(i=0,s=0;s<l.sfbdivide;s++)-1!=l.scalefac[s]&&(x(o,l.scalefac[s],h),i+=h);for(;s<l.sfbmax;s++)-1!=l.scalefac[s]&&(x(o,l.scalefac[s],f),i+=f);c(i==l.part2_length),l.block_type==_.SHORT_TYPE?i+=E(o,l):i+=O(o,l),i+=C(o,l),c(i==l.part2_3_length+l.part2_length),r+=i}else for(e=0,n=0;n<o.channels_out;n++){l=a.tt[e][n];var p,d,m=0;if(c(null!=l.sfb_partition_table),i=0,s=0,d=0,l.block_type==_.SHORT_TYPE){for(;d<4;d++){var g=l.sfb_partition_table[d]/3,v=l.slen[d];for(p=0;p<g;p++,s++)x(o,Math.max(l.scalefac[3*s+0],0),v),x(o,Math.max(l.scalefac[3*s+1],0),v),x(o,Math.max(l.scalefac[3*s+2],0),v),m+=3*v}i+=E(o,l)}else{for(;d<4;d++){g=l.sfb_partition_table[d],v=l.slen[d];for(p=0;p<g;p++,s++)x(o,Math.max(l.scalefac[s],0),v),m+=v}i+=O(o,l)}i+=C(o,l),c(i==l.part2_3_length),c(m==l.part2_length),r+=m+i}return r}function I(){this.total=0}function P(e,n){var s,r,o,a,l,c=e.internal_flags;return l=c.w_ptr,a=c.h_ptr-1,-1==a&&(a=f.MAX_HEADER_BUF-1),s=c.header[a].write_timing-v,n.total=s,s>=0&&(r=1+a-l,a<l&&(r=1+a-l+f.MAX_HEADER_BUF),s-=8*r*c.sideinfo_len),o=t.getframebits(e),s+=o,n.total+=o,n.total%8!=0?n.total=1+n.total/8:n.total=n.total/8,n.total+=b+1,s<0&&i.err.println("strange error flushing buffer ... \n"),s}this.getframebits=function(t){var e,n=t.internal_flags;e=0!=n.bitrate_index?h.bitrate_table[t.version][n.bitrate_index]:t.brate,c(8<=e&&e<=640);var s=0|72e3*(t.version+1)*e/t.out_samplerate+n.padding;return 8*s},this.CRC_writeheader=function(t,e){var n=65535;n=k(255&e[2],n),n=k(255&e[3],n);for(var s=6;s<t.sideinfo_len;s++)n=k(255&e[s],n);e[4]=byte(n>>8),e[5]=byte(255&n)},this.flush_bitstream=function(t){var e,n,i=t.internal_flags,r=i.h_ptr-1;if(-1==r&&(r=f.MAX_HEADER_BUF-1),e=i.l3_side,!((n=P(t,new I))<0)){if(S(t,n),c(i.header[r].write_timing+this.getframebits(t)==v),i.ResvSize=0,e.main_data_begin=0,i.findReplayGain){var o=s.GetTitleGain(i.rgdata);c(NEQ(o,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),i.RadioGain=0|Math.floor(10*o+.5)}i.findPeakSample&&(i.noclipGainChange=0|Math.ceil(20*Math.log10(i.PeakSample/32767)*10),i.noclipGainChange>0&&(EQ(t.scale,1)||EQ(t.scale,0))?i.noclipScale=Math.floor(32767/i.PeakSample*100)/100:i.noclipScale=-1)}},this.add_dummy_byte=function(t,e,n){var s,i=t.internal_flags;while(n-- >0)for(T(i,e,8),s=0;s<f.MAX_HEADER_BUF;++s)i.header[s].write_timing+=8},this.format_bitstream=function(t){var e,n=t.internal_flags;e=n.l3_side;var s=this.getframebits(t);S(t,e.resvDrain_pre),M(t,s);var r=8*n.sideinfo_len;if(r+=B(t),S(t,e.resvDrain_post),r+=e.resvDrain_post,e.main_data_begin+=(s-r)/8,P(t,new I)!=n.ResvSize&&i.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*e.main_data_begin!=n.ResvSize&&(i.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*e.main_data_begin,n.ResvSize,e.resvDrain_post,e.resvDrain_pre,8*n.sideinfo_len,r-e.resvDrain_post-8*n.sideinfo_len,r,r%8,s),i.err.println("This is a fatal error.  It has several possible causes:"),i.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),i.err.println(" 9%%  Your system is overclocked"),i.err.println(" 1%%  bug in LAME encoding library"),n.ResvSize=8*e.main_data_begin),c(v%8==0),v>1e9){var o;for(o=0;o<f.MAX_HEADER_BUF;++o)n.header[o].write_timing-=v;v=0}return 0},this.copy_buffer=function(t,e,n,r,o){var u=b+1;if(u<=0)return 0;if(0!=r&&u>r)return-1;if(i.arraycopy(g,0,e,n,u),b=-1,y=0,0!=o){var h=l(1);if(h[0]=t.nMusicCRC,m.updateMusicCRC(h,e,n,u),t.nMusicCRC=h[0],u>0&&(t.VBR_seek_table.nBytesWritten+=u),t.decode_on_the_fly){var _,f=a([2,1152]),d=u,v=-1;while(0!=v)if(v=p.hip_decode1_unclipped(t.hip,e,n,d,f[0],f[1]),d=0,-1==v&&(v=0),v>0){if(c(v<=1152),t.findPeakSample){for(_=0;_<v;_++)f[0][_]>t.PeakSample?t.PeakSample=f[0][_]:-f[0][_]>t.PeakSample&&(t.PeakSample=-f[0][_]);if(t.channels_out>1)for(_=0;_<v;_++)f[1][_]>t.PeakSample?t.PeakSample=f[1][_]:-f[1][_]>t.PeakSample&&(t.PeakSample=-f[1][_])}if(t.findReplayGain&&s.AnalyzeSamples(t.rgdata,f[0],0,f[1],0,v,t.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return u},this.init_bit_stream_w=function(t){g=o(Lame.LAME_MAXMP3BUFFER),t.h_ptr=t.w_ptr=0,t.header[t.h_ptr].write_timing=0,b=-1,y=0,v=0}}p.EQ=function(t,e){return Math.abs(t)>Math.abs(e)?Math.abs(t-e)<=1e-6*Math.abs(t):Math.abs(t-e)<=1e-6*Math.abs(e)},p.NEQ=function(t,e){return!p.EQ(t,e)},t.exports=p},9120:function(t,e,n){var s=n(1038),i=(s.System,s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays,s.new_array_n,s.new_byte,s.new_double,s.new_float),r=(s.new_float_n,s.new_int),o=(s.new_int_n,s.assert),a=n(3134),l=n(687),c=n(354),u=n(1998);function h(t){var e=t;this.quantize=e,this.iteration_loop=function(t,e,n,s){var h,_=t.internal_flags,f=i(c.SFBMAX),p=i(576),d=r(2),m=0,g=_.l3_side,v=new a(m);this.quantize.rv.ResvFrameBegin(t,v),m=v.bits;for(var b=0;b<_.mode_gr;b++){h=this.quantize.qupvt.on_pe(t,e,d,m,b,b),_.mode_ext==l.MPG_MD_MS_LR&&(this.quantize.ms_convert(_.l3_side,b),this.quantize.qupvt.reduce_side(d,n[b],m,h));for(var y=0;y<_.channels_out;y++){var w,x,T=g.tt[b][y];T.block_type!=l.SHORT_TYPE?(w=0,x=_.PSY.mask_adjust-w):(w=0,x=_.PSY.mask_adjust_short-w),_.masking_lower=Math.pow(10,.1*x),this.quantize.init_outer_loop(_,T),this.quantize.init_xrpow(_,T,p)&&(this.quantize.qupvt.calc_xmin(t,s[b][y],T,f),this.quantize.outer_loop(t,T,f,p,y,d[y])),this.quantize.iteration_finish_one(_,b,y),o(T.part2_3_length<=u.MAX_BITS_PER_CHANNEL),o(T.part2_3_length<=d[y])}}this.quantize.rv.ResvFrameEnd(_,m)}}t.exports=h},3449:function(t,e,n){var s=n(1038),i=s.new_float,r=s.new_int;s.assert;function o(){this.global_gain=0,this.sfb_count1=0,this.step=r(39),this.noise=i(39),this.noise_log=i(39)}t.exports=o},2711:function(t){function e(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}t.exports=e},687:function(t,e,n){var s=n(1038),i=s.System,r=s.VbrMode,o=(s.Float,s.ShortBlock,s.Util,s.Arrays,s.new_array_n),a=(s.new_byte,s.new_double,s.new_float),l=s.new_float_n,c=s.new_int,u=(s.new_int_n,s.assert);function h(){var t=n(2143),e=n(9584),s=h.FFTOFFSET,_=h.MPG_MD_MS_LR,f=null;this.psy=null;var p=null,d=null,m=null;this.setModules=function(t,e,n,s){f=t,this.psy=e,p=e,d=s,m=n};var g=new t;function v(t){var e,n;if(0!=t.ATH.useAdjust)if(n=t.loudness_sq[0][0],e=t.loudness_sq[1][0],2==t.channels_out?(n+=t.loudness_sq[0][1],e+=t.loudness_sq[1][1]):(n+=n,e+=e),2==t.mode_gr&&(n=Math.max(n,e)),n*=.5,n*=t.ATH.aaSensitivityP,n>.03125)t.ATH.adjust>=1?t.ATH.adjust=1:t.ATH.adjust<t.ATH.adjustLimit&&(t.ATH.adjust=t.ATH.adjustLimit),t.ATH.adjustLimit=1;else{var s=31.98*n+625e-6;t.ATH.adjust>=s?(t.ATH.adjust*=.075*s+.925,t.ATH.adjust<s&&(t.ATH.adjust=s)):t.ATH.adjustLimit>=s?t.ATH.adjust=s:t.ATH.adjust<t.ATH.adjustLimit&&(t.ATH.adjust=t.ATH.adjustLimit),t.ATH.adjustLimit=s}else t.ATH.adjust=1}function b(t){var e,n;for(u(0<=t.bitrate_index&&t.bitrate_index<16),u(0<=t.mode_ext&&t.mode_ext<4),t.bitrate_stereoMode_Hist[t.bitrate_index][4]++,t.bitrate_stereoMode_Hist[15][4]++,2==t.channels_out&&(t.bitrate_stereoMode_Hist[t.bitrate_index][t.mode_ext]++,t.bitrate_stereoMode_Hist[15][t.mode_ext]++),e=0;e<t.mode_gr;++e)for(n=0;n<t.channels_out;++n){var s=0|t.l3_side.tt[e][n].block_type;0!=t.l3_side.tt[e][n].mixed_block_flag&&(s=4),t.bitrate_blockType_Hist[t.bitrate_index][s]++,t.bitrate_blockType_Hist[t.bitrate_index][5]++,t.bitrate_blockType_Hist[15][s]++,t.bitrate_blockType_Hist[15][5]++}}function y(t,e){var n,s,i=t.internal_flags;if(0==i.lame_encode_frame_init){var r,o,l=a(2014),c=a(2014);for(i.lame_encode_frame_init=1,r=0,o=0;r<286+576*(1+i.mode_gr);++r)r<576*i.mode_gr?(l[r]=0,2==i.channels_out&&(c[r]=0)):(l[r]=e[0][o],2==i.channels_out&&(c[r]=e[1][o]),++o);for(s=0;s<i.mode_gr;s++)for(n=0;n<i.channels_out;n++)i.l3_side.tt[s][n].block_type=h.SHORT_TYPE;g.mdct_sub48(i,l,c),u(576>=h.FFTOFFSET),u(i.mf_size>=h.BLKSIZE+t.framesize-h.FFTOFFSET),u(i.mf_size>=512+t.framesize-32)}}this.lame_encode_mp3_frame=function(t,n,a,u,w,x){var T,S=o([2,2]);S[0][0]=new e,S[0][1]=new e,S[1][0]=new e,S[1][1]=new e;var A,k=o([2,2]);k[0][0]=new e,k[0][1]=new e,k[1][0]=new e,k[1][1]=new e;var M,C,R,E=[null,null],O=t.internal_flags,B=l([2,4]),I=[.5,.5],P=[[0,0],[0,0]],N=[[0,0],[0,0]];if(E[0]=n,E[1]=a,0==O.lame_encode_frame_init&&y(t,E),O.padding=0,(O.slot_lag-=O.frac_SpF)<0&&(O.slot_lag+=t.out_samplerate,O.padding=1),0!=O.psymodel){var V,D=[null,null],L=0,F=c(2);for(R=0;R<O.mode_gr;R++){for(C=0;C<O.channels_out;C++)D[C]=E[C],L=576+576*R-h.FFTOFFSET;if(V=t.VBR==r.vbr_mtrh||t.VBR==r.vbr_mt?p.L3psycho_anal_vbr(t,D,L,R,S,k,P[R],N[R],B[R],F):p.L3psycho_anal_ns(t,D,L,R,S,k,P[R],N[R],B[R],F),0!=V)return-4;for(t.mode==MPEGMode.JOINT_STEREO&&(I[R]=B[R][2]+B[R][3],I[R]>0&&(I[R]=B[R][3]/I[R])),C=0;C<O.channels_out;C++){var q=O.l3_side.tt[R][C];q.block_type=F[C],q.mixed_block_flag=0}}}else for(R=0;R<O.mode_gr;R++)for(C=0;C<O.channels_out;C++)O.l3_side.tt[R][C].block_type=h.NORM_TYPE,O.l3_side.tt[R][C].mixed_block_flag=0,N[R][C]=P[R][C]=700;if(v(O),g.mdct_sub48(O,E[0],E[1]),O.mode_ext=h.MPG_MD_LR_LR,t.force_ms)O.mode_ext=h.MPG_MD_MS_LR;else if(t.mode==MPEGMode.JOINT_STEREO){var j=0,H=0;for(R=0;R<O.mode_gr;R++)for(C=0;C<O.channels_out;C++)j+=N[R][C],H+=P[R][C];if(j<=1*H){var X=O.l3_side.tt[0],U=O.l3_side.tt[O.mode_gr-1];X[0].block_type==X[1].block_type&&U[0].block_type==U[1].block_type&&(O.mode_ext=h.MPG_MD_MS_LR)}}if(O.mode_ext==_?(A=k,M=N):(A=S,M=P),t.analysis&&null!=O.pinfo)for(R=0;R<O.mode_gr;R++)for(C=0;C<O.channels_out;C++)O.pinfo.ms_ratio[R]=O.ms_ratio[R],O.pinfo.ms_ener_ratio[R]=I[R],O.pinfo.blocktype[R][C]=O.l3_side.tt[R][C].block_type,O.pinfo.pe[R][C]=M[R][C],i.arraycopy(O.l3_side.tt[R][C].xr,0,O.pinfo.xr[R][C],0,576),O.mode_ext==_&&(O.pinfo.ers[R][C]=O.pinfo.ers[R][C+2],i.arraycopy(O.pinfo.energy[R][C+2],0,O.pinfo.energy[R][C],0,O.pinfo.energy[R][C].length));if(t.VBR==r.vbr_off||t.VBR==r.vbr_abr){var Y,W;for(Y=0;Y<18;Y++)O.nsPsy.pefirbuf[Y]=O.nsPsy.pefirbuf[Y+1];for(W=0,R=0;R<O.mode_gr;R++)for(C=0;C<O.channels_out;C++)W+=M[R][C];for(O.nsPsy.pefirbuf[18]=W,W=O.nsPsy.pefirbuf[9],Y=0;Y<9;Y++)W+=(O.nsPsy.pefirbuf[Y]+O.nsPsy.pefirbuf[18-Y])*h.fircoef[Y];for(W=3350*O.mode_gr*O.channels_out/W,R=0;R<O.mode_gr;R++)for(C=0;C<O.channels_out;C++)M[R][C]*=W}if(O.iteration_loop.iteration_loop(t,M,I,A),f.format_bitstream(t),T=f.copy_buffer(O,u,w,x,1),t.bWriteVbrTag&&d.addVbrFrame(t),t.analysis&&null!=O.pinfo){for(C=0;C<O.channels_out;C++){var G;for(G=0;G<s;G++)O.pinfo.pcmdata[C][G]=O.pinfo.pcmdata[C][G+t.framesize];for(G=s;G<1600;G++)O.pinfo.pcmdata[C][G]=E[C][G-s]}m.set_frame_pinfo(t,A)}return b(O),T}}h.ENCDELAY=576,h.POSTDELAY=1152,h.MDCTDELAY=48,h.FFTOFFSET=224+h.MDCTDELAY,h.DECDELAY=528,h.SBLIMIT=32,h.CBANDS=64,h.SBPSY_l=21,h.SBPSY_s=12,h.SBMAX_l=22,h.SBMAX_s=13,h.PSFB21=6,h.PSFB12=6,h.BLKSIZE=1024,h.HBLKSIZE=h.BLKSIZE/2+1,h.BLKSIZE_s=256,h.HBLKSIZE_s=h.BLKSIZE_s/2+1,h.NORM_TYPE=0,h.START_TYPE=1,h.SHORT_TYPE=2,h.STOP_TYPE=3,h.MPG_MD_LR_LR=0,h.MPG_MD_LR_I=1,h.MPG_MD_MS_LR=2,h.MPG_MD_MS_I=3,h.fircoef=[-.1039435,-.1892065,5*-.0432472,-.155915,3898045e-23,.0467745*5,.50455,.756825,.187098*5],t.exports=h},9347:function(t,e,n){var s=n(1038),i=(s.System,s.VbrMode,s.Float,s.ShortBlock,s.Util),r=(s.Arrays,s.new_array_n,s.new_byte,s.new_double,s.new_float),o=(s.new_float_n,s.new_int,s.new_int_n,s.assert,n(687));function a(){var t=r(o.BLKSIZE),e=r(o.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function s(t,e,s){var r,o,a,l=0;s<<=1;var c=e+s;r=4;do{var u,h,_,f,p,d,m;m=r>>1,f=r,p=r<<1,d=p+f,r=p<<1,o=e,a=o+m;do{T=t[o+0]-t[o+f],x=t[o+0]+t[o+f],M=t[o+p]-t[o+d],A=t[o+p]+t[o+d],t[o+p]=x-A,t[o+0]=x+A,t[o+d]=T-M,t[o+f]=T+M,T=t[a+0]-t[a+f],x=t[a+0]+t[a+f],M=i.SQRT2*t[a+d],A=i.SQRT2*t[a+p],t[a+p]=x-A,t[a+0]=x+A,t[a+d]=T-M,t[a+f]=T+M,a+=r,o+=r}while(o<c);for(h=n[l+0],u=n[l+1],_=1;_<m;_++){var g,v;g=1-2*u*u,v=2*u*h,o=e+_,a=e+f-_;do{var b,y,w,x,T,S,A,k,M,C;y=v*t[o+f]-g*t[a+f],b=g*t[o+f]+v*t[a+f],T=t[o+0]-b,x=t[o+0]+b,S=t[a+0]-y,w=t[a+0]+y,y=v*t[o+d]-g*t[a+d],b=g*t[o+d]+v*t[a+d],M=t[o+p]-b,A=t[o+p]+b,C=t[a+p]-y,k=t[a+p]+y,y=u*A-h*C,b=h*A+u*C,t[o+p]=x-b,t[o+0]=x+b,t[a+d]=S-y,t[a+f]=S+y,y=h*k-u*M,b=u*k+h*M,t[a+p]=w-b,t[a+0]=w+b,t[o+d]=T-y,t[o+f]=T+y,a+=r,o+=r}while(o<c);g=h,h=g*n[l+0]-u*n[l+1],u=g*n[l+1]+u*n[l+0]}l+=2}while(r<s)}var a=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(t,n,i,r,l){for(var c=0;c<3;c++){var u=o.BLKSIZE_s/2,h=65535&192*(c+1),_=o.BLKSIZE_s/8-1;do{var f,p,d,m,g,v=255&a[_<<2];f=e[v]*r[i][l+v+h],g=e[127-v]*r[i][l+v+h+128],p=f-g,f+=g,d=e[v+64]*r[i][l+v+h+64],g=e[63-v]*r[i][l+v+h+192],m=d-g,d+=g,u-=4,n[c][u+0]=f+d,n[c][u+2]=f-d,n[c][u+1]=p+m,n[c][u+3]=p-m,f=e[v+1]*r[i][l+v+h+1],g=e[126-v]*r[i][l+v+h+129],p=f-g,f+=g,d=e[v+65]*r[i][l+v+h+65],g=e[62-v]*r[i][l+v+h+193],m=d-g,d+=g,n[c][u+o.BLKSIZE_s/2+0]=f+d,n[c][u+o.BLKSIZE_s/2+2]=f-d,n[c][u+o.BLKSIZE_s/2+1]=p+m,n[c][u+o.BLKSIZE_s/2+3]=p-m}while(--_>=0);s(n[c],u,o.BLKSIZE_s/2)}},this.fft_long=function(e,n,i,r,l){var c=o.BLKSIZE/8-1,u=o.BLKSIZE/2;do{var h,_,f,p,d,m=255&a[c];h=t[m]*r[i][l+m],d=t[m+512]*r[i][l+m+512],_=h-d,h+=d,f=t[m+256]*r[i][l+m+256],d=t[m+768]*r[i][l+m+768],p=f-d,f+=d,u-=4,n[u+0]=h+f,n[u+2]=h-f,n[u+1]=_+p,n[u+3]=_-p,h=t[m+1]*r[i][l+m+1],d=t[m+513]*r[i][l+m+513],_=h-d,h+=d,f=t[m+257]*r[i][l+m+257],d=t[m+769]*r[i][l+m+769],p=f-d,f+=d,n[u+o.BLKSIZE/2+0]=h+f,n[u+o.BLKSIZE/2+2]=h-f,n[u+o.BLKSIZE/2+1]=_+p,n[u+o.BLKSIZE/2+3]=_-p}while(--c>=0);s(n,u,o.BLKSIZE/2)},this.init_fft=function(n){for(var s=0;s<o.BLKSIZE;s++)t[s]=.42-.5*Math.cos(2*Math.PI*(s+.5)/o.BLKSIZE)+.08*Math.cos(4*Math.PI*(s+.5)/o.BLKSIZE);for(s=0;s<o.BLKSIZE_s/2;s++)e[s]=.5*(1-Math.cos(2*Math.PI*(s+.5)/o.BLKSIZE_s))}}t.exports=a},1287:function(t,e,n){var s=n(1038),i=s.System,r=(s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays);s.new_array_n,s.new_byte,s.new_double,s.new_float,s.new_float_n,s.new_int,s.new_int_n,s.assert;function o(){var t=64.82,e=(o.YULE_ORDER,.95),n=(o.MAX_SAMP_FREQ,o.RMS_WINDOW_TIME_NUMERATOR),s=o.RMS_WINDOW_TIME_DENOMINATOR,a=(o.MAX_SAMPLES_PER_WINDOW,[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]]),l=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function c(t,e,n,s,i,r){while(0!=i--)n[s]=1e-10+t[e+0]*r[0]-n[s-1]*r[1]+t[e-1]*r[2]-n[s-2]*r[3]+t[e-2]*r[4]-n[s-3]*r[5]+t[e-3]*r[6]-n[s-4]*r[7]+t[e-4]*r[8]-n[s-5]*r[9]+t[e-5]*r[10]-n[s-6]*r[11]+t[e-6]*r[12]-n[s-7]*r[13]+t[e-7]*r[14]-n[s-8]*r[15]+t[e-8]*r[16]-n[s-9]*r[17]+t[e-9]*r[18]-n[s-10]*r[19]+t[e-10]*r[20],++s,++e}function u(t,e,n,s,i,r){while(0!=i--)n[s]=t[e+0]*r[0]-n[s-1]*r[1]+t[e-1]*r[2]-n[s-2]*r[3]+t[e-2]*r[4],++s,++e}function h(t,e){for(var i=0;i<MAX_ORDER;i++)t.linprebuf[i]=t.lstepbuf[i]=t.loutbuf[i]=t.rinprebuf[i]=t.rstepbuf[i]=t.routbuf[i]=0;switch(0|e){case 48e3:t.reqindex=0;break;case 44100:t.reqindex=1;break;case 32e3:t.reqindex=2;break;case 24e3:t.reqindex=3;break;case 22050:t.reqindex=4;break;case 16e3:t.reqindex=5;break;case 12e3:t.reqindex=6;break;case 11025:t.reqindex=7;break;case 8e3:t.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return t.sampleWindow=0|(e*n+s-1)/s,t.lsum=0,t.rsum=0,t.totsamp=0,r.ill(t.A,0),INIT_GAIN_ANALYSIS_OK}function _(t){return t*t}function f(n,s){var i,r=0;for(i=0;i<s;i++)r+=n[i];if(0==r)return GAIN_NOT_ENOUGH_SAMPLES;var a=0|Math.ceil(r*(1-e));for(i=s;i-- >0;)if((a-=n[i])<=0)break;return t-i/o.STEPS_per_dB}this.InitGainAnalysis=function(t,e){return h(t,e)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(t.linpre=MAX_ORDER,t.rinpre=MAX_ORDER,t.lstep=MAX_ORDER,t.rstep=MAX_ORDER,t.lout=MAX_ORDER,t.rout=MAX_ORDER,r.fill(t.B,0),INIT_GAIN_ANALYSIS_OK)},this.AnalyzeSamples=function(t,e,n,s,r,h,f){var p,d,m,g,v,b,y;if(0==h)return GAIN_ANALYSIS_OK;switch(y=0,v=h,f){case 1:s=e,r=n;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}h<MAX_ORDER?(i.arraycopy(e,n,t.linprebuf,MAX_ORDER,h),i.arraycopy(s,r,t.rinprebuf,MAX_ORDER,h)):(i.arraycopy(e,n,t.linprebuf,MAX_ORDER,MAX_ORDER),i.arraycopy(s,r,t.rinprebuf,MAX_ORDER,MAX_ORDER));while(v>0){b=v>t.sampleWindow-t.totsamp?t.sampleWindow-t.totsamp:v,y<MAX_ORDER?(p=t.linpre+y,d=t.linprebuf,m=t.rinpre+y,g=t.rinprebuf,b>MAX_ORDER-y&&(b=MAX_ORDER-y)):(p=n+y,d=e,m=r+y,g=s),c(d,p,t.lstepbuf,t.lstep+t.totsamp,b,a[t.reqindex]),c(g,m,t.rstepbuf,t.rstep+t.totsamp,b,a[t.reqindex]),u(t.lstepbuf,t.lstep+t.totsamp,t.loutbuf,t.lout+t.totsamp,b,l[t.reqindex]),u(t.rstepbuf,t.rstep+t.totsamp,t.routbuf,t.rout+t.totsamp,b,l[t.reqindex]),p=t.lout+t.totsamp,d=t.loutbuf,m=t.rout+t.totsamp,g=t.routbuf;var w=b%8;while(0!=w--)t.lsum+=_(d[p++]),t.rsum+=_(g[m++]);w=b/8;while(0!=w--)t.lsum+=_(d[p+0])+_(d[p+1])+_(d[p+2])+_(d[p+3])+_(d[p+4])+_(d[p+5])+_(d[p+6])+_(d[p+7]),p+=8,t.rsum+=_(g[m+0])+_(g[m+1])+_(g[m+2])+_(g[m+3])+_(g[m+4])+_(g[m+5])+_(g[m+6])+_(g[m+7]),m+=8;if(v-=b,y+=b,t.totsamp+=b,t.totsamp==t.sampleWindow){var x=10*o.STEPS_per_dB*Math.log10((t.lsum+t.rsum)/t.totsamp*.5+1e-37),T=x<=0?0:0|x;T>=t.A.length&&(T=t.A.length-1),t.A[T]++,t.lsum=t.rsum=0,i.arraycopy(t.loutbuf,t.totsamp,t.loutbuf,0,MAX_ORDER),i.arraycopy(t.routbuf,t.totsamp,t.routbuf,0,MAX_ORDER),i.arraycopy(t.lstepbuf,t.totsamp,t.lstepbuf,0,MAX_ORDER),i.arraycopy(t.rstepbuf,t.totsamp,t.rstepbuf,0,MAX_ORDER),t.totsamp=0}if(t.totsamp>t.sampleWindow)return GAIN_ANALYSIS_ERROR}return h<MAX_ORDER?(i.arraycopy(t.linprebuf,h,t.linprebuf,0,MAX_ORDER-h),i.arraycopy(t.rinprebuf,h,t.rinprebuf,0,MAX_ORDER-h),i.arraycopy(e,n,t.linprebuf,MAX_ORDER-h,h),i.arraycopy(s,r,t.rinprebuf,MAX_ORDER-h,h)):(i.arraycopy(e,n+h-MAX_ORDER,t.linprebuf,0,MAX_ORDER),i.arraycopy(s,r+h-MAX_ORDER,t.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK},this.GetTitleGain=function(t){for(var e=f(t.A,t.A.length),n=0;n<t.A.length;n++)t.B[n]+=t.A[n],t.A[n]=0;for(n=0;n<MAX_ORDER;n++)t.linprebuf[n]=t.lstepbuf[n]=t.loutbuf[n]=t.rinprebuf[n]=t.rstepbuf[n]=t.routbuf[n]=0;return t.totsamp=0,t.lsum=t.rsum=0,e}}o.STEPS_per_dB=100,o.MAX_dB=120,o.GAIN_NOT_ENOUGH_SAMPLES=-24601,o.GAIN_ANALYSIS_ERROR=0,o.GAIN_ANALYSIS_OK=1,o.INIT_GAIN_ANALYSIS_ERROR=0,o.INIT_GAIN_ANALYSIS_OK=1,o.YULE_ORDER=10,o.MAX_ORDER=o.YULE_ORDER,o.MAX_SAMP_FREQ=48e3,o.RMS_WINDOW_TIME_NUMERATOR=1,o.RMS_WINDOW_TIME_DENOMINATOR=20,o.MAX_SAMPLES_PER_WINDOW=o.MAX_SAMP_FREQ*o.RMS_WINDOW_TIME_NUMERATOR/o.RMS_WINDOW_TIME_DENOMINATOR+1,t.exports=o},9438:function(t,e,n){var s=n(1038),i=(s.System,s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays,s.new_array_n,s.new_byte,s.new_double,s.new_float),r=(s.new_float_n,s.new_int),o=(s.new_int_n,s.assert,n(354));function a(){this.xr=i(576),this.l3_enc=r(576),this.scalefac=r(o.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=r(3),this.subblock_gain=r(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=r(o.SFBMAX),this.window=r(o.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=r(4),this.max_nonzero_coeff=0;var t=this;function e(t){return new Int32Array(t)}function n(t){return new Float32Array(t)}this.assign=function(s){t.xr=n(s.xr),t.l3_enc=e(s.l3_enc),t.scalefac=e(s.scalefac),t.xrpow_max=s.xrpow_max,t.part2_3_length=s.part2_3_length,t.big_values=s.big_values,t.count1=s.count1,t.global_gain=s.global_gain,t.scalefac_compress=s.scalefac_compress,t.block_type=s.block_type,t.mixed_block_flag=s.mixed_block_flag,t.table_select=e(s.table_select),t.subblock_gain=e(s.subblock_gain),t.region0_count=s.region0_count,t.region1_count=s.region1_count,t.preflag=s.preflag,t.scalefac_scale=s.scalefac_scale,t.count1table_select=s.count1table_select,t.part2_length=s.part2_length,t.sfb_lmax=s.sfb_lmax,t.sfb_smin=s.sfb_smin,t.psy_lmax=s.psy_lmax,t.sfbmax=s.sfbmax,t.psymax=s.psymax,t.sfbdivide=s.sfbdivide,t.width=e(s.width),t.window=e(s.window),t.count1bits=s.count1bits,t.sfb_partition_table=s.sfb_partition_table.slice(0),t.slen=e(s.slen),t.max_nonzero_coeff=s.max_nonzero_coeff}}t.exports=a},9524:function(t,e,n){var s=n(1038),i=(s.System,s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays,s.new_array_n,s.new_byte,s.new_double,s.new_float,s.new_float_n,s.new_int),r=(s.new_int_n,s.assert,n(9438));function o(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[i(4),i(4)];for(var t=0;t<2;t++)for(var e=0;e<2;e++)this.tt[t][e]=new r}t.exports=o},9584:function(t,e,n){var s=n(8200);function i(){this.thm=new s,this.en=new s}t.exports=i},8200:function(t,e,n){var s=n(687),i=n(1038),r=i.System,o=(i.VbrMode,i.Float,i.ShortBlock,i.Util,i.Arrays,i.new_array_n,i.new_byte,i.new_double,i.new_float),a=i.new_float_n;i.new_int,i.new_int_n,i.assert;function l(){this.l=o(s.SBMAX_l),this.s=a([s.SBMAX_s,3]);var t=this;this.assign=function(e){r.arraycopy(e.l,0,t.l,0,s.SBMAX_l);for(var n=0;n<s.SBMAX_s;n++)for(var i=0;i<3;i++)t.s[n][i]=e.s[n][i]}}t.exports=l},354:function(t,e,n){var s=n(687),i={};i.SFBMAX=3*s.SBMAX_s,t.exports=i},4566:function(t,e,n){var s=n(1038),i=s.System,r=s.VbrMode,o=(s.Float,s.ShortBlock),a=(s.Util,s.Arrays,s.new_array_n,s.new_byte,s.new_double,s.new_float),l=(s.new_float_n,s.new_int,s.new_int_n),c=s.new_short_n,u=s.assert,h=n(9319),_=n(3893),f=n(1998),p=n(7514),d=n(1062),m=n(9120),g=n(3724),v=n(7721),b=n(687);function y(){var t=this,e=131072;y.V9=410,y.V8=420,y.V7=430,y.V6=440,y.V5=450,y.V4=460,y.V3=470,y.V2=480,y.V1=490,y.V0=500,y.R3MIX=1e3,y.STANDARD=1001,y.EXTREME=1002,y.INSANE=1003,y.STANDARD_FAST=1004,y.EXTREME_FAST=1005,y.MEDIUM=1006,y.MEDIUM_FAST=1007;var n,s,w,x,T,S=16384+e;y.LAME_MAXMP3BUFFER=S;var A,k,M,C=new h;function R(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=a(b.SBMAX_l),this.bo_s_weight=a(b.SBMAX_s)}function E(){this.lowerlimit=0}function O(t,e){this.lowpass=e}this.enc=new b,this.setModules=function(t,e,i,r,o,a,l,c,u){n=t,s=e,w=i,x=r,T=o,A=a,l,k=c,M=u,this.enc.setModules(s,C,x,A)};var B=4294479419;function I(t){var e;return t.class_id=B,e=t.internal_flags=new f,t.mode=MPEGMode.NOT_SET,t.original=1,t.in_samplerate=44100,t.num_channels=2,t.num_samples=-1,t.bWriteVbrTag=!0,t.quality=-1,t.short_blocks=null,e.subblock_gain=-1,t.lowpassfreq=0,t.highpassfreq=0,t.lowpasswidth=-1,t.highpasswidth=-1,t.VBR=r.vbr_off,t.VBR_q=4,t.ATHcurve=-1,t.VBR_mean_bitrate_kbps=128,t.VBR_min_bitrate_kbps=0,t.VBR_max_bitrate_kbps=0,t.VBR_hard_min=0,e.VBR_min_bitrate=1,e.VBR_max_bitrate=13,t.quant_comp=-1,t.quant_comp_short=-1,t.msfix=-1,e.resample_ratio=1,e.OldValue[0]=180,e.OldValue[1]=180,e.CurrentStep[0]=4,e.CurrentStep[1]=4,e.masking_lower=1,e.nsPsy.attackthre=-1,e.nsPsy.attackthre_s=-1,t.scale=-1,t.athaa_type=-1,t.ATHtype=-1,t.athaa_loudapprox=-1,t.athaa_sensitivity=0,t.useTemporal=null,t.interChRatio=-1,e.mf_samples_to_encode=b.ENCDELAY+b.POSTDELAY,t.encoder_padding=0,e.mf_size=b.ENCDELAY-b.MDCTDELAY,t.findReplayGain=!1,t.decode_on_the_fly=!1,e.decode_on_the_fly=!1,e.findReplayGain=!1,e.findPeakSample=!1,e.RadioGain=0,e.AudiophileGain=0,e.noclipGainChange=0,e.noclipScale=-1,t.preset=0,t.write_id3tag_automatic=!0,0}function P(t){return t>1?0:t<=0?1:Math.cos(Math.PI/2*t)}function N(t,e){var n=44100;return e>=48e3?n=48e3:e>=44100?n=44100:e>=32e3?n=32e3:e>=24e3?n=24e3:e>=22050?n=22050:e>=16e3?n=16e3:e>=12e3?n=12e3:e>=11025?n=11025:e>=8e3&&(n=8e3),-1==t?n:(t<=15960&&(n=44100),t<=15250&&(n=32e3),t<=11220&&(n=24e3),t<=9970&&(n=22050),t<=7230&&(n=16e3),t<=5420&&(n=12e3),t<=4510&&(n=11025),t<=3970&&(n=8e3),e<n?e>44100?48e3:e>32e3?44100:e>24e3?32e3:e>22050?24e3:e>16e3?22050:e>12e3?16e3:e>11025?12e3:e>8e3?11025:8e3:n)}function V(t,e){switch(t){case 44100:return e.version=1,0;case 48e3:return e.version=1,1;case 32e3:return e.version=1,2;case 22050:return e.version=0,0;case 24e3:return e.version=0,1;case 16e3:return e.version=0,2;case 11025:return e.version=0,0;case 12e3:return e.version=0,1;case 8e3:return e.version=0,2;default:return e.version=0,-1}}function D(t,e,n){n<16e3&&(e=2);for(var s=v.bitrate_table[e][1],i=2;i<=14;i++)v.bitrate_table[e][i]>0&&Math.abs(v.bitrate_table[e][i]-t)<Math.abs(s-t)&&(s=v.bitrate_table[e][i]);return s}function L(t,e,n){n<16e3&&(e=2);for(var s=0;s<=14;s++)if(v.bitrate_table[e][s]>0&&v.bitrate_table[e][s]==t)return s;return-1}function F(e,n){var s=[new O(8,2e3),new O(16,3700),new O(24,3900),new O(32,5500),new O(40,7e3),new O(48,7500),new O(56,1e4),new O(64,11e3),new O(80,13500),new O(96,15100),new O(112,15600),new O(128,17e3),new O(160,17500),new O(192,18600),new O(224,19400),new O(256,19700),new O(320,20500)],i=t.nearestBitrateFullIndex(n);e.lowerlimit=s[i].lowpass}function q(t){var e=t.internal_flags,n=32,s=-1;if(e.lowpass1>0){for(var r=999,o=0;o<=31;o++){var a=o/31;a>=e.lowpass2&&(n=Math.min(n,o)),e.lowpass1<a&&a<e.lowpass2&&(r=Math.min(r,o))}e.lowpass1=999==r?(n-.75)/31:(r-.75)/31,e.lowpass2=n/31}if(e.highpass2>0&&e.highpass2<.75/31*.9&&(e.highpass1=0,e.highpass2=0,i.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),e.highpass2>0){var l=-1;for(o=0;o<=31;o++){a=o/31;a<=e.highpass1&&(s=Math.max(s,o)),e.highpass1<a&&a<e.highpass2&&(l=Math.max(l,o))}e.highpass1=s/31,e.highpass2=-1==l?(s+.75)/31:(l+.75)/31}for(o=0;o<32;o++){var c,u;a=o/31;c=e.highpass2>e.highpass1?P((e.highpass2-a)/(e.highpass2-e.highpass1+1e-20)):1,u=e.lowpass2>e.lowpass1?P((a-e.lowpass1)/(e.lowpass2-e.lowpass1+1e-20)):1,e.amp_filter[o]=c*u}}function j(t){var e=t.internal_flags;switch(t.quality){default:case 9:e.psymodel=0,e.noise_shaping=0,e.noise_shaping_amp=0,e.noise_shaping_stop=0,e.use_best_huffman=0,e.full_outer_loop=0;break;case 8:t.quality=7;case 7:e.psymodel=1,e.noise_shaping=0,e.noise_shaping_amp=0,e.noise_shaping_stop=0,e.use_best_huffman=0,e.full_outer_loop=0;break;case 6:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),e.noise_shaping_amp=0,e.noise_shaping_stop=0,-1==e.subblock_gain&&(e.subblock_gain=1),e.use_best_huffman=0,e.full_outer_loop=0;break;case 5:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),e.noise_shaping_amp=0,e.noise_shaping_stop=0,-1==e.subblock_gain&&(e.subblock_gain=1),e.use_best_huffman=0,e.full_outer_loop=0;break;case 4:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),e.noise_shaping_amp=0,e.noise_shaping_stop=0,-1==e.subblock_gain&&(e.subblock_gain=1),e.use_best_huffman=1,e.full_outer_loop=0;break;case 3:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),e.noise_shaping_amp=1,e.noise_shaping_stop=1,-1==e.subblock_gain&&(e.subblock_gain=1),e.use_best_huffman=1,e.full_outer_loop=0;break;case 2:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),0==e.substep_shaping&&(e.substep_shaping=2),e.noise_shaping_amp=1,e.noise_shaping_stop=1,-1==e.subblock_gain&&(e.subblock_gain=1),e.use_best_huffman=1,e.full_outer_loop=0;break;case 1:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),0==e.substep_shaping&&(e.substep_shaping=2),e.noise_shaping_amp=2,e.noise_shaping_stop=1,-1==e.subblock_gain&&(e.subblock_gain=1),e.use_best_huffman=1,e.full_outer_loop=0;break;case 0:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),0==e.substep_shaping&&(e.substep_shaping=2),e.noise_shaping_amp=2,e.noise_shaping_stop=1,-1==e.subblock_gain&&(e.subblock_gain=1),e.use_best_huffman=1,e.full_outer_loop=0;break}}function H(t){var e=t.internal_flags;t.frameNum=0,t.write_id3tag_automatic&&k.id3tag_write_v2(t),e.bitrate_stereoMode_Hist=l([16,5]),e.bitrate_blockType_Hist=l([16,6]),e.PeakSample=0,t.bWriteVbrTag&&A.InitVbrTag(t)}function X(t,e){(null==t.in_buffer_0||t.in_buffer_nsamples<e)&&(t.in_buffer_0=a(e),t.in_buffer_1=a(e),t.in_buffer_nsamples=e)}function U(t){var e=b.BLKSIZE+t.framesize-b.FFTOFFSET;return e=Math.max(e,512+t.framesize-32),u(f.MFSIZE>=e),e}function Y(t,e,i,r,o,a,l){var c,h,_,p,d,m=t.internal_flags,v=0,y=[null,null],w=[null,null];if(m.Class_ID!=B)return-3;if(0==r)return 0;if(d=s.copy_buffer(m,o,a,l,0),d<0)return d;if(a+=d,v+=d,w[0]=e,w[1]=i,g.NEQ(t.scale,0)&&g.NEQ(t.scale,1))for(h=0;h<r;++h)w[0][h]*=t.scale,2==m.channels_out&&(w[1][h]*=t.scale);if(g.NEQ(t.scale_left,0)&&g.NEQ(t.scale_left,1))for(h=0;h<r;++h)w[0][h]*=t.scale_left;if(g.NEQ(t.scale_right,0)&&g.NEQ(t.scale_right,1))for(h=0;h<r;++h)w[1][h]*=t.scale_right;if(2==t.num_channels&&1==m.channels_out)for(h=0;h<r;++h)w[0][h]=.5*(w[0][h]+w[1][h]),w[1][h]=0;p=U(t),y[0]=m.mfbuf[0],y[1]=m.mfbuf[1];var x=0;while(r>0){var T=[null,null],S=0,A=0;T[0]=w[0],T[1]=w[1];var k=new G;if($(t,y,T,x,r,k),S=k.n_in,A=k.n_out,m.findReplayGain&&!m.decode_on_the_fly&&n.AnalyzeSamples(m.rgdata,y[0],m.mf_size,y[1],m.mf_size,A,m.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(r-=S,x+=S,m.channels_out,m.mf_size+=A,u(m.mf_size<=f.MFSIZE),m.mf_samples_to_encode<1&&(m.mf_samples_to_encode=b.ENCDELAY+b.POSTDELAY),m.mf_samples_to_encode+=A,m.mf_size>=p){var M=l-v;if(0==l&&(M=0),c=W(t,y[0],y[1],o,a,M),c<0)return c;for(a+=c,v+=c,m.mf_size-=t.framesize,m.mf_samples_to_encode-=t.framesize,_=0;_<m.channels_out;_++)for(h=0;h<m.mf_size;h++)y[_][h]=y[_][h+t.framesize]}}return u(0==r),v}function W(e,n,s,i,r,o){var a=t.enc.lame_encode_mp3_frame(e,n,s,i,r,o);return e.frameNum++,a}function G(){this.n_in=0,this.n_out=0}function z(){this.num_used=0}function Z(t,e){return 0!=e?Z(e,t%e):t}function K(t,e,n){var s=Math.PI*e;t/=n,t<0&&(t=0),t>1&&(t=1);var i=t-.5,r=.42-.5*Math.cos(2*t*Math.PI)+.08*Math.cos(4*t*Math.PI);return Math.abs(i)<1e-9?s/Math.PI:r*Math.sin(n*s*i)/(Math.PI*n*i)}function Q(t,e,n,s,i,r,o,l,c){var h,_,p=t.internal_flags,d=0,m=t.out_samplerate/Z(t.out_samplerate,t.in_samplerate);m>f.BPC&&(m=f.BPC);var g=Math.abs(p.resample_ratio-Math.floor(.5+p.resample_ratio))<1e-4?1:0,v=1/p.resample_ratio;v>1&&(v=1);var b=31;0==b%2&&--b,b+=g;var y=b+1;if(0==p.fill_buffer_resample_init){for(p.inbuf_old[0]=a(y),p.inbuf_old[1]=a(y),h=0;h<=2*m;++h)p.blackfilt[h]=a(y);for(p.itime[0]=0,p.itime[1]=0,d=0;d<=2*m;d++){var w=0,x=(d-m)/(2*m);for(h=0;h<=b;h++)w+=p.blackfilt[d][h]=K(h-x,v,b);for(h=0;h<=b;h++)p.blackfilt[d][h]/=w}p.fill_buffer_resample_init=1}var T=p.inbuf_old[c];for(_=0;_<s;_++){var S,A;if(S=_*p.resample_ratio,d=0|Math.floor(S-p.itime[c]),b+d-b/2>=o)break;x=S-p.itime[c]-(d+b%2*.5);u(Math.abs(x)<=.501),A=0|Math.floor(2*x*m+m+.5);var k=0;for(h=0;h<=b;++h){var M,C=h+d-b/2;u(C<o),u(C+y>=0),M=C<0?T[y+C]:i[r+C],k+=M*p.blackfilt[A][h]}e[n+_]=k}if(l.num_used=Math.min(o,b+d-b/2),p.itime[c]+=l.num_used-_*p.resample_ratio,l.num_used>=y)for(h=0;h<y;h++)T[h]=i[r+l.num_used+h-y];else{var R=y-l.num_used;for(h=0;h<R;++h)T[h]=T[h+l.num_used];for(d=0;h<y;++h,++d)T[h]=i[r+d];u(d==l.num_used)}return _}function $(t,e,n,s,i,r){var o=t.internal_flags;if(o.resample_ratio<.9999||o.resample_ratio>1.0001)for(var a=0;a<o.channels_out;a++){var l=new z;r.n_out=Q(t,e[a],o.mf_size,t.framesize,n[a],s,i,l,a),r.n_in=l.num_used}else{r.n_out=Math.min(t.framesize,i),r.n_in=r.n_out;for(var c=0;c<r.n_out;++c)e[0][o.mf_size+c]=n[0][s+c],2==o.channels_out&&(e[1][o.mf_size+c]=n[1][s+c])}}this.lame_init=function(){var t=new _,e=I(t);return 0!=e?null:(t.lame_allocated_gfp=1,t)},this.nearestBitrateFullIndex=function(t){var e=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],n=0,s=0,i=0,r=0;r=e[16],i=16,s=e[16],n=16;for(var o=0;o<16;o++)if(Math.max(t,e[o+1])!=t){r=e[o+1],i=o+1,s=e[o],n=o;break}return r-t>t-s?n:i},this.lame_init_params=function(t){var e=t.internal_flags;if(e.Class_ID=0,null==e.ATH&&(e.ATH=new p),null==e.PSY&&(e.PSY=new R),null==e.rgdata&&(e.rgdata=new d),e.channels_in=t.num_channels,1==e.channels_in&&(t.mode=MPEGMode.MONO),e.channels_out=t.mode==MPEGMode.MONO?1:2,e.mode_ext=b.MPG_MD_MS_LR,t.mode==MPEGMode.MONO&&(t.force_ms=!1),t.VBR==r.vbr_off&&128!=t.VBR_mean_bitrate_kbps&&0==t.brate&&(t.brate=t.VBR_mean_bitrate_kbps),t.VBR==r.vbr_off||t.VBR==r.vbr_mtrh||t.VBR==r.vbr_mt||(t.free_format=!1),t.VBR==r.vbr_off&&0==t.brate&&g.EQ(t.compression_ratio,0)&&(t.compression_ratio=11.025),t.VBR==r.vbr_off&&t.compression_ratio>0&&(0==t.out_samplerate&&(t.out_samplerate=map2MP3Frequency(int(.97*t.in_samplerate))),t.brate=0|16*t.out_samplerate*e.channels_out/(1e3*t.compression_ratio),e.samplerate_index=V(t.out_samplerate,t),t.free_format||(t.brate=D(t.brate,t.version,t.out_samplerate))),0!=t.out_samplerate&&(t.out_samplerate<16e3?(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,64)):t.out_samplerate<32e3?(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,160)):(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,32),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,320))),0==t.lowpassfreq){var i=16e3;switch(t.VBR){case r.vbr_off:var a=new E;F(a,t.brate),i=a.lowerlimit;break;case r.vbr_abr:a=new E;F(a,t.VBR_mean_bitrate_kbps),i=a.lowerlimit;break;case r.vbr_rh:var l=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=t.VBR_q&&t.VBR_q<=9){var c=l[t.VBR_q],_=l[t.VBR_q+1],f=t.VBR_q_frac;i=linear_int(c,_,f)}else i=19500;break;default:l=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=t.VBR_q&&t.VBR_q<=9){c=l[t.VBR_q],_=l[t.VBR_q+1],f=t.VBR_q_frac;i=linear_int(c,_,f)}else i=19500}t.mode!=MPEGMode.MONO||t.VBR!=r.vbr_off&&t.VBR!=r.vbr_abr||(i*=1.5),t.lowpassfreq=0|i}if(0==t.out_samplerate&&(2*t.lowpassfreq>t.in_samplerate&&(t.lowpassfreq=t.in_samplerate/2),t.out_samplerate=N(0|t.lowpassfreq,t.in_samplerate)),t.lowpassfreq=Math.min(20500,t.lowpassfreq),t.lowpassfreq=Math.min(t.out_samplerate/2,t.lowpassfreq),t.VBR==r.vbr_off&&(t.compression_ratio=16*t.out_samplerate*e.channels_out/(1e3*t.brate)),t.VBR==r.vbr_abr&&(t.compression_ratio=16*t.out_samplerate*e.channels_out/(1e3*t.VBR_mean_bitrate_kbps)),t.bWriteVbrTag||(t.findReplayGain=!1,t.decode_on_the_fly=!1,e.findPeakSample=!1),e.findReplayGain=t.findReplayGain,e.decode_on_the_fly=t.decode_on_the_fly,e.decode_on_the_fly&&(e.findPeakSample=!0),e.findReplayGain&&n.InitGainAnalysis(e.rgdata,t.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return t.internal_flags=null,-6;switch(e.decode_on_the_fly&&!t.decode_only&&(null!=e.hip&&M.hip_decode_exit(e.hip),e.hip=M.hip_decode_init()),e.mode_gr=t.out_samplerate<=24e3?1:2,t.framesize=576*e.mode_gr,t.encoder_delay=b.ENCDELAY,e.resample_ratio=t.in_samplerate/t.out_samplerate,t.VBR){case r.vbr_mt:case r.vbr_rh:case r.vbr_mtrh:var y=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];t.compression_ratio=y[t.VBR_q];break;case r.vbr_abr:t.compression_ratio=16*t.out_samplerate*e.channels_out/(1e3*t.VBR_mean_bitrate_kbps);break;default:t.compression_ratio=16*t.out_samplerate*e.channels_out/(1e3*t.brate);break}if(t.mode==MPEGMode.NOT_SET&&(t.mode=MPEGMode.JOINT_STEREO),t.highpassfreq>0?(e.highpass1=2*t.highpassfreq,t.highpasswidth>=0?e.highpass2=2*(t.highpassfreq+t.highpasswidth):e.highpass2=2*t.highpassfreq,e.highpass1/=t.out_samplerate,e.highpass2/=t.out_samplerate):(e.highpass1=0,e.highpass2=0),t.lowpassfreq>0?(e.lowpass2=2*t.lowpassfreq,t.lowpasswidth>=0?(e.lowpass1=2*(t.lowpassfreq-t.lowpasswidth),e.lowpass1<0&&(e.lowpass1=0)):e.lowpass1=2*t.lowpassfreq,e.lowpass1/=t.out_samplerate,e.lowpass2/=t.out_samplerate):(e.lowpass1=0,e.lowpass2=0),q(t),e.samplerate_index=V(t.out_samplerate,t),e.samplerate_index<0)return t.internal_flags=null,-1;if(t.VBR==r.vbr_off){if(t.free_format)e.bitrate_index=0;else if(t.brate=D(t.brate,t.version,t.out_samplerate),e.bitrate_index=L(t.brate,t.version,t.out_samplerate),e.bitrate_index<=0)return t.internal_flags=null,-1}else e.bitrate_index=1;t.analysis&&(t.bWriteVbrTag=!1),null!=e.pinfo&&(t.bWriteVbrTag=!1),s.init_bit_stream_w(e);for(var S,A=e.samplerate_index+3*t.version+6*(t.out_samplerate<16e3?1:0),k=0;k<b.SBMAX_l+1;k++)e.scalefac_band.l[k]=x.sfBandIndex[A].l[k];for(k=0;k<b.PSFB21+1;k++){var O=(e.scalefac_band.l[22]-e.scalefac_band.l[21])/b.PSFB21,I=e.scalefac_band.l[21]+k*O;e.scalefac_band.psfb21[k]=I}e.scalefac_band.psfb21[b.PSFB21]=576;for(k=0;k<b.SBMAX_s+1;k++)e.scalefac_band.s[k]=x.sfBandIndex[A].s[k];for(k=0;k<b.PSFB12+1;k++){O=(e.scalefac_band.s[13]-e.scalefac_band.s[12])/b.PSFB12,I=e.scalefac_band.s[12]+k*O;e.scalefac_band.psfb12[k]=I}for(e.scalefac_band.psfb12[b.PSFB12]=192,1==t.version?e.sideinfo_len=1==e.channels_out?21:36:e.sideinfo_len=1==e.channels_out?13:21,t.error_protection&&(e.sideinfo_len+=2),H(t),e.Class_ID=B,S=0;S<19;S++)e.nsPsy.pefirbuf[S]=700*e.mode_gr*e.channels_out;switch(-1==t.ATHtype&&(t.ATHtype=4),u(t.VBR_q<=9),u(t.VBR_q>=0),t.VBR){case r.vbr_mt:t.VBR=r.vbr_mtrh;case r.vbr_mtrh:null==t.useTemporal&&(t.useTemporal=!1),w.apply_preset(t,500-10*t.VBR_q,0),t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),t.quality<5&&(t.quality=0),t.quality>5&&(t.quality=5),e.PSY.mask_adjust=t.maskingadjust,e.PSY.mask_adjust_short=t.maskingadjust_short,t.experimentalY?e.sfb21_extra=!1:e.sfb21_extra=t.out_samplerate>44e3,e.iteration_loop=new VBRNewIterationLoop(T);break;case r.vbr_rh:w.apply_preset(t,500-10*t.VBR_q,0),e.PSY.mask_adjust=t.maskingadjust,e.PSY.mask_adjust_short=t.maskingadjust_short,t.experimentalY?e.sfb21_extra=!1:e.sfb21_extra=t.out_samplerate>44e3,t.quality>6&&(t.quality=6),t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),e.iteration_loop=new VBROldIterationLoop(T);break;default:var P;e.sfb21_extra=!1,t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),P=t.VBR,P==r.vbr_off&&(t.VBR_mean_bitrate_kbps=t.brate),w.apply_preset(t,t.VBR_mean_bitrate_kbps,0),t.VBR=P,e.PSY.mask_adjust=t.maskingadjust,e.PSY.mask_adjust_short=t.maskingadjust_short,P==r.vbr_off?e.iteration_loop=new m(T):e.iteration_loop=new ABRIterationLoop(T);break}if(u(t.scale>=0),t.VBR!=r.vbr_off){if(e.VBR_min_bitrate=1,e.VBR_max_bitrate=14,t.out_samplerate<16e3&&(e.VBR_max_bitrate=8),0!=t.VBR_min_bitrate_kbps&&(t.VBR_min_bitrate_kbps=D(t.VBR_min_bitrate_kbps,t.version,t.out_samplerate),e.VBR_min_bitrate=L(t.VBR_min_bitrate_kbps,t.version,t.out_samplerate),e.VBR_min_bitrate<0))return-1;if(0!=t.VBR_max_bitrate_kbps&&(t.VBR_max_bitrate_kbps=D(t.VBR_max_bitrate_kbps,t.version,t.out_samplerate),e.VBR_max_bitrate=L(t.VBR_max_bitrate_kbps,t.version,t.out_samplerate),e.VBR_max_bitrate<0))return-1;t.VBR_min_bitrate_kbps=v.bitrate_table[t.version][e.VBR_min_bitrate],t.VBR_max_bitrate_kbps=v.bitrate_table[t.version][e.VBR_max_bitrate],t.VBR_mean_bitrate_kbps=Math.min(v.bitrate_table[t.version][e.VBR_max_bitrate],t.VBR_mean_bitrate_kbps),t.VBR_mean_bitrate_kbps=Math.max(v.bitrate_table[t.version][e.VBR_min_bitrate],t.VBR_mean_bitrate_kbps)}return t.tune&&(e.PSY.mask_adjust+=t.tune_value_a,e.PSY.mask_adjust_short+=t.tune_value_a),j(t),u(t.scale>=0),t.athaa_type<0?e.ATH.useAdjust=3:e.ATH.useAdjust=t.athaa_type,e.ATH.aaSensitivityP=Math.pow(10,t.athaa_sensitivity/-10),null==t.short_blocks&&(t.short_blocks=o.short_block_allowed),t.short_blocks!=o.short_block_allowed||t.mode!=MPEGMode.JOINT_STEREO&&t.mode!=MPEGMode.STEREO||(t.short_blocks=o.short_block_coupled),t.quant_comp<0&&(t.quant_comp=1),t.quant_comp_short<0&&(t.quant_comp_short=0),t.msfix<0&&(t.msfix=0),t.exp_nspsytune=1|t.exp_nspsytune,t.internal_flags.nsPsy.attackthre<0&&(t.internal_flags.nsPsy.attackthre=h.NSATTACKTHRE),t.internal_flags.nsPsy.attackthre_s<0&&(t.internal_flags.nsPsy.attackthre_s=h.NSATTACKTHRE_S),u(t.scale>=0),t.scale<0&&(t.scale=1),t.ATHtype<0&&(t.ATHtype=4),t.ATHcurve<0&&(t.ATHcurve=4),t.athaa_loudapprox<0&&(t.athaa_loudapprox=2),t.interChRatio<0&&(t.interChRatio=0),null==t.useTemporal&&(t.useTemporal=!0),e.slot_lag=e.frac_SpF=0,t.VBR==r.vbr_off&&(e.slot_lag=e.frac_SpF=72e3*(t.version+1)*t.brate%t.out_samplerate|0),x.iteration_init(t),C.psymodel_init(t),u(t.scale>=0),0},this.lame_encode_flush=function(t,e,n,i){var r,o,a,l,u=t.internal_flags,h=c([2,1152]),_=0,f=u.mf_samples_to_encode-b.POSTDELAY,p=U(t);if(u.mf_samples_to_encode<1)return 0;r=0,t.in_samplerate!=t.out_samplerate&&(f+=16*t.out_samplerate/t.in_samplerate),a=t.framesize-f%t.framesize,a<576&&(a+=t.framesize),t.encoder_padding=a,l=(f+a)/t.framesize;while(l>0&&_>=0){var d=p-u.mf_size,m=t.frameNum;d*=t.in_samplerate,d/=t.out_samplerate,d>1152&&(d=1152),d<1&&(d=1),o=i-r,0==i&&(o=0),_=this.lame_encode_buffer(t,h[0],h[1],d,e,n,o),n+=_,r+=_,l-=m!=t.frameNum?1:0}if(u.mf_samples_to_encode=0,_<0)return _;if(o=i-r,0==i&&(o=0),s.flush_bitstream(t),_=s.copy_buffer(u,e,n,o,1),_<0)return _;if(n+=_,r+=_,o=i-r,0==i&&(o=0),t.write_id3tag_automatic){if(k.id3tag_write_v1(t),_=s.copy_buffer(u,e,n,o,0),_<0)return _;r+=_}return r},this.lame_encode_buffer=function(t,e,n,s,i,r,o){var a=t.internal_flags,l=[null,null];if(a.Class_ID!=B)return-3;if(0==s)return 0;X(a,s),l[0]=a.in_buffer_0,l[1]=a.in_buffer_1;for(var c=0;c<s;c++)l[0][c]=e[c],a.channels_in>1&&(l[1][c]=n[c]);return Y(t,l[0],l[1],s,i,r,o)}}t.exports=y},3893:function(t,e,n){var s=n(8231);function i(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=s.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}t.exports=i},1998:function(t,e,n){var s=n(1038),i=(s.System,s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays,s.new_array_n,s.new_byte),r=s.new_double,o=s.new_float,a=s.new_float_n,l=s.new_int,c=s.new_int_n,u=(s.assert,n(9524)),h=n(302),_=n(7885),f=n(3362),p=n(8200),d=n(687),m=n(354);function g(){var t=40;function e(){this.write_timing=0,this.ptr=0,this.buf=i(t)}this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=a([2,g.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new u,this.ms_ratio=o(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=l(2),this.CurrentStep=l(2),this.masking_lower=0,this.bv_scf=l(576),this.pseudohalf=l(m.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*g.BPC+1),this.itime=r(2),this.sideinfo_len=0,this.sb_sample=a([2,2,18,d.SBLIMIT]),this.amp_filter=o(32),this.header=new Array(g.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new h,this.minval_l=o(d.CBANDS),this.minval_s=o(d.CBANDS),this.nb_1=a([4,d.CBANDS]),this.nb_2=a([4,d.CBANDS]),this.nb_s1=a([4,d.CBANDS]),this.nb_s2=a([4,d.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=o(4),this.loudness_sq=a([2,2]),this.loudness_sq_save=o(2),this.mld_l=o(d.SBMAX_l),this.mld_s=o(d.SBMAX_s),this.bm_l=l(d.SBMAX_l),this.bo_l=l(d.SBMAX_l),this.bm_s=l(d.SBMAX_s),this.bo_s=l(d.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=c([d.CBANDS,2]),this.s3ind_s=c([d.CBANDS,2]),this.numlines_s=l(d.CBANDS),this.numlines_l=l(d.CBANDS),this.rnumlines_l=o(d.CBANDS),this.mld_cb_l=o(d.CBANDS),this.mld_cb_s=o(d.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=o(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=l(2),this.nsPsy=new _,this.VBR_seek_table=new f,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=c([16,5]),this.bitrate_blockType_Hist=c([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var n=0;n<this.en.length;n++)this.en[n]=new p;for(n=0;n<this.thm.length;n++)this.thm[n]=new p;for(n=0;n<this.header.length;n++)this.header[n]=new e}g.MFSIZE=3456+d.ENCDELAY-d.MDCTDELAY,g.MAX_HEADER_BUF=256,g.MAX_BITS_PER_CHANNEL=4095,g.MAX_BITS_PER_GRANULE=7680,g.BPC=320,t.exports=g},8231:function(t){function e(t){var e=t;this.ordinal=function(){return e}}e.STEREO=new e(0),e.JOINT_STEREO=new e(1),e.DUAL_CHANNEL=new e(2),e.MONO=new e(3),e.NOT_SET=new e(4),t.exports=e},3134:function(t){function e(t){this.bits=t}t.exports=e},2143:function(t,e,n){var s=n(1038),i=s.System,r=(s.VbrMode,s.Float,s.ShortBlock,s.Util),o=s.Arrays,a=(s.new_array_n,s.new_byte,s.new_double,s.new_float),l=(s.new_float_n,s.new_int,s.new_int_n,s.assert,n(687));function c(){var t=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*r.SQRT2*.5/2384e-9,.017876148*r.SQRT2*.5/2384e-9,.003134727*r.SQRT2*.5/2384e-9,.002457142*r.SQRT2*.5/2384e-9,971317e-9*r.SQRT2*.5/2384e-9,218868e-9*r.SQRT2*.5/2384e-9,101566e-9*r.SQRT2*.5/2384e-9,13828e-9*r.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],e=12,n=36,s=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],c=s[l.SHORT_TYPE],u=s[l.SHORT_TYPE],h=s[l.SHORT_TYPE],_=s[l.SHORT_TYPE],f=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function p(e,n,s){for(var i,o,a,l=10,c=n+238-14-286,u=-15;u<0;u++){var h,_,f;h=t[l+-10],_=e[c+-224]*h,f=e[n+224]*h,h=t[l+-9],_+=e[c+-160]*h,f+=e[n+160]*h,h=t[l+-8],_+=e[c+-96]*h,f+=e[n+96]*h,h=t[l+-7],_+=e[c+-32]*h,f+=e[n+32]*h,h=t[l+-6],_+=e[c+32]*h,f+=e[n+-32]*h,h=t[l+-5],_+=e[c+96]*h,f+=e[n+-96]*h,h=t[l+-4],_+=e[c+160]*h,f+=e[n+-160]*h,h=t[l+-3],_+=e[c+224]*h,f+=e[n+-224]*h,h=t[l+-2],_+=e[n+-256]*h,f-=e[c+256]*h,h=t[l+-1],_+=e[n+-192]*h,f-=e[c+192]*h,h=t[l+0],_+=e[n+-128]*h,f-=e[c+128]*h,h=t[l+1],_+=e[n+-64]*h,f-=e[c+64]*h,h=t[l+2],_+=e[n+0]*h,f-=e[c+0]*h,h=t[l+3],_+=e[n+64]*h,f-=e[c+-64]*h,h=t[l+4],_+=e[n+128]*h,f-=e[c+-128]*h,h=t[l+5],_+=e[n+192]*h,f-=e[c+-192]*h,_*=t[l+6],h=f-_,s[30+2*u]=f+_,s[31+2*u]=t[l+7]*h,l+=18,n--,c++}f=e[n+-16]*t[l+-10],_=e[n+-32]*t[l+-2],f+=(e[n+-48]-e[n+16])*t[l+-9],_+=e[n+-96]*t[l+-1],f+=(e[n+-80]+e[n+48])*t[l+-8],_+=e[n+-160]*t[l+0],f+=(e[n+-112]-e[n+80])*t[l+-7],_+=e[n+-224]*t[l+1],f+=(e[n+-144]+e[n+112])*t[l+-6],_-=e[n+32]*t[l+2],f+=(e[n+-176]-e[n+144])*t[l+-5],_-=e[n+96]*t[l+3],f+=(e[n+-208]+e[n+176])*t[l+-4],_-=e[n+160]*t[l+4],f+=(e[n+-240]-e[n+208])*t[l+-3],_-=e[n+224],i=_-f,o=_+f,f=s[14],_=s[15]-f,s[31]=o+f,s[30]=i+_,s[15]=i-_,s[14]=o-f,a=s[28]-s[0],s[0]+=s[28],s[28]=a*t[l+-36+7],a=s[29]-s[1],s[1]+=s[29],s[29]=a*t[l+-36+7],a=s[26]-s[2],s[2]+=s[26],s[26]=a*t[l+-72+7],a=s[27]-s[3],s[3]+=s[27],s[27]=a*t[l+-72+7],a=s[24]-s[4],s[4]+=s[24],s[24]=a*t[l+-108+7],a=s[25]-s[5],s[5]+=s[25],s[25]=a*t[l+-108+7],a=s[22]-s[6],s[6]+=s[22],s[22]=a*r.SQRT2,a=s[23]-s[7],s[7]+=s[23],s[23]=a*r.SQRT2-s[7],s[7]-=s[6],s[22]-=s[7],s[23]-=s[22],a=s[6],s[6]=s[31]-a,s[31]=s[31]+a,a=s[7],s[7]=s[30]-a,s[30]=s[30]+a,a=s[22],s[22]=s[15]-a,s[15]=s[15]+a,a=s[23],s[23]=s[14]-a,s[14]=s[14]+a,a=s[20]-s[8],s[8]+=s[20],s[20]=a*t[l+-180+7],a=s[21]-s[9],s[9]+=s[21],s[21]=a*t[l+-180+7],a=s[18]-s[10],s[10]+=s[18],s[18]=a*t[l+-216+7],a=s[19]-s[11],s[11]+=s[19],s[19]=a*t[l+-216+7],a=s[16]-s[12],s[12]+=s[16],s[16]=a*t[l+-252+7],a=s[17]-s[13],s[13]+=s[17],s[17]=a*t[l+-252+7],a=-s[20]+s[24],s[20]+=s[24],s[24]=a*t[l+-216+7],a=-s[21]+s[25],s[21]+=s[25],s[25]=a*t[l+-216+7],a=s[4]-s[8],s[4]+=s[8],s[8]=a*t[l+-216+7],a=s[5]-s[9],s[5]+=s[9],s[9]=a*t[l+-216+7],a=s[0]-s[12],s[0]+=s[12],s[12]=a*t[l+-72+7],a=s[1]-s[13],s[1]+=s[13],s[13]=a*t[l+-72+7],a=s[16]-s[28],s[16]+=s[28],s[28]=a*t[l+-72+7],a=-s[17]+s[29],s[17]+=s[29],s[29]=a*t[l+-72+7],a=r.SQRT2*(s[2]-s[10]),s[2]+=s[10],s[10]=a,a=r.SQRT2*(s[3]-s[11]),s[3]+=s[11],s[11]=a,a=r.SQRT2*(-s[18]+s[26]),s[18]+=s[26],s[26]=a-s[18],a=r.SQRT2*(-s[19]+s[27]),s[19]+=s[27],s[27]=a-s[19],a=s[2],s[19]-=s[3],s[3]-=a,s[2]=s[31]-a,s[31]+=a,a=s[3],s[11]-=s[19],s[18]-=a,s[3]=s[30]-a,s[30]+=a,a=s[18],s[27]-=s[11],s[19]-=a,s[18]=s[15]-a,s[15]+=a,a=s[19],s[10]-=a,s[19]=s[14]-a,s[14]+=a,a=s[10],s[11]-=a,s[10]=s[23]-a,s[23]+=a,a=s[11],s[26]-=a,s[11]=s[22]-a,s[22]+=a,a=s[26],s[27]-=a,s[26]=s[7]-a,s[7]+=a,a=s[27],s[27]=s[6]-a,s[6]+=a,a=r.SQRT2*(s[0]-s[4]),s[0]+=s[4],s[4]=a,a=r.SQRT2*(s[1]-s[5]),s[1]+=s[5],s[5]=a,a=r.SQRT2*(s[16]-s[20]),s[16]+=s[20],s[20]=a,a=r.SQRT2*(s[17]-s[21]),s[17]+=s[21],s[21]=a,a=-r.SQRT2*(s[8]-s[12]),s[8]+=s[12],s[12]=a-s[8],a=-r.SQRT2*(s[9]-s[13]),s[9]+=s[13],s[13]=a-s[9],a=-r.SQRT2*(s[25]-s[29]),s[25]+=s[29],s[29]=a-s[25],a=-r.SQRT2*(s[24]+s[28]),s[24]-=s[28],s[28]=a-s[24],a=s[24]-s[16],s[24]=a,a=s[20]-a,s[20]=a,a=s[28]-a,s[28]=a,a=s[25]-s[17],s[25]=a,a=s[21]-a,s[21]=a,a=s[29]-a,s[29]=a,a=s[17]-s[1],s[17]=a,a=s[9]-a,s[9]=a,a=s[25]-a,s[25]=a,a=s[5]-a,s[5]=a,a=s[21]-a,s[21]=a,a=s[13]-a,s[13]=a,a=s[29]-a,s[29]=a,a=s[1]-s[0],s[1]=a,a=s[16]-a,s[16]=a,a=s[17]-a,s[17]=a,a=s[8]-a,s[8]=a,a=s[9]-a,s[9]=a,a=s[24]-a,s[24]=a,a=s[25]-a,s[25]=a,a=s[4]-a,s[4]=a,a=s[5]-a,s[5]=a,a=s[20]-a,s[20]=a,a=s[21]-a,s[21]=a,a=s[12]-a,s[12]=a,a=s[13]-a,s[13]=a,a=s[28]-a,s[28]=a,a=s[29]-a,s[29]=a,a=s[0],s[0]+=s[31],s[31]-=a,a=s[1],s[1]+=s[30],s[30]-=a,a=s[16],s[16]+=s[15],s[15]-=a,a=s[17],s[17]+=s[14],s[14]-=a,a=s[8],s[8]+=s[23],s[23]-=a,a=s[9],s[9]+=s[22],s[22]-=a,a=s[24],s[24]+=s[7],s[7]-=a,a=s[25],s[25]+=s[6],s[6]-=a,a=s[4],s[4]+=s[27],s[27]-=a,a=s[5],s[5]+=s[26],s[26]-=a,a=s[20],s[20]+=s[11],s[11]-=a,a=s[21],s[21]+=s[10],s[10]-=a,a=s[12],s[12]+=s[19],s[19]-=a,a=s[13],s[13]+=s[18],s[18]-=a,a=s[28],s[28]+=s[3],s[3]-=a,a=s[29],s[29]+=s[2],s[2]-=a}function d(t,e){for(var n=0;n<3;n++){var i,r,o,a,c,u;a=t[e+6]*s[l.SHORT_TYPE][0]-t[e+15],i=t[e+0]*s[l.SHORT_TYPE][2]-t[e+9],r=a+i,o=a-i,a=t[e+15]*s[l.SHORT_TYPE][0]+t[e+6],i=t[e+9]*s[l.SHORT_TYPE][2]+t[e+0],c=a+i,u=-a+i,i=2069978111953089e-26*(t[e+3]*s[l.SHORT_TYPE][1]-t[e+12]),a=2069978111953089e-26*(t[e+12]*s[l.SHORT_TYPE][1]+t[e+3]),t[e+0]=190752519173728e-25*r+i,t[e+15]=190752519173728e-25*-c+a,o=.8660254037844387*o*1907525191737281e-26,c=.5*c*1907525191737281e-26+a,t[e+3]=o-c,t[e+6]=o+c,r=.5*r*1907525191737281e-26-i,u=.8660254037844387*u*1907525191737281e-26,t[e+9]=r+u,t[e+12]=r-u,e++}}function m(t,e,n){var s,i,r,o,a,l,c,h,_,f,p,d,m,g,v,b,y,w;r=n[17]-n[9],a=n[15]-n[11],l=n[14]-n[12],c=n[0]+n[8],h=n[1]+n[7],_=n[2]+n[6],f=n[3]+n[5],t[e+17]=c+_-f-(h-n[4]),i=(c+_-f)*u[19]+(h-n[4]),s=(r-a-l)*u[18],t[e+5]=s+i,t[e+6]=s-i,o=(n[16]-n[10])*u[18],h=h*u[19]+n[4],s=r*u[12]+o+a*u[13]+l*u[14],i=-c*u[16]+h-_*u[17]+f*u[15],t[e+1]=s+i,t[e+2]=s-i,s=r*u[13]-o-a*u[14]+l*u[12],i=-c*u[17]+h-_*u[15]+f*u[16],t[e+9]=s+i,t[e+10]=s-i,s=r*u[14]-o+a*u[12]-l*u[13],i=c*u[15]-h+_*u[16]-f*u[17],t[e+13]=s+i,t[e+14]=s-i,p=n[8]-n[0],m=n[6]-n[2],g=n[5]-n[3],v=n[17]+n[9],b=n[16]+n[10],y=n[15]+n[11],w=n[14]+n[12],t[e+0]=v+y+w+(b+n[13]),s=(v+y+w)*u[19]-(b+n[13]),i=(p-m+g)*u[18],t[e+11]=s+i,t[e+12]=s-i,d=(n[7]-n[1])*u[18],b=n[13]-b*u[19],s=v*u[15]-b+y*u[16]+w*u[17],i=p*u[14]+d+m*u[12]+g*u[13],t[e+3]=s+i,t[e+4]=s-i,s=-v*u[17]+b-y*u[15]-w*u[16],i=p*u[13]+d-m*u[14]-g*u[12],t[e+7]=s+i,t[e+8]=s-i,s=-v*u[16]+b-y*u[17]-w*u[15],i=p*u[12]-d+m*u[13]-g*u[14],t[e+15]=s+i,t[e+16]=s-i}this.mdct_sub48=function(t,r,u){for(var g=r,v=286,b=0;b<t.channels_out;b++){for(var y=0;y<t.mode_gr;y++){for(var w,x=t.l3_side.tt[y][b],T=x.xr,S=0,A=t.sb_sample[b][1-y],k=0,M=0;M<9;M++)for(p(g,v,A[k]),p(g,v+32,A[k+1]),k+=2,v+=64,w=1;w<32;w+=2)A[k-1][w]*=-1;for(w=0;w<32;w++,S+=18){var C=x.block_type,R=t.sb_sample[b][y],E=t.sb_sample[b][1-y];if(0!=x.mixed_block_flag&&w<2&&(C=0),t.amp_filter[w]<1e-12)o.fill(T,S+0,S+18,0);else{if(t.amp_filter[w]<1)for(M=0;M<18;M++)E[M][f[w]]*=t.amp_filter[w];if(C==l.SHORT_TYPE){for(M=-e/4;M<0;M++){var O=s[l.SHORT_TYPE][M+3];T[S+3*M+9]=R[9+M][f[w]]*O-R[8-M][f[w]],T[S+3*M+18]=R[14-M][f[w]]*O+R[15+M][f[w]],T[S+3*M+10]=R[15+M][f[w]]*O-R[14-M][f[w]],T[S+3*M+19]=E[2-M][f[w]]*O+E[3+M][f[w]],T[S+3*M+11]=E[3+M][f[w]]*O-E[2-M][f[w]],T[S+3*M+20]=E[8-M][f[w]]*O+E[9+M][f[w]]}d(T,S)}else{var B=a(18);for(M=-n/4;M<0;M++){var I,P;I=s[C][M+27]*E[M+9][f[w]]+s[C][M+36]*E[8-M][f[w]],P=s[C][M+9]*R[M+9][f[w]]-s[C][M+18]*R[8-M][f[w]],B[M+9]=I-P*c[3+M+9],B[M+18]=I*c[3+M+9]+P}m(T,S,B)}}if(C!=l.SHORT_TYPE&&0!=w)for(M=7;M>=0;--M){var N,V;N=T[S+M]*h[20+M]+T[S+-1-M]*_[28+M],V=T[S+M]*_[28+M]-T[S+-1-M]*h[20+M],T[S+-1-M]=N,T[S+M]=V}}}if(g=u,v=286,1==t.mode_gr)for(var D=0;D<18;D++)i.arraycopy(t.sb_sample[b][1][D],0,t.sb_sample[b][0][D],0,32)}}}t.exports=c},7885:function(t,e,n){var s=n(1038),i=(s.System,s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays,s.new_array_n,s.new_byte,s.new_double,s.new_float),r=s.new_float_n,o=s.new_int,a=(s.new_int_n,s.assert,n(687));function l(){this.last_en_subshort=r([4,9]),this.lastAttacks=o(4),this.pefirbuf=i(19),this.longfact=i(a.SBMAX_l),this.shortfact=i(a.SBMAX_s),this.attackthre=0,this.attackthre_s=0}t.exports=l},9457:function(t,e,n){var s=n(1038),i=(s.System,s.VbrMode);s.Float,s.ShortBlock,s.Util,s.Arrays,s.new_array_n,s.new_byte,s.new_double,s.new_float,s.new_float_n,s.new_int,s.new_int_n,s.assert;function r(){function t(t,e,n,s,i,r,o,a,l,c,u,h,_,f,p){this.vbr_q=t,this.quant_comp=e,this.quant_comp_s=n,this.expY=s,this.st_lrm=i,this.st_s=r,this.masking_adj=o,this.masking_adj_short=a,this.ath_lower=l,this.ath_curve=c,this.ath_sensitivity=u,this.interch=h,this.safejoint=_,this.sfb21mod=f,this.msfix=p}function e(t,e,n,s,i,r,o,a,l,c,u,h,_,f){this.quant_comp=e,this.quant_comp_s=n,this.safejoint=s,this.nsmsfix=i,this.st_lrm=r,this.st_s=o,this.nsbass=a,this.scale=l,this.masking_adj=c,this.ath_lower=u,this.ath_curve=h,this.interch=_,this.sfscale=f}var n;this.setModules=function(t){n=t};var s=[new t(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new t(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new t(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new t(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new t(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new t(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new t(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new t(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new t(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],r=[new t(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new t(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new t(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new t(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new t(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new t(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new t(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new t(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new t(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function o(t,e,n){var o=t.VBR==i.vbr_rh?s:r,a=t.VBR_q_frac,l=o[e],u=o[e+1],h=l;l.st_lrm=l.st_lrm+a*(u.st_lrm-l.st_lrm),l.st_s=l.st_s+a*(u.st_s-l.st_s),l.masking_adj=l.masking_adj+a*(u.masking_adj-l.masking_adj),l.masking_adj_short=l.masking_adj_short+a*(u.masking_adj_short-l.masking_adj_short),l.ath_lower=l.ath_lower+a*(u.ath_lower-l.ath_lower),l.ath_curve=l.ath_curve+a*(u.ath_curve-l.ath_curve),l.ath_sensitivity=l.ath_sensitivity+a*(u.ath_sensitivity-l.ath_sensitivity),l.interch=l.interch+a*(u.interch-l.interch),l.msfix=l.msfix+a*(u.msfix-l.msfix),c(t,h.vbr_q),0!=n?t.quant_comp=h.quant_comp:Math.abs(t.quant_comp- -1)>0||(t.quant_comp=h.quant_comp),0!=n?t.quant_comp_short=h.quant_comp_s:Math.abs(t.quant_comp_short- -1)>0||(t.quant_comp_short=h.quant_comp_s),0!=h.expY&&(t.experimentalY=0!=h.expY),0!=n?t.internal_flags.nsPsy.attackthre=h.st_lrm:Math.abs(t.internal_flags.nsPsy.attackthre- -1)>0||(t.internal_flags.nsPsy.attackthre=h.st_lrm),0!=n?t.internal_flags.nsPsy.attackthre_s=h.st_s:Math.abs(t.internal_flags.nsPsy.attackthre_s- -1)>0||(t.internal_flags.nsPsy.attackthre_s=h.st_s),0!=n?t.maskingadjust=h.masking_adj:Math.abs(t.maskingadjust-0)>0||(t.maskingadjust=h.masking_adj),0!=n?t.maskingadjust_short=h.masking_adj_short:Math.abs(t.maskingadjust_short-0)>0||(t.maskingadjust_short=h.masking_adj_short),0!=n?t.ATHlower=-h.ath_lower/10:Math.abs(10*-t.ATHlower-0)>0||(t.ATHlower=-h.ath_lower/10),0!=n?t.ATHcurve=h.ath_curve:Math.abs(t.ATHcurve- -1)>0||(t.ATHcurve=h.ath_curve),0!=n?t.athaa_sensitivity=h.ath_sensitivity:Math.abs(t.athaa_sensitivity- -1)>0||(t.athaa_sensitivity=h.ath_sensitivity),h.interch>0&&(0!=n?t.interChRatio=h.interch:Math.abs(t.interChRatio- -1)>0||(t.interChRatio=h.interch)),h.safejoint>0&&(t.exp_nspsytune=t.exp_nspsytune|h.safejoint),h.sfb21mod>0&&(t.exp_nspsytune=t.exp_nspsytune|h.sfb21mod<<20),0!=n?t.msfix=h.msfix:Math.abs(t.msfix- -1)>0||(t.msfix=h.msfix),0==n&&(t.VBR_q=e,t.VBR_q_frac=a)}var a=[new e(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new e(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new e(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new e(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new e(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new e(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new e(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new e(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new e(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new e(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new e(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new e(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new e(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new e(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new e(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new e(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new e(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function l(t,e,s){var r=e,o=n.nearestBitrateFullIndex(e);if(t.VBR=i.vbr_abr,t.VBR_mean_bitrate_kbps=r,t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,320),t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.brate=t.VBR_mean_bitrate_kbps,t.VBR_mean_bitrate_kbps>320&&(t.disable_reservoir=!0),a[o].safejoint>0&&(t.exp_nspsytune=2|t.exp_nspsytune),a[o].sfscale>0&&(t.internal_flags.noise_shaping=2),Math.abs(a[o].nsbass)>0){var l=int(4*a[o].nsbass);l<0&&(l+=64),t.exp_nspsytune=t.exp_nspsytune|l<<2}return 0!=s?t.quant_comp=a[o].quant_comp:Math.abs(t.quant_comp- -1)>0||(t.quant_comp=a[o].quant_comp),0!=s?t.quant_comp_short=a[o].quant_comp_s:Math.abs(t.quant_comp_short- -1)>0||(t.quant_comp_short=a[o].quant_comp_s),0!=s?t.msfix=a[o].nsmsfix:Math.abs(t.msfix- -1)>0||(t.msfix=a[o].nsmsfix),0!=s?t.internal_flags.nsPsy.attackthre=a[o].st_lrm:Math.abs(t.internal_flags.nsPsy.attackthre- -1)>0||(t.internal_flags.nsPsy.attackthre=a[o].st_lrm),0!=s?t.internal_flags.nsPsy.attackthre_s=a[o].st_s:Math.abs(t.internal_flags.nsPsy.attackthre_s- -1)>0||(t.internal_flags.nsPsy.attackthre_s=a[o].st_s),0!=s?t.scale=a[o].scale:Math.abs(t.scale- -1)>0||(t.scale=a[o].scale),0!=s?t.maskingadjust=a[o].masking_adj:Math.abs(t.maskingadjust-0)>0||(t.maskingadjust=a[o].masking_adj),a[o].masking_adj>0?0!=s?t.maskingadjust_short=.9*a[o].masking_adj:Math.abs(t.maskingadjust_short-0)>0||(t.maskingadjust_short=.9*a[o].masking_adj):0!=s?t.maskingadjust_short=1.1*a[o].masking_adj:Math.abs(t.maskingadjust_short-0)>0||(t.maskingadjust_short=1.1*a[o].masking_adj),0!=s?t.ATHlower=-a[o].ath_lower/10:Math.abs(10*-t.ATHlower-0)>0||(t.ATHlower=-a[o].ath_lower/10),0!=s?t.ATHcurve=a[o].ath_curve:Math.abs(t.ATHcurve- -1)>0||(t.ATHcurve=a[o].ath_curve),0!=s?t.interChRatio=a[o].interch:Math.abs(t.interChRatio- -1)>0||(t.interChRatio=a[o].interch),e}function c(t,e){var n=0;return 0>e&&(n=-1,e=0),9<e&&(n=-1,e=9),t.VBR_q=e,t.VBR_q_frac=0,n}this.apply_preset=function(t,e,n){switch(e){case Lame.R3MIX:e=Lame.V3,t.VBR=i.vbr_mtrh;break;case Lame.MEDIUM:e=Lame.V4,t.VBR=i.vbr_rh;break;case Lame.MEDIUM_FAST:e=Lame.V4,t.VBR=i.vbr_mtrh;break;case Lame.STANDARD:e=Lame.V2,t.VBR=i.vbr_rh;break;case Lame.STANDARD_FAST:e=Lame.V2,t.VBR=i.vbr_mtrh;break;case Lame.EXTREME:e=Lame.V0,t.VBR=i.vbr_rh;break;case Lame.EXTREME_FAST:e=Lame.V0,t.VBR=i.vbr_mtrh;break;case Lame.INSANE:return e=320,t.preset=e,l(t,e,n),t.VBR=i.vbr_off,e}switch(t.preset=e,e){case Lame.V9:return o(t,9,n),e;case Lame.V8:return o(t,8,n),e;case Lame.V7:return o(t,7,n),e;case Lame.V6:return o(t,6,n),e;case Lame.V5:return o(t,5,n),e;case Lame.V4:return o(t,4,n),e;case Lame.V3:return o(t,3,n),e;case Lame.V2:return o(t,2,n),e;case Lame.V1:return o(t,1,n),e;case Lame.V0:return o(t,0,n),e;default:break}return 8<=e&&e<=320?l(t,e,n):(t.preset=0,e)}}t.exports=r},9319:function(t,e,n){var s=n(1038),i=(s.System,s.VbrMode),r=s.Float,o=s.ShortBlock,a=s.Util,l=s.Arrays,c=(s.new_array_n,s.new_byte,s.new_double,s.new_float),u=s.new_float_n,h=s.new_int,_=(s.new_int_n,s.assert),f=n(9347),p=n(687);function d(){var t=new f,e=2.302585092994046,n=2,s=16,d=2,m=16,g=.34,v=1/217621504/(p.BLKSIZE/2),b=.01,y=.8,w=.6,x=.3,T=3.5,S=21,A=.2302585093;function k(t){return t}function M(t,e){for(var n=0,s=0;s<p.BLKSIZE/2;++s)n+=t[s]*e.ATH.eql_w[s];return n*=v,n}function C(e,n,s,i,r,o,l,c,u,h,_){var f=e.internal_flags;if(u<2)t.fft_long(f,i[r],u,h,_),t.fft_short(f,o[l],u,h,_);else if(2==u){for(var d=p.BLKSIZE-1;d>=0;--d){var m=i[r+0][d],g=i[r+1][d];i[r+0][d]=(m+g)*a.SQRT2*.5,i[r+1][d]=(m-g)*a.SQRT2*.5}for(var v=2;v>=0;--v)for(d=p.BLKSIZE_s-1;d>=0;--d){m=o[l+0][v][d],g=o[l+1][v][d];o[l+0][v][d]=(m+g)*a.SQRT2*.5,o[l+1][v][d]=(m-g)*a.SQRT2*.5}}n[0]=k(i[r+0][0]),n[0]*=n[0];for(d=p.BLKSIZE/2-1;d>=0;--d){var b=i[r+0][p.BLKSIZE/2-d],y=i[r+0][p.BLKSIZE/2+d];n[p.BLKSIZE/2-d]=k(.5*(b*b+y*y))}for(v=2;v>=0;--v){s[v][0]=o[l+0][v][0],s[v][0]*=s[v][0];for(d=p.BLKSIZE_s/2-1;d>=0;--d){b=o[l+0][v][p.BLKSIZE_s/2-d],y=o[l+0][v][p.BLKSIZE_s/2+d];s[v][p.BLKSIZE_s/2-d]=k(.5*(b*b+y*y))}}var w=0;for(d=11;d<p.HBLKSIZE;d++)w+=n[d];if(f.tot_ener[u]=w,e.analysis){for(d=0;d<p.HBLKSIZE;d++)f.pinfo.energy[c][u][d]=f.pinfo.energy_save[u][d],f.pinfo.energy_save[u][d]=n[d];f.pinfo.pe[c][u]=f.pe[u]}2==e.athaa_loudapprox&&u<2&&(f.loudness_sq[c][u]=f.loudness_sq_save[u],f.loudness_sq_save[u]=M(n,f))}var R,E,O,B=8,I=23,P=15,N=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function V(){R=Math.pow(10,(B+1)/16),E=Math.pow(10,(I+1)/16),O=Math.pow(10,P/10)}var D=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],L=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],F=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276];function q(t,e,n,s,i,r){var o;if(e>t){if(!(e<t*E))return t+e;o=e/t}else{if(t>=e*E)return t+e;o=t/e}if(_(t>=0),_(e>=0),t+=e,s+3<=6){if(o>=R)return t;var l=0|a.FAST_LOG10_X(o,16);return t*L[l]}var c,u;l=0|a.FAST_LOG10_X(o,16);return e=0!=r?i.ATH.cb_s[n]*i.ATH.adjust:i.ATH.cb_l[n]*i.ATH.adjust,_(e>=0),t<O*e?t>e?(c=1,l<=13&&(c=F[l]),u=a.FAST_LOG10_X(t/e,10/15),t*((D[l]-c)*u+c)):l>13?t:t*F[l]:t*D[l]}var j=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1];function H(t,e,n){var s;if(t<0&&(t=0),e<0&&(e=0),t<=0)return e;if(e<=0)return t;if(s=e>t?e/t:t/e,-2<=n&&n<=2){if(s>=R)return t+e;var i=0|a.FAST_LOG10_X(s,16);return(t+e)*j[i]}return s<E?t+e:(t<e&&(t=e),t)}function X(t,e){var n=t.internal_flags;if(n.channels_out>1){for(var s=0;s<p.SBMAX_l;s++){var i=n.thm[0].l[s],r=n.thm[1].l[s];n.thm[0].l[s]+=r*e,n.thm[1].l[s]+=i*e}for(s=0;s<p.SBMAX_s;s++)for(var o=0;o<3;o++){i=n.thm[0].s[s][o],r=n.thm[1].s[s][o];n.thm[0].s[s][o]+=r*e,n.thm[1].s[s][o]+=i*e}}}function U(t){for(var e=0;e<p.SBMAX_l;e++)if(!(t.thm[0].l[e]>1.58*t.thm[1].l[e]||t.thm[1].l[e]>1.58*t.thm[0].l[e])){var n=t.mld_l[e]*t.en[3].l[e],s=Math.max(t.thm[2].l[e],Math.min(t.thm[3].l[e],n));n=t.mld_l[e]*t.en[2].l[e];var i=Math.max(t.thm[3].l[e],Math.min(t.thm[2].l[e],n));t.thm[2].l[e]=s,t.thm[3].l[e]=i}for(e=0;e<p.SBMAX_s;e++)for(var r=0;r<3;r++)if(!(t.thm[0].s[e][r]>1.58*t.thm[1].s[e][r]||t.thm[1].s[e][r]>1.58*t.thm[0].s[e][r])){n=t.mld_s[e]*t.en[3].s[e][r],s=Math.max(t.thm[2].s[e][r],Math.min(t.thm[3].s[e][r],n));n=t.mld_s[e]*t.en[2].s[e][r];i=Math.max(t.thm[3].s[e][r],Math.min(t.thm[2].s[e][r],n));t.thm[2].s[e][r]=s,t.thm[3].s[e][r]=i}}function Y(t,e,n){var s=e,i=Math.pow(10,n);e*=2,s*=2;for(var r=0;r<p.SBMAX_l;r++){if(h=t.ATH.cb_l[t.bm_l[r]]*i,l=Math.min(Math.max(t.thm[0].l[r],h),Math.max(t.thm[1].l[r],h)),c=Math.max(t.thm[2].l[r],h),u=Math.max(t.thm[3].l[r],h),l*e<c+u){var o=l*s/(c+u);c*=o,u*=o,_(c+u>0)}t.thm[2].l[r]=Math.min(c,t.thm[2].l[r]),t.thm[3].l[r]=Math.min(u,t.thm[3].l[r])}i*=p.BLKSIZE_s/p.BLKSIZE;for(r=0;r<p.SBMAX_s;r++)for(var a=0;a<3;a++){var l,c,u,h;if(h=t.ATH.cb_s[t.bm_s[r]]*i,l=Math.min(Math.max(t.thm[0].s[r][a],h),Math.max(t.thm[1].s[r][a],h)),c=Math.max(t.thm[2].s[r][a],h),u=Math.max(t.thm[3].s[r][a],h),l*e<c+u){o=l*e/(c+u);c*=o,u*=o,_(c+u>0)}t.thm[2].s[r][a]=Math.min(t.thm[2].s[r][a],c),t.thm[3].s[r][a]=Math.min(t.thm[3].s[r][a],u)}}function W(t,e,n,s,i){var r,o,a=0,l=0;for(r=o=0;r<p.SBMAX_s;++o,++r){var c=t.bo_s[r],u=t.npart_s,h=c<u?c:u;while(o<h)_(e[o]>=0),_(n[o]>=0),a+=e[o],l+=n[o],o++;if(t.en[s].s[r][i]=a,t.thm[s].s[r][i]=l,o>=u){++r;break}_(e[o]>=0),_(n[o]>=0);var f=t.PSY.bo_s_weight[r],d=1-f;a=f*e[o],l=f*n[o],t.en[s].s[r][i]+=a,t.thm[s].s[r][i]+=l,a=d*e[o],l=d*n[o]}for(;r<p.SBMAX_s;++r)t.en[s].s[r][i]=0,t.thm[s].s[r][i]=0}function G(t,e,n,s){var i,r,o=0,a=0;for(i=r=0;i<p.SBMAX_l;++r,++i){var l=t.bo_l[i],c=t.npart_l,u=l<c?l:c;while(r<u)_(e[r]>=0),_(n[r]>=0),o+=e[r],a+=n[r],r++;if(t.en[s].l[i]=o,t.thm[s].l[i]=a,r>=c){++i;break}_(e[r]>=0),_(n[r]>=0);var h=t.PSY.bo_l_weight[i],f=1-h;o=h*e[r],a=h*n[r],t.en[s].l[i]+=o,t.thm[s].l[i]+=a,o=f*e[r],a=f*n[r]}for(;i<p.SBMAX_l;++i)t.en[s].l[i]=0,t.thm[s].l[i]=0}function z(t,e,n,s,i,r){var o,a,l=t.internal_flags;for(a=o=0;a<l.npart_s;++a){for(var c=0,u=0,h=l.numlines_s[a],f=0;f<h;++f,++o){var g=e[r][o];c+=g,u<g&&(u=g)}n[a]=c}for(_(a==l.npart_s),_(129==o),o=a=0;a<l.npart_s;a++){var v=l.s3ind_s[a][0],b=l.s3_ss[o++]*n[v];++v;while(v<=l.s3ind_s[a][1])b+=l.s3_ss[o]*n[v],++o,++v;var y=d*l.nb_s1[i][a];if(s[a]=Math.min(b,y),l.blocktype_old[1&i]==p.SHORT_TYPE){y=m*l.nb_s2[i][a];var w=s[a];s[a]=Math.min(y,w)}l.nb_s2[i][a]=l.nb_s1[i][a],l.nb_s1[i][a]=b,_(s[a]>=0)}for(;a<=p.CBANDS;++a)n[a]=0,s[a]=0}function Z(t,e,n,s){var i=t.internal_flags;t.short_blocks!=o.short_block_coupled||0!=e[0]&&0!=e[1]||(e[0]=e[1]=0);for(var r=0;r<i.channels_out;r++)s[r]=p.NORM_TYPE,t.short_blocks==o.short_block_dispensed&&(e[r]=1),t.short_blocks==o.short_block_forced&&(e[r]=0),0!=e[r]?(_(i.blocktype_old[r]!=p.START_TYPE),i.blocktype_old[r]==p.SHORT_TYPE&&(s[r]=p.STOP_TYPE)):(s[r]=p.SHORT_TYPE,i.blocktype_old[r]==p.NORM_TYPE&&(i.blocktype_old[r]=p.START_TYPE),i.blocktype_old[r]==p.STOP_TYPE&&(i.blocktype_old[r]=p.SHORT_TYPE)),n[r]=i.blocktype_old[r],i.blocktype_old[r]=s[r]}function K(t,e,n){return n>=1?t:n<=0?e:e>0?Math.pow(t/e,n)*e:0}var Q=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function $(t,n){for(var s=309.07,i=0;i<p.SBMAX_s-1;i++)for(var r=0;r<3;r++){var o=t.thm.s[i][r];if(_(i<Q.length),o>0){var l=o*n,c=t.en.s[i][r];c>l&&(c>1e10*l?s+=Q[i]*(10*e):(_(l>0),s+=Q[i]*a.FAST_LOG10(c/l)))}}return s}var J=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function tt(t,n){for(var s=281.0575,i=0;i<p.SBMAX_l-1;i++){var r=t.thm.l[i];if(_(i<J.length),r>0){var o=r*n,l=t.en.l[i];l>o&&(l>1e10*o?s+=J[i]*(10*e):(_(o>0),s+=J[i]*a.FAST_LOG10(l/o)))}}return s}function et(t,e,n,s,i){var r,o;for(r=o=0;r<t.npart_l;++r){var a,l=0,c=0;for(a=0;a<t.numlines_l[r];++a,++o){var u=e[o];_(u>=0),l+=u,c<u&&(c=u)}n[r]=l,s[r]=c,i[r]=l*t.rnumlines_l[r],_(t.rnumlines_l[r]>=0),_(l>=0),_(n[r]>=0),_(s[r]>=0),_(i[r]>=0)}}function nt(t,e,n,s){var i=N.length-1,r=0,o=n[r]+n[r+1];if(_(o>=0),o>0){var a=e[r];a<e[r+1]&&(a=e[r+1]),_(t.numlines_l[r]+t.numlines_l[r+1]-1>0),o=20*(2*a-o)/(o*(t.numlines_l[r]+t.numlines_l[r+1]-1));var l=0|o;l>i&&(l=i),s[r]=l}else s[r]=0;for(r=1;r<t.npart_l-1;r++)if(o=n[r-1]+n[r]+n[r+1],_(o>=0),o>0){a=e[r-1];a<e[r]&&(a=e[r]),a<e[r+1]&&(a=e[r+1]),_(t.numlines_l[r-1]+t.numlines_l[r]+t.numlines_l[r+1]-1>0),o=20*(3*a-o)/(o*(t.numlines_l[r-1]+t.numlines_l[r]+t.numlines_l[r+1]-1));l=0|o;l>i&&(l=i),s[r]=l}else s[r]=0;if(_(r>0),_(r==t.npart_l-1),o=n[r-1]+n[r],_(o>=0),o>0){a=e[r-1];a<e[r]&&(a=e[r]),_(t.numlines_l[r-1]+t.numlines_l[r]-1>0),o=20*(2*a-o)/(o*(t.numlines_l[r-1]+t.numlines_l[r]-1));l=0|o;l>i&&(l=i),s[r]=l}else s[r]=0;_(r==t.npart_l-1)}var st=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function it(e,n,s,i,r,o,l,c){var u=e.internal_flags;if(i<2)t.fft_long(u,l[c],i,n,s);else if(2==i)for(var h=p.BLKSIZE-1;h>=0;--h){var _=l[c+0][h],f=l[c+1][h];l[c+0][h]=(_+f)*a.SQRT2*.5,l[c+1][h]=(_-f)*a.SQRT2*.5}o[0]=k(l[c+0][0]),o[0]*=o[0];for(h=p.BLKSIZE/2-1;h>=0;--h){var d=l[c+0][p.BLKSIZE/2-h],m=l[c+0][p.BLKSIZE/2+h];o[p.BLKSIZE/2-h]=k(.5*(d*d+m*m))}var g=0;for(h=11;h<p.HBLKSIZE;h++)g+=o[h];if(u.tot_ener[i]=g,e.analysis){for(h=0;h<p.HBLKSIZE;h++)u.pinfo.energy[r][i][h]=u.pinfo.energy_save[i][h],u.pinfo.energy_save[i][h]=o[h];u.pinfo.pe[r][i]=u.pe[i]}}function rt(e,n,s,i,r,o,l,c){var u=e.internal_flags;if(0==r&&i<2&&t.fft_short(u,l[c],i,n,s),2==i)for(var h=p.BLKSIZE_s-1;h>=0;--h){var _=l[c+0][r][h],f=l[c+1][r][h];l[c+0][r][h]=(_+f)*a.SQRT2*.5,l[c+1][r][h]=(_-f)*a.SQRT2*.5}o[r][0]=l[c+0][r][0],o[r][0]*=o[r][0];for(h=p.BLKSIZE_s/2-1;h>=0;--h){var d=l[c+0][r][p.BLKSIZE_s/2-h],m=l[c+0][r][p.BLKSIZE_s/2+h];o[r][p.BLKSIZE_s/2-h]=k(.5*(d*d+m*m))}}function ot(t,e,n,s){var i=t.internal_flags;2==t.athaa_loudapprox&&n<2&&(i.loudness_sq[e][n]=i.loudness_sq_save[n],i.loudness_sq_save[n]=M(s,i))}this.L3psycho_anal_ns=function(t,e,r,o,a,f,d,m,g,v){var b,T,A,k,M,R,E,O,B,I,P=t.internal_flags,V=u([2,p.BLKSIZE]),D=u([2,3,p.BLKSIZE_s]),L=c(p.CBANDS+1),F=c(p.CBANDS+1),j=c(p.CBANDS+2),H=h(2),Q=h(2),J=u([2,576]),it=h(p.CBANDS+2),rt=h(p.CBANDS+2);for(l.fill(rt,0),b=P.channels_out,t.mode==MPEGMode.JOINT_STEREO&&(b=4),B=t.VBR==i.vbr_off?0==P.ResvMax?0:P.ResvSize/P.ResvMax*.5:t.VBR==i.vbr_rh||t.VBR==i.vbr_mtrh||t.VBR==i.vbr_mt?.6:1,T=0;T<P.channels_out;T++){var ot=e[T],at=r+576-350-S+192;for(_(st.length==(S-1)/2),k=0;k<576;k++){var lt,ct;for(lt=ot[at+k+10],ct=0,M=0;M<(S-1)/2-1;M+=2)lt+=st[M]*(ot[at+k+M]+ot[at+k+S-M]),ct+=st[M+1]*(ot[at+k+M+1]+ot[at+k+S-M-1]);J[T][k]=lt+ct}a[o][T].en.assign(P.en[T]),a[o][T].thm.assign(P.thm[T]),b>2&&(f[o][T].en.assign(P.en[T+2]),f[o][T].thm.assign(P.thm[T+2]))}for(T=0;T<b;T++){var ut,ht,_t,ft=c(12),pt=[0,0,0,0],dt=c(12),mt=1,gt=c(p.CBANDS),vt=c(p.CBANDS),bt=[0,0,0,0],yt=c(p.HBLKSIZE),wt=u([3,p.HBLKSIZE_s]);for(_(P.npart_s<=p.CBANDS),_(P.npart_l<=p.CBANDS),k=0;k<3;k++)ft[k]=P.nsPsy.last_en_subshort[T][k+6],_(P.nsPsy.last_en_subshort[T][k+4]>0),dt[k]=ft[k]/P.nsPsy.last_en_subshort[T][k+4],pt[0]+=ft[k];if(2==T)for(k=0;k<576;k++){var xt,Tt;xt=J[0][k],Tt=J[1][k],J[0][k]=xt+Tt,J[1][k]=xt-Tt}var St=J[1&T],At=0;for(k=0;k<9;k++){for(var kt=At+64,Mt=1;At<kt;At++)Mt<Math.abs(St[At])&&(Mt=Math.abs(St[At]));P.nsPsy.last_en_subshort[T][k]=ft[k+3]=Mt,pt[1+k/3]+=Mt,Mt>ft[k+3-2]?(_(ft[k+3-2]>0),Mt/=ft[k+3-2]):ft[k+3-2]>10*Mt?(_(Mt>0),Mt=ft[k+3-2]/(10*Mt)):Mt=0,dt[k+3]=Mt}if(t.analysis){var Ct=dt[0];for(k=1;k<12;k++)Ct<dt[k]&&(Ct=dt[k]);P.pinfo.ers[o][T]=P.pinfo.ers_save[T],P.pinfo.ers_save[T]=Ct}for(_t=3==T?P.nsPsy.attackthre_s:P.nsPsy.attackthre,k=0;k<12;k++)0==bt[k/3]&&dt[k]>_t&&(bt[k/3]=k%3+1);for(k=1;k<4;k++){var Rt;pt[k-1]>pt[k]?(_(pt[k]>0),Rt=pt[k-1]/pt[k]):(_(pt[k-1]>0),Rt=pt[k]/pt[k-1]),Rt<1.7&&(bt[k]=0,1==k&&(bt[0]=0))}for(0!=bt[0]&&0!=P.nsPsy.lastAttacks[T]&&(bt[0]=0),3!=P.nsPsy.lastAttacks[T]&&bt[0]+bt[1]+bt[2]+bt[3]==0||(mt=0,0!=bt[1]&&0!=bt[0]&&(bt[1]=0),0!=bt[2]&&0!=bt[1]&&(bt[2]=0),0!=bt[3]&&0!=bt[2]&&(bt[3]=0)),T<2?Q[T]=mt:0==mt&&(Q[0]=Q[1]=0),g[T]=P.tot_ener[T],ht=D,ut=V,C(t,yt,wt,ut,1&T,ht,1&T,o,T,e,r),et(P,yt,L,gt,vt),nt(P,gt,vt,it),O=0;O<3;O++){var Et,Ot;for(z(t,wt,F,j,T,O),W(P,F,j,T,O),E=0;E<p.SBMAX_s;E++){if(Ot=P.thm[T].s[E][O],Ot*=y,bt[O]>=2||1==bt[O+1]){var Bt=0!=O?O-1:2;Mt=K(P.thm[T].s[E][Bt],Ot,w*B);Ot=Math.min(Ot,Mt)}if(1==bt[O]){Bt=0!=O?O-1:2,Mt=K(P.thm[T].s[E][Bt],Ot,x*B);Ot=Math.min(Ot,Mt)}else if(0!=O&&3==bt[O-1]||0==O&&3==P.nsPsy.lastAttacks[T]){Bt=2!=O?O+1:0,Mt=K(P.thm[T].s[E][Bt],Ot,x*B);Ot=Math.min(Ot,Mt)}Et=ft[3*O+3]+ft[3*O+4]+ft[3*O+5],6*ft[3*O+5]<Et&&(Ot*=.5,6*ft[3*O+4]<Et&&(Ot*=.5)),P.thm[T].s[E][O]=Ot}}for(P.nsPsy.lastAttacks[T]=bt[2],R=0,A=0;A<P.npart_l;A++){var It=P.s3ind[A][0],Pt=L[It]*N[it[It]],Nt=P.s3_ll[R++]*Pt;while(++It<=P.s3ind[A][1])Pt=L[It]*N[it[It]],Nt=q(Nt,P.s3_ll[R++]*Pt,It,It-A,P,0);Nt*=.158489319246111,P.blocktype_old[1&T]==p.SHORT_TYPE?j[A]=Nt:j[A]=K(Math.min(Nt,Math.min(n*P.nb_1[T][A],s*P.nb_2[T][A])),Nt,B),P.nb_2[T][A]=P.nb_1[T][A],P.nb_1[T][A]=Nt}for(;A<=p.CBANDS;++A)L[A]=0,j[A]=0;G(P,L,j,T)}(t.mode!=MPEGMode.STEREO&&t.mode!=MPEGMode.JOINT_STEREO||t.interChRatio>0&&X(t,t.interChRatio),t.mode==MPEGMode.JOINT_STEREO)&&(U(P),I=t.msfix,Math.abs(I)>0&&Y(P,I,t.ATHlower*P.ATH.adjust));for(Z(t,Q,v,H),T=0;T<b;T++){var Vt,Dt,Lt,Ft=0;T>1?(Vt=m,Ft=-2,Dt=p.NORM_TYPE,v[0]!=p.SHORT_TYPE&&v[1]!=p.SHORT_TYPE||(Dt=p.SHORT_TYPE),Lt=f[o][T-2]):(Vt=d,Ft=0,Dt=v[T],Lt=a[o][T]),Dt==p.SHORT_TYPE?Vt[Ft+T]=$(Lt,P.masking_lower):Vt[Ft+T]=tt(Lt,P.masking_lower),t.analysis&&(P.pinfo.pe[o][T]=Vt[Ft+T])}return 0};var at=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function lt(t,e,n,s,i,r,o,a,l,h){for(var f=u([2,576]),p=t.internal_flags,d=p.channels_out,m=t.mode==MPEGMode.JOINT_STEREO?4:d,g=0;g<d;g++){firbuf=e[g];var v=n+576-350-S+192;_(at.length==(S-1)/2);for(var b=0;b<576;b++){var y,w;y=firbuf[v+b+10],w=0;for(var x=0;x<(S-1)/2-1;x+=2)y+=at[x]*(firbuf[v+b+x]+firbuf[v+b+S-x]),w+=at[x+1]*(firbuf[v+b+x+1]+firbuf[v+b+S-x-1]);f[g][b]=y+w}i[s][g].en.assign(p.en[g]),i[s][g].thm.assign(p.thm[g]),m>2&&(r[s][g].en.assign(p.en[g+2]),r[s][g].thm.assign(p.thm[g+2]))}for(g=0;g<m;g++){var T=c(12),A=c(12),k=[0,0,0,0],M=f[1&g],C=0,R=3==g?p.nsPsy.attackthre_s:p.nsPsy.attackthre,E=1;if(2==g)for(b=0,x=576;x>0;++b,--x){var O=f[0][b],B=f[1][b];f[0][b]=O+B,f[1][b]=O-B}for(b=0;b<3;b++)A[b]=p.nsPsy.last_en_subshort[g][b+6],_(p.nsPsy.last_en_subshort[g][b+4]>0),T[b]=A[b]/p.nsPsy.last_en_subshort[g][b+4],k[0]+=A[b];for(b=0;b<9;b++){for(var I=C+64,P=1;C<I;C++)P<Math.abs(M[C])&&(P=Math.abs(M[C]));p.nsPsy.last_en_subshort[g][b]=A[b+3]=P,k[1+b/3]+=P,P>A[b+3-2]?(_(A[b+3-2]>0),P/=A[b+3-2]):A[b+3-2]>10*P?(_(P>0),P=A[b+3-2]/(10*P)):P=0,T[b+3]=P}for(b=0;b<3;++b){var N=A[3*b+3]+A[3*b+4]+A[3*b+5],V=1;6*A[3*b+5]<N&&(V*=.5,6*A[3*b+4]<N&&(V*=.5)),a[g][b]=V}if(t.analysis){var D=T[0];for(b=1;b<12;b++)D<T[b]&&(D=T[b]);p.pinfo.ers[s][g]=p.pinfo.ers_save[g],p.pinfo.ers_save[g]=D}for(b=0;b<12;b++)0==l[g][b/3]&&T[b]>R&&(l[g][b/3]=b%3+1);for(b=1;b<4;b++){var L=k[b-1],F=k[b],q=Math.max(L,F);q<4e4&&L<1.7*F&&F<1.7*L&&(1==b&&l[g][0]<=l[g][b]&&(l[g][0]=0),l[g][b]=0)}l[g][0]<=p.nsPsy.lastAttacks[g]&&(l[g][0]=0),3!=p.nsPsy.lastAttacks[g]&&l[g][0]+l[g][1]+l[g][2]+l[g][3]==0||(E=0,0!=l[g][1]&&0!=l[g][0]&&(l[g][1]=0),0!=l[g][2]&&0!=l[g][1]&&(l[g][2]=0),0!=l[g][3]&&0!=l[g][2]&&(l[g][3]=0)),g<2?h[g]=E:0==E&&(h[0]=h[1]=0),o[g]=p.tot_ener[g]}}function ct(t,e,n){if(0==n)for(var s=0;s<t.npart_s;s++)t.nb_s2[e][s]=t.nb_s1[e][s],t.nb_s1[e][s]=0}function ut(t,e){for(var n=0;n<t.npart_l;n++)t.nb_2[e][n]=t.nb_1[e][n],t.nb_1[e][n]=0}function ht(t,e,n,s){var i=N.length-1,r=0,o=n[r]+n[r+1];if(_(o>=0),o>0){var a=e[r];a<e[r+1]&&(a=e[r+1]),_(t.numlines_s[r]+t.numlines_s[r+1]-1>0),o=20*(2*a-o)/(o*(t.numlines_s[r]+t.numlines_s[r+1]-1));var l=0|o;l>i&&(l=i),s[r]=l}else s[r]=0;for(r=1;r<t.npart_s-1;r++)if(o=n[r-1]+n[r]+n[r+1],_(r+1<t.npart_s),_(o>=0),o>0){a=e[r-1];a<e[r]&&(a=e[r]),a<e[r+1]&&(a=e[r+1]),_(t.numlines_s[r-1]+t.numlines_s[r]+t.numlines_s[r+1]-1>0),o=20*(3*a-o)/(o*(t.numlines_s[r-1]+t.numlines_s[r]+t.numlines_s[r+1]-1));l=0|o;l>i&&(l=i),s[r]=l}else s[r]=0;if(_(r>0),_(r==t.npart_s-1),o=n[r-1]+n[r],_(o>=0),o>0){a=e[r-1];a<e[r]&&(a=e[r]),_(t.numlines_s[r-1]+t.numlines_s[r]-1>0),o=20*(2*a-o)/(o*(t.numlines_s[r-1]+t.numlines_s[r]-1));l=0|o;l>i&&(l=i),s[r]=l}else s[r]=0;_(r==t.npart_s-1)}function _t(t,e,n,s,i,r){var o,a,l,u=t.internal_flags,h=new float[p.CBANDS],f=c(p.CBANDS),d=new int[p.CBANDS];for(l=a=0;l<u.npart_s;++l){var m=0,g=0,v=u.numlines_s[l];for(o=0;o<v;++o,++a){var b=e[r][a];m+=b,g<b&&(g=b)}n[l]=m,_(m>=0),h[l]=g,_(v>0),f[l]=m/v,_(f[l]>=0)}for(_(l==u.npart_s),_(129==a);l<p.CBANDS;++l)h[l]=0,f[l]=0;for(ht(u,h,f,d),a=l=0;l<u.npart_s;l++){var y,w,x,T,S,A=u.s3ind_s[l][0],k=u.s3ind_s[l][1];y=d[A],w=1,T=u.s3_ss[a]*n[A]*N[d[A]],++a,++A;while(A<=k)y+=d[A],w+=1,x=u.s3_ss[a]*n[A]*N[d[A]],T=H(T,x,A-l),++a,++A;y=(1+2*y)/(2*w),S=.5*N[y],T*=S,s[l]=T,u.nb_s2[i][l]=u.nb_s1[i][l],u.nb_s1[i][l]=T,x=h[l],x*=u.minval_s[l],x*=S,s[l]>x&&(s[l]=x),u.masking_lower>1&&(s[l]*=u.masking_lower),s[l]>n[l]&&(s[l]=n[l]),u.masking_lower<1&&(s[l]*=u.masking_lower),_(s[l]>=0)}for(;l<p.CBANDS;++l)n[l]=0,s[l]=0}function ft(t,e,i,r,o){var a,l=c(p.CBANDS),u=c(p.CBANDS),f=h(p.CBANDS+2);et(t,e,i,l,u),nt(t,l,u,f);var d=0;for(a=0;a<t.npart_l;a++){var m,g,v,b,y=t.s3ind[a][0],w=t.s3ind[a][1],T=0,S=0;T=f[y],S+=1,g=t.s3_ll[d]*i[y]*N[f[y]],++d,++y;while(y<=w)T+=f[y],S+=1,m=t.s3_ll[d]*i[y]*N[f[y]],b=H(g,m,y-a),g=b,++d,++y;if(T=(1+2*T)/(2*S),v=.5*N[T],g*=v,t.blocktype_old[1&o]==p.SHORT_TYPE){var A=n*t.nb_1[o][a];r[a]=A>0?Math.min(g,A):Math.min(g,i[a]*x)}else{var k=s*t.nb_2[o][a],M=n*t.nb_1[o][a];k<=0&&(k=g),M<=0&&(M=g),A=t.blocktype_old[1&o]==p.NORM_TYPE?Math.min(M,k):M,r[a]=Math.min(g,A)}t.nb_2[o][a]=t.nb_1[o][a],t.nb_1[o][a]=g,m=l[a],m*=t.minval_l[a],m*=v,r[a]>m&&(r[a]=m),t.masking_lower>1&&(r[a]*=t.masking_lower),r[a]>i[a]&&(r[a]=i[a]),t.masking_lower<1&&(r[a]*=t.masking_lower),_(r[a]>=0)}for(;a<p.CBANDS;++a)i[a]=0,r[a]=0}function pt(t,e){var n=t.internal_flags;t.short_blocks!=o.short_block_coupled||0!=e[0]&&0!=e[1]||(e[0]=e[1]=0);for(var s=0;s<n.channels_out;s++)t.short_blocks==o.short_block_dispensed&&(e[s]=1),t.short_blocks==o.short_block_forced&&(e[s]=0)}function dt(t,e,n){for(var s=t.internal_flags,i=0;i<s.channels_out;i++){var r=p.NORM_TYPE;0!=e[i]?(_(s.blocktype_old[i]!=p.START_TYPE),s.blocktype_old[i]==p.SHORT_TYPE&&(r=p.STOP_TYPE)):(r=p.SHORT_TYPE,s.blocktype_old[i]==p.NORM_TYPE&&(s.blocktype_old[i]=p.START_TYPE),s.blocktype_old[i]==p.STOP_TYPE&&(s.blocktype_old[i]=p.SHORT_TYPE)),n[i]=s.blocktype_old[i],s.blocktype_old[i]=r}}function mt(t,e,n,s,i,r,o){for(var a,l,c=2*r,u=r>0?Math.pow(10,i):1,h=0;h<o;++h){var f=t[2][h],p=t[3][h],d=e[0][h],m=e[1][h],g=e[2][h],v=e[3][h];if(d<=1.58*m&&m<=1.58*d){var b=n[h]*p,y=n[h]*f;l=Math.max(g,Math.min(v,b)),a=Math.max(v,Math.min(g,y))}else l=g,a=v;if(r>0){var w,x,T=s[h]*u;if(w=Math.min(Math.max(d,T),Math.max(m,T)),g=Math.max(l,T),v=Math.max(a,T),x=g+v,x>0&&w*c<x){var S=w*c/x;g*=S,v*=S,_(x>0)}l=Math.min(g,l),a=Math.min(v,a)}l>f&&(l=f),a>p&&(a=p),e[2][h]=l,e[3][h]=a}}function gt(t,e){var n,s=t;return n=s>=0?27*-s:s*e,n<=-72?0:Math.exp(n*A)}function vt(t){var e=0,n=0,s=0;for(s=0;gt(s,t)>1e-20;s-=1);i=s,r=0;while(Math.abs(r-i)>1e-12)s=(r+i)/2,gt(s,t)>0?r=s:i=s;e=i;var i,r;s=0;for(s=0;gt(s,t)>1e-20;s+=1);i=0,r=s;while(Math.abs(r-i)>1e-12)s=(r+i)/2,gt(s,t)>0?i=s:r=s;n=r;var o,a=0,l=1e3;for(o=0;o<=l;++o){s=e+o*(n-e)/l;var c=gt(s,t);a+=c}var u=(l+1)/(a*(n-e));return u}function bt(t){var e,n,s,i;return e=t,e*=e>=0?3:1.5,e>=.5&&e<=2.5?(i=e-.5,n=8*(i*i-2*i)):n=0,e+=.474,s=15.811389+7.5*e-17.5*Math.sqrt(1+e*e),s<=-60?0:(e=Math.exp((n+s)*A),e/=.6609193,e)}function yt(t){return t<0&&(t=0),t*=.001,13*Math.atan(.76*t)+3.5*Math.atan(t*t/56.25)}function wt(t,e,n,s,i,r,o,a,l,u,f,d){var m,v=c(p.CBANDS+1),b=a/(d>15?1152:384),y=h(p.HBLKSIZE);a/=l;var w=0,x=0;for(m=0;m<p.CBANDS;m++){var T;for(B=yt(a*w),v[m]=a*w,T=w;yt(a*T)-B<g&&T<=l/2;T++);t[m]=T-w,x=m+1;while(w<T)_(w<p.HBLKSIZE),y[w++]=m;if(w>l/2){w=l/2,++m;break}}_(m<p.CBANDS),v[m]=a*w;for(var S=0;S<d;S++){var A,k,M,C,R;M=u[S],C=u[S+1],A=0|Math.floor(.5+f*(M-.5)),A<0&&(A=0),k=0|Math.floor(.5+f*(C-.5)),k>l/2&&(k=l/2),n[S]=(y[A]+y[k])/2,e[S]=y[k];var E=b*C;o[S]=(E-v[e[S]])/(v[e[S]+1]-v[e[S]]),o[S]<0?o[S]=0:o[S]>1&&(o[S]=1),R=yt(a*u[S]*f),R=Math.min(R,15.5)/15.5,r[S]=Math.pow(10,1.25*(1-Math.cos(Math.PI*R))-2.5)}w=0;for(var O=0;O<x;O++){var B,I,P=t[O];B=yt(a*w),I=yt(a*(w+P-1)),s[O]=.5*(B+I),B=yt(a*(w-.5)),I=yt(a*(w+P-.5)),i[O]=I-B,w+=P}return x}function xt(t,e,n,s,i,r){var o,a=u([p.CBANDS,p.CBANDS]),l=0;if(r)for(var h=0;h<e;h++)for(o=0;o<e;o++){var _=bt(n[h]-n[o])*s[o];a[h][o]=_*i[h]}else for(o=0;o<e;o++){var f=15+Math.min(21/n[o],12),d=vt(f);for(h=0;h<e;h++){_=d*gt(n[h]-n[o],f)*s[o];a[h][o]=_*i[h]}}for(h=0;h<e;h++){for(o=0;o<e;o++)if(a[h][o]>0)break;for(t[h][0]=o,o=e-1;o>0;o--)if(a[h][o]>0)break;t[h][1]=o,l+=t[h][1]-t[h][0]+1}var m=c(l),g=0;for(h=0;h<e;h++)for(o=t[h][0];o<=t[h][1];o++)m[g++]=a[h][o];return m}function Tt(t){var e=yt(t);return e=Math.min(e,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*e))-2.5)}function St(t,e){t<-.3&&(t=3410),t/=1e3,t=Math.max(.1,t);var n=3.64*Math.pow(t,-.8)-6.8*Math.exp(-.6*Math.pow(t-3.4,2))+6*Math.exp(-.15*Math.pow(t-8.7,2))+.001*(.6+.04*e)*Math.pow(t,4);return n}this.L3psycho_anal_vbr=function(t,e,n,s,i,r,o,a,l,_){var f,d,m=t.internal_flags,g=c(p.HBLKSIZE),v=u([3,p.HBLKSIZE_s]),b=u([2,p.BLKSIZE]),T=u([2,3,p.BLKSIZE_s]),S=u([4,p.CBANDS]),A=u([4,p.CBANDS]),k=u([4,3]),M=.6,C=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],R=h(2),E=t.mode==MPEGMode.JOINT_STEREO?4:m.channels_out;lt(t,e,n,s,i,r,l,k,C,R),pt(t,R);for(var O=0;O<E;O++){var B=1&O;f=b,it(t,e,n,O,s,g,f,B),ot(t,s,O,g),0!=R[B]?ft(m,g,S[O],A[O],O):ut(m,O)}R[0]+R[1]==2&&t.mode==MPEGMode.JOINT_STEREO&&mt(S,A,m.mld_cb_l,m.ATH.cb_l,t.ATHlower*m.ATH.adjust,t.msfix,m.npart_l);for(O=0;O<E;O++){B=1&O;0!=R[B]&&G(m,S[O],A[O],O)}for(var I=0;I<3;I++){for(O=0;O<E;++O){B=1&O;0!=R[B]?ct(m,O,I):(d=T,rt(t,e,n,O,I,v,d,B),_t(t,v,S[O],A[O],O,I))}R[0]+R[1]==0&&t.mode==MPEGMode.JOINT_STEREO&&mt(S,A,m.mld_cb_s,m.ATH.cb_s,t.ATHlower*m.ATH.adjust,t.msfix,m.npart_s);for(O=0;O<E;++O){B=1&O;0==R[B]&&W(m,S[O],A[O],O,I)}}for(O=0;O<E;O++){B=1&O;if(0==R[B])for(var P=0;P<p.SBMAX_s;P++){var N=c(3);for(I=0;I<3;I++){var V=m.thm[O].s[P][I];if(V*=y,C[O][I]>=2||1==C[O][I+1]){var D=0!=I?I-1:2,L=K(m.thm[O].s[P][D],V,w*M);V=Math.min(V,L)}else if(1==C[O][I]){D=0!=I?I-1:2,L=K(m.thm[O].s[P][D],V,x*M);V=Math.min(V,L)}else if(0!=I&&3==C[O][I-1]||0==I&&3==m.nsPsy.lastAttacks[O]){D=2!=I?I+1:0,L=K(m.thm[O].s[P][D],V,x*M);V=Math.min(V,L)}V*=k[O][I],N[I]=V}for(I=0;I<3;I++)m.thm[O].s[P][I]=N[I]}}for(O=0;O<E;O++)m.nsPsy.lastAttacks[O]=C[O][2];dt(t,R,_);for(O=0;O<E;O++){var F,q,j,H;O>1?(F=a,q=-2,j=p.NORM_TYPE,_[0]!=p.SHORT_TYPE&&_[1]!=p.SHORT_TYPE||(j=p.SHORT_TYPE),H=r[s][O-2]):(F=o,q=0,j=_[O],H=i[s][O]),j==p.SHORT_TYPE?F[q+O]=$(H,m.masking_lower):F[q+O]=tt(H,m.masking_lower),t.analysis&&(m.pinfo.pe[s][O]=F[q+O])}return 0},this.psymodel_init=function(n){var s,o=n.internal_flags,a=!0,l=13,u=24,h=0,f=0,d=-8.25,m=-4.5,g=c(p.CBANDS),v=c(p.CBANDS),y=c(p.CBANDS),w=n.out_samplerate;switch(n.experimentalZ){default:case 0:a=!0;break;case 1:a=n.VBR!=i.vbr_mtrh&&n.VBR!=i.vbr_mt;break;case 2:a=!1;break;case 3:l=8,h=-1.75,f=-.0125,d=-8.25,m=-2.25;break}for(o.ms_ener_ratio_old=.25,o.blocktype_old[0]=o.blocktype_old[1]=p.NORM_TYPE,s=0;s<4;++s){for(var x=0;x<p.CBANDS;++x)o.nb_1[s][x]=1e20,o.nb_2[s][x]=1e20,o.nb_s1[s][x]=o.nb_s2[s][x]=1;for(var S=0;S<p.SBMAX_l;S++)o.en[s].l[S]=1e20,o.thm[s].l[S]=1e20;for(x=0;x<3;++x){for(S=0;S<p.SBMAX_s;S++)o.en[s].s[S][x]=1e20,o.thm[s].s[S][x]=1e20;o.nsPsy.lastAttacks[s]=0}for(x=0;x<9;x++)o.nsPsy.last_en_subshort[s][x]=10}for(o.loudness_sq_save[0]=o.loudness_sq_save[1]=0,o.npart_l=wt(o.numlines_l,o.bo_l,o.bm_l,g,v,o.mld_l,o.PSY.bo_l_weight,w,p.BLKSIZE,o.scalefac_band.l,p.BLKSIZE/1152,p.SBMAX_l),_(o.npart_l<p.CBANDS),s=0;s<o.npart_l;s++){var A=h;g[s]>=l&&(A=f*(g[s]-l)/(u-l)+h*(u-g[s])/(u-l)),y[s]=Math.pow(10,A/10),o.numlines_l[s]>0?o.rnumlines_l[s]=1/o.numlines_l[s]:o.rnumlines_l[s]=0}o.s3_ll=xt(o.s3ind,o.npart_l,g,v,y,a);var k;x=0;for(s=0;s<o.npart_l;s++){R=r.MAX_VALUE;for(var M=0;M<o.numlines_l[s];M++,x++){var C=w*x/(1e3*p.BLKSIZE);E=this.ATHformula(1e3*C,n)-20,E=Math.pow(10,.1*E),E*=o.numlines_l[s],R>E&&(R=E)}o.ATH.cb_l[s]=R,R=20*g[s]/10-20,R>6&&(R=100),R<-15&&(R=-15),R-=8,o.minval_l[s]=Math.pow(10,R/10)*o.numlines_l[s]}for(o.npart_s=wt(o.numlines_s,o.bo_s,o.bm_s,g,v,o.mld_s,o.PSY.bo_s_weight,w,p.BLKSIZE_s,o.scalefac_band.s,p.BLKSIZE_s/384,p.SBMAX_s),_(o.npart_s<p.CBANDS),x=0,s=0;s<o.npart_s;s++){var R;A=d;g[s]>=l&&(A=m*(g[s]-l)/(u-l)+d*(u-g[s])/(u-l)),y[s]=Math.pow(10,A/10),R=r.MAX_VALUE;for(M=0;M<o.numlines_s[s];M++,x++){var E;C=w*x/(1e3*p.BLKSIZE_s);E=this.ATHformula(1e3*C,n)-20,E=Math.pow(10,.1*E),E*=o.numlines_s[s],R>E&&(R=E)}o.ATH.cb_s[s]=R,R=7*g[s]/12-7,g[s]>12&&(R*=1+3.1*Math.log(1+R)),g[s]<12&&(R*=1+2.3*Math.log(1-R)),R<-15&&(R=-15),R-=8,o.minval_s[s]=Math.pow(10,R/10)*o.numlines_s[s]}o.s3_ss=xt(o.s3ind_s,o.npart_s,g,v,y,a),V(),t.init_fft(o),o.decay=Math.exp(-1*e/(b*w/192)),k=T,0!=(2&n.exp_nspsytune)&&(k=1),Math.abs(n.msfix)>0&&(k=n.msfix),n.msfix=k;for(var O=0;O<o.npart_l;O++)o.s3ind[O][1]>o.npart_l-1&&(o.s3ind[O][1]=o.npart_l-1);var B=576*o.mode_gr/w;if(o.ATH.decay=Math.pow(10,-1.2*B),o.ATH.adjust=.01,o.ATH.adjustLimit=1,_(o.bo_l[p.SBMAX_l-1]<=o.npart_l),_(o.bo_s[p.SBMAX_s-1]<=o.npart_s),-1!=n.ATHtype){var I=n.out_samplerate/p.BLKSIZE,P=0;for(C=0,s=0;s<p.BLKSIZE/2;++s)C+=I,o.ATH.eql_w[s]=1/Math.pow(10,this.ATHformula(C,n)/10),P+=o.ATH.eql_w[s];for(P=1/P,s=p.BLKSIZE/2;--s>=0;)o.ATH.eql_w[s]*=P}for(O=x=0;O<o.npart_s;++O)for(s=0;s<o.numlines_s[O];++s)++x;_(129==x);for(O=x=0;O<o.npart_l;++O)for(s=0;s<o.numlines_l[O];++s)++x;for(_(513==x),x=0,s=0;s<o.npart_l;s++){C=w*(x+o.numlines_l[s]/2)/(1*p.BLKSIZE);o.mld_cb_l[s]=Tt(C),x+=o.numlines_l[s]}for(;s<p.CBANDS;++s)o.mld_cb_l[s]=1;for(x=0,s=0;s<o.npart_s;s++){C=w*(x+o.numlines_s[s]/2)/(1*p.BLKSIZE_s);o.mld_cb_s[s]=Tt(C),x+=o.numlines_s[s]}for(;s<p.CBANDS;++s)o.mld_cb_s[s]=1;return 0},this.ATHformula=function(t,e){var n;switch(e.ATHtype){case 0:n=St(t,9);break;case 1:n=St(t,-1);break;case 2:n=St(t,0);break;case 3:n=St(t,1)+6;break;case 4:n=St(t,e.ATHcurve);break;default:n=St(t,0);break}return n}}t.exports=d},9833:function(t,e,n){var s=n(1038),i=s.System,r=s.VbrMode,o=(s.Float,s.ShortBlock,s.Util),a=s.Arrays,l=(s.new_array_n,s.new_byte,s.new_double,s.new_float),c=(s.new_float_n,s.new_int,s.new_int_n,s.assert),u=n(7095),h=n(2711),_=n(3449),f=n(687),p=n(9438),d=n(354);function m(){var t,e,n;this.rv=null,this.qupvt=null;var s,m=new u;function g(t,e,n,s){s=0;for(var i=0;i<=n;++i){var r=Math.abs(t.xr[i]);s+=r,e[i]=Math.sqrt(r*Math.sqrt(r)),e[i]>t.xrpow_max&&(t.xrpow_max=e[i])}return s}function v(t,e){var s=t.ATH,i=e.xr;if(e.block_type!=f.SHORT_TYPE)for(var r=!1,o=f.PSFB21-1;o>=0&&!r;o--){var a=t.scalefac_band.psfb21[o],l=t.scalefac_band.psfb21[o+1],c=n.athAdjust(s.adjust,s.psfb21[o],s.floor);t.nsPsy.longfact[21]>1e-12&&(c*=t.nsPsy.longfact[21]);for(var u=l-1;u>=a;u--){if(!(Math.abs(i[u])<c)){r=!0;break}i[u]=0}}else for(var h=0;h<3;h++)for(r=!1,o=f.PSFB12-1;o>=0&&!r;o--){a=3*t.scalefac_band.s[12]+(t.scalefac_band.s[13]-t.scalefac_band.s[12])*h+(t.scalefac_band.psfb12[o]-t.scalefac_band.psfb12[0]),l=a+(t.scalefac_band.psfb12[o+1]-t.scalefac_band.psfb12[o]);var _=n.athAdjust(s.adjust,s.psfb12[o],s.floor);t.nsPsy.shortfact[12]>1e-12&&(_*=t.nsPsy.shortfact[12]);for(u=l-1;u>=a;u--){if(!(Math.abs(i[u])<_)){r=!0;break}i[u]=0}}}function b(t){this.ordinal=t}function y(t,e,n,i,r){var o,a=t.CurrentStep[i],l=!1,u=t.OldValue[i],h=b.BINSEARCH_NONE;for(e.global_gain=u,n-=e.part2_length,c(0!=a);;){var _;if(o=s.count_bits(t,r,e,null),1==a||o==n)break;o>n?(h==b.BINSEARCH_DOWN&&(l=!0),l&&(a/=2),h=b.BINSEARCH_UP,_=a):(h==b.BINSEARCH_UP&&(l=!0),l&&(a/=2),h=b.BINSEARCH_DOWN,_=-a),e.global_gain+=_,e.global_gain<0&&(e.global_gain=0,l=!0),e.global_gain>255&&(e.global_gain=255,l=!0)}c(e.global_gain>=0),c(e.global_gain<256);while(o>n&&e.global_gain<255)e.global_gain++,o=s.count_bits(t,r,e,null);return t.CurrentStep[i]=u-e.global_gain>=4?4:2,t.OldValue[i]=e.global_gain,e.part2_3_length=o,o}function w(t){for(var e=0;e<t.sfbmax;e++)if(t.scalefac[e]+t.subblock_gain[t.window[e]]==0)return!1;return!0}function x(t){return o.FAST_LOG10(.368+.632*t*t*t)}function T(t,e){for(var n=1e-37,s=0;s<e.psymax;s++)n+=x(t[s]);return Math.max(1e-20,n)}function S(t,e,n,s,i){var r;switch(t){default:case 9:e.over_count>0?(r=n.over_SSD<=e.over_SSD,n.over_SSD==e.over_SSD&&(r=n.bits<e.bits)):r=n.max_noise<0&&10*n.max_noise+n.bits<=10*e.max_noise+e.bits;break;case 0:r=n.over_count<e.over_count||n.over_count==e.over_count&&n.over_noise<e.over_noise||n.over_count==e.over_count&&BitStream.EQ(n.over_noise,e.over_noise)&&n.tot_noise<e.tot_noise;break;case 8:n.max_noise=T(i,s);case 1:r=n.max_noise<e.max_noise;break;case 2:r=n.tot_noise<e.tot_noise;break;case 3:r=n.tot_noise<e.tot_noise&&n.max_noise<e.max_noise;break;case 4:r=n.max_noise<=0&&e.max_noise>.2||n.max_noise<=0&&e.max_noise<0&&e.max_noise>n.max_noise-.2&&n.tot_noise<e.tot_noise||n.max_noise<=0&&e.max_noise>0&&e.max_noise>n.max_noise-.2&&n.tot_noise<e.tot_noise+e.over_noise||n.max_noise>0&&e.max_noise>-.05&&e.max_noise>n.max_noise-.1&&n.tot_noise+n.over_noise<e.tot_noise+e.over_noise||n.max_noise>0&&e.max_noise>-.1&&e.max_noise>n.max_noise-.15&&n.tot_noise+n.over_noise+n.over_noise<e.tot_noise+e.over_noise+e.over_noise;break;case 5:r=n.over_noise<e.over_noise||BitStream.EQ(n.over_noise,e.over_noise)&&n.tot_noise<e.tot_noise;break;case 6:r=n.over_noise<e.over_noise||BitStream.EQ(n.over_noise,e.over_noise)&&(n.max_noise<e.max_noise||BitStream.EQ(n.max_noise,e.max_noise)&&n.tot_noise<=e.tot_noise);break;case 7:r=n.over_count<e.over_count||n.over_noise<e.over_noise;break}return 0==e.over_count&&(r=r&&n.bits<e.bits),r}function A(t,e,n,s,i){var r,o=t.internal_flags;r=0==e.scalefac_scale?1.2968395546510096:1.6817928305074292;for(var a=0,l=0;l<e.sfbmax;l++)a<n[l]&&(a=n[l]);var c=o.noise_shaping_amp;switch(3==c&&(c=i?2:1),c){case 2:break;case 1:a>1?a=Math.pow(a,.5):a*=.95;break;case 0:default:a>1?a=1:a*=.95;break}var u=0;for(l=0;l<e.sfbmax;l++){var h,_=e.width[l];if(u+=_,!(n[l]<a)){if(0!=(2&o.substep_shaping)&&(o.pseudohalf[l]=0==o.pseudohalf[l]?1:0,0==o.pseudohalf[l]&&2==o.noise_shaping_amp))return;for(e.scalefac[l]++,h=-_;h<0;h++)s[u+h]*=r,s[u+h]>e.xrpow_max&&(e.xrpow_max=s[u+h]);if(2==o.noise_shaping_amp)return}}}function k(t,e){for(var s=1.2968395546510096,i=0,r=0;r<t.sfbmax;r++){var o=t.width[r],a=t.scalefac[r];if(0!=t.preflag&&(a+=n.pretab[r]),i+=o,0!=(1&a)){a++;for(var l=-o;l<0;l++)e[i+l]*=s,e[i+l]>t.xrpow_max&&(t.xrpow_max=e[i+l])}t.scalefac[r]=a>>1}t.preflag=0,t.scalefac_scale=1}function M(t,e,s){var i,r=e.scalefac;for(i=0;i<e.sfb_lmax;i++)if(r[i]>=16)return!0;for(var o=0;o<3;o++){var a=0,l=0;for(i=e.sfb_lmax+o;i<e.sfbdivide;i+=3)a<r[i]&&(a=r[i]);for(;i<e.sfbmax;i+=3)l<r[i]&&(l=r[i]);if(!(a<16&&l<8)){if(e.subblock_gain[o]>=7)return!0;e.subblock_gain[o]++;var u=t.scalefac_band.l[e.sfb_lmax];for(i=e.sfb_lmax+o;i<e.sfbmax;i+=3){var h=e.width[i],_=r[i];if(c(_>=0),_-=4>>e.scalefac_scale,_>=0)r[i]=_,u+=3*h;else{r[i]=0;var f=210+(_<<e.scalefac_scale+1);d=n.IPOW20(f),u+=h*(o+1);for(var p=-h;p<0;p++)s[u+p]*=d,s[u+p]>e.xrpow_max&&(e.xrpow_max=s[u+p]);u+=h*(3-o-1)}}var d=n.IPOW20(202);u+=e.width[i]*(o+1);for(p=-e.width[i];p<0;p++)s[u+p]*=d,s[u+p]>e.xrpow_max&&(e.xrpow_max=s[u+p])}}return!1}function C(t,e,n,i,r){var o=t.internal_flags;A(t,e,n,i,r);var l=w(e);return!l&&(l=2==o.mode_gr?s.scale_bitcount(e):s.scale_bitcount_lsf(o,e),!l||(o.noise_shaping>1&&(a.fill(o.pseudohalf,0),0==e.scalefac_scale?(k(e,i),l=!1):e.block_type==f.SHORT_TYPE&&o.subblock_gain>0&&(l=M(o,e,i)||w(e))),l||(l=2==o.mode_gr?s.scale_bitcount(e):s.scale_bitcount_lsf(o,e)),!l))}this.setModules=function(i,r,o,a){t=i,e=r,this.rv=r,n=o,this.qupvt=o,s=a,m.setModules(n,s)},this.ms_convert=function(t,e){for(var n=0;n<576;++n){var s=t.tt[e][0].xr[n],i=t.tt[e][1].xr[n];t.tt[e][0].xr[n]=(s+i)*(.5*o.SQRT2),t.tt[e][1].xr[n]=(s-i)*(.5*o.SQRT2)}},this.init_xrpow=function(t,e,n){var s=0,i=0|e.max_nonzero_coeff;if(c(null!=n),e.xrpow_max=0,c(0<=i&&i<=575),a.fill(n,i,576,0),s=g(e,n,i,s),s>1e-20){var r=0;0!=(2&t.substep_shaping)&&(r=1);for(var o=0;o<e.psymax;o++)t.pseudohalf[o]=r;return!0}return a.fill(e.l3_enc,0,576,0),!1},this.init_outer_loop=function(t,e){e.part2_3_length=0,e.big_values=0,e.count1=0,e.global_gain=210,e.scalefac_compress=0,e.table_select[0]=0,e.table_select[1]=0,e.table_select[2]=0,e.subblock_gain[0]=0,e.subblock_gain[1]=0,e.subblock_gain[2]=0,e.subblock_gain[3]=0,e.region0_count=0,e.region1_count=0,e.preflag=0,e.scalefac_scale=0,e.count1table_select=0,e.part2_length=0,e.sfb_lmax=f.SBPSY_l,e.sfb_smin=f.SBPSY_s,e.psy_lmax=t.sfb21_extra?f.SBMAX_l:f.SBPSY_l,e.psymax=e.psy_lmax,e.sfbmax=e.sfb_lmax,e.sfbdivide=11;for(var s=0;s<f.SBMAX_l;s++)e.width[s]=t.scalefac_band.l[s+1]-t.scalefac_band.l[s],e.window[s]=3;if(e.block_type==f.SHORT_TYPE){var r=l(576);e.sfb_smin=0,e.sfb_lmax=0,0!=e.mixed_block_flag&&(e.sfb_smin=3,e.sfb_lmax=2*t.mode_gr+4),e.psymax=e.sfb_lmax+3*((t.sfb21_extra?f.SBMAX_s:f.SBPSY_s)-e.sfb_smin),e.sfbmax=e.sfb_lmax+3*(f.SBPSY_s-e.sfb_smin),e.sfbdivide=e.sfbmax-18,e.psy_lmax=e.sfb_lmax;var o=t.scalefac_band.l[e.sfb_lmax];i.arraycopy(e.xr,0,r,0,576);for(s=e.sfb_smin;s<f.SBMAX_s;s++)for(var c=t.scalefac_band.s[s],u=t.scalefac_band.s[s+1],h=0;h<3;h++)for(var _=c;_<u;_++)e.xr[o++]=r[3*_+h];var p=e.sfb_lmax;for(s=e.sfb_smin;s<f.SBMAX_s;s++)e.width[p]=e.width[p+1]=e.width[p+2]=t.scalefac_band.s[s+1]-t.scalefac_band.s[s],e.window[p]=0,e.window[p+1]=1,e.window[p+2]=2,p+=3}e.count1bits=0,e.sfb_partition_table=n.nr_of_sfb_block[0][0],e.slen[0]=0,e.slen[1]=0,e.slen[2]=0,e.slen[3]=0,e.max_nonzero_coeff=575,a.fill(e.scalefac,0),v(t,e)},b.BINSEARCH_NONE=new b(0),b.BINSEARCH_UP=new b(1),b.BINSEARCH_DOWN=new b(2),this.trancate_smallspectrums=function(t,e,i,r){var o=l(d.SFBMAX);if((0!=(4&t.substep_shaping)||e.block_type!=f.SHORT_TYPE)&&0==(128&t.substep_shaping)){n.calc_noise(e,i,o,new h,null);for(var c=0;c<576;c++){var u=0;0!=e.l3_enc[c]&&(u=Math.abs(e.xr[c])),r[c]=u}c=0;var _=8;e.block_type==f.SHORT_TYPE&&(_=6);do{var p,m,g,v,b=e.width[_];if(c+=b,!(o[_]>=1)&&(a.sort(r,c-b,b),!BitStream.EQ(r[c-1],0))){p=(1-o[_])*i[_],m=0,v=0;do{var y;for(g=1;v+g<b;g++)if(BitStream.NEQ(r[v+c-b],r[v+c+g-b]))break;if(y=r[v+c-b]*r[v+c-b]*g,p<y){0!=v&&(m=r[v+c-b-1]);break}p-=y,v+=g}while(v<b);if(!BitStream.EQ(m,0))do{Math.abs(e.xr[c-b])<=m&&(e.l3_enc[c-b]=0)}while(--b>0)}}while(++_<e.psymax);e.part2_3_length=s.noquant_count_bits(t,e,null)}},this.outer_loop=function(t,e,o,a,u,m){var g,v=t.internal_flags,b=new p,w=l(576),x=l(d.SFBMAX),T=new h,A=new _,k=9999999,M=!1,R=!1,E=0;if(y(v,e,m,u,a),0==v.noise_shaping)return 100;n.calc_noise(e,o,x,T,A),T.bits=e.part2_3_length,b.assign(e);var O=0;i.arraycopy(a,0,w,0,576);while(!M){do{var B,I=new h,P=255;if(B=0!=(2&v.substep_shaping)?20:3,v.sfb21_extra){if(x[b.sfbmax]>1)break;if(b.block_type==f.SHORT_TYPE&&(x[b.sfbmax+1]>1||x[b.sfbmax+2]>1))break}if(!C(t,b,x,a,R))break;0!=b.scalefac_scale&&(P=254);var N=m-b.part2_length;if(N<=0)break;while((b.part2_3_length=s.count_bits(v,a,b,A))>N&&b.global_gain<=P)b.global_gain++;if(b.global_gain>P)break;if(0==T.over_count){while((b.part2_3_length=s.count_bits(v,a,b,A))>k&&b.global_gain<=P)b.global_gain++;if(b.global_gain>P)break}if(n.calc_noise(b,o,x,I,A),I.bits=b.part2_3_length,g=e.block_type!=f.SHORT_TYPE?t.quant_comp:t.quant_comp_short,g=S(g,T,I,b,x)?1:0,0!=g)k=e.part2_3_length,T=I,e.assign(b),O=0,i.arraycopy(a,0,w,0,576);else if(0==v.full_outer_loop){if(++O>B&&0==T.over_count)break;if(3==v.noise_shaping_amp&&R&&O>30)break;if(3==v.noise_shaping_amp&&R&&b.global_gain-E>15)break}}while(b.global_gain+b.scalefac_scale<255);3==v.noise_shaping_amp?R?M=!0:(b.assign(e),i.arraycopy(w,0,a,0,576),O=0,E=b.global_gain,R=!0):M=!0}return c(e.global_gain+e.scalefac_scale<=255),t.VBR==r.vbr_rh||t.VBR==r.vbr_mtrh?i.arraycopy(w,0,a,0,576):0!=(1&v.substep_shaping)&&trancate_smallspectrums(v,e,o,a),T.over_count},this.iteration_finish_one=function(t,n,i){var r=t.l3_side,o=r.tt[n][i];s.best_scalefac_store(t,n,i,r),1==t.use_best_huffman&&s.best_huffman_divide(t,o),e.ResvAdjust(t,o)},this.VBR_encode_granule=function(t,e,n,s,r,o,u){var h,_,f=t.internal_flags,d=new p,m=l(576),g=u,v=u+1,b=(u+o)/2,y=0,w=f.sfb21_extra;c(g<=LameInternalFlags.MAX_BITS_PER_CHANNEL),a.fill(d.l3_enc,0);do{c(b>=o),c(b<=u),c(o<=u),f.sfb21_extra=!(b>g-42)&&w,_=outer_loop(t,e,n,s,r,b),_<=0?(y=1,v=e.part2_3_length,d.assign(e),i.arraycopy(s,0,m,0,576),u=v-32,h=u-o,b=(u+o)/2):(o=b+32,h=u-o,b=(u+o)/2,0!=y&&(y=2,e.assign(d),i.arraycopy(m,0,s,0,576)))}while(h>12);f.sfb21_extra=w,2==y&&i.arraycopy(d.l3_enc,0,e.l3_enc,0,576),c(e.part2_3_length<=g)},this.get_framebits=function(n,s){var i=n.internal_flags;i.bitrate_index=i.VBR_min_bitrate;var r=t.getframebits(n);i.bitrate_index=1,r=t.getframebits(n);for(var o=1;o<=i.VBR_max_bitrate;o++){i.bitrate_index=o;var a=new MeanBits(r);s[o]=e.ResvFrameBegin(n,a),r=a.bits}},this.VBR_old_prepare=function(t,s,i,r,o,a,l,c,u){var h,_=t.internal_flags,p=0,d=1,m=0;_.bitrate_index=_.VBR_max_bitrate;var g=e.ResvFrameBegin(t,new MeanBits(0))/_.mode_gr;get_framebits(t,a);for(var v=0;v<_.mode_gr;v++){var b=n.on_pe(t,s,c[v],g,v,0);_.mode_ext==f.MPG_MD_MS_LR&&(ms_convert(_.l3_side,v),n.reduce_side(c[v],i[v],g,b));for(var y=0;y<_.channels_out;++y){var w=_.l3_side.tt[v][y];w.block_type!=f.SHORT_TYPE?(p=1.28/(1+Math.exp(3.5-s[v][y]/300))-.05,h=_.PSY.mask_adjust-p):(p=2.56/(1+Math.exp(3.5-s[v][y]/300))-.14,h=_.PSY.mask_adjust_short-p),_.masking_lower=Math.pow(10,.1*h),init_outer_loop(_,w),u[v][y]=n.calc_xmin(t,r[v][y],w,o[v][y]),0!=u[v][y]&&(d=0),l[v][y]=126,m+=c[v][y]}}for(v=0;v<_.mode_gr;v++)for(y=0;y<_.channels_out;y++)m>a[_.VBR_max_bitrate]&&(c[v][y]*=a[_.VBR_max_bitrate],c[v][y]/=m),l[v][y]>c[v][y]&&(l[v][y]=c[v][y]);return d},this.bitpressure_strategy=function(t,e,n,s){for(var i=0;i<t.mode_gr;i++)for(var r=0;r<t.channels_out;r++){for(var o=t.l3_side.tt[i][r],a=e[i][r],l=0,c=0;c<o.psy_lmax;c++)a[l++]*=1+.029*c*c/f.SBMAX_l/f.SBMAX_l;if(o.block_type==f.SHORT_TYPE)for(c=o.sfb_smin;c<f.SBMAX_s;c++)a[l++]*=1+.029*c*c/f.SBMAX_s/f.SBMAX_s,a[l++]*=1+.029*c*c/f.SBMAX_s/f.SBMAX_s,a[l++]*=1+.029*c*c/f.SBMAX_s/f.SBMAX_s;s[i][r]=0|Math.max(n[i][r],.9*s[i][r])}},this.VBR_new_prepare=function(t,s,i,r,o,a){var l,c=t.internal_flags,u=1,h=0,_=0;if(t.free_format){c.bitrate_index=0;p=new MeanBits(h);l=e.ResvFrameBegin(t,p),h=p.bits,o[0]=l}else{c.bitrate_index=c.VBR_max_bitrate;var p=new MeanBits(h);e.ResvFrameBegin(t,p),h=p.bits,get_framebits(t,o),l=o[c.VBR_max_bitrate]}for(var d=0;d<c.mode_gr;d++){n.on_pe(t,s,a[d],h,d,0),c.mode_ext==f.MPG_MD_MS_LR&&ms_convert(c.l3_side,d);for(var m=0;m<c.channels_out;++m){var g=c.l3_side.tt[d][m];c.masking_lower=Math.pow(10,.1*c.PSY.mask_adjust),init_outer_loop(c,g),0!=n.calc_xmin(t,i[d][m],g,r[d][m])&&(u=0),_+=a[d][m]}}for(d=0;d<c.mode_gr;d++)for(m=0;m<c.channels_out;m++)_>l&&(a[d][m]*=l,a[d][m]/=_);return u},this.calc_target_bits=function(s,i,r,o,a,l){var c,u,h,_,p=s.internal_flags,d=p.l3_side,m=0;p.bitrate_index=p.VBR_max_bitrate;var g=new MeanBits(m);for(l[0]=e.ResvFrameBegin(s,g),m=g.bits,p.bitrate_index=1,m=t.getframebits(s)-8*p.sideinfo_len,a[0]=m/(p.mode_gr*p.channels_out),m=s.VBR_mean_bitrate_kbps*s.framesize*1e3,0!=(1&p.substep_shaping)&&(m*=1.09),m/=s.out_samplerate,m-=8*p.sideinfo_len,m/=p.mode_gr*p.channels_out,c=.93+.07*(11-s.compression_ratio)/5.5,c<.9&&(c=.9),c>1&&(c=1),u=0;u<p.mode_gr;u++){var v=0;for(h=0;h<p.channels_out;h++){if(o[u][h]=int(c*m),i[u][h]>700){var b=int((i[u][h]-700)/1.4),y=d.tt[u][h];o[u][h]=int(c*m),y.block_type==f.SHORT_TYPE&&b<m/2&&(b=m/2),b>3*m/2?b=3*m/2:b<0&&(b=0),o[u][h]+=b}o[u][h]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(o[u][h]=LameInternalFlags.MAX_BITS_PER_CHANNEL),v+=o[u][h]}if(v>LameInternalFlags.MAX_BITS_PER_GRANULE)for(h=0;h<p.channels_out;++h)o[u][h]*=LameInternalFlags.MAX_BITS_PER_GRANULE,o[u][h]/=v}if(p.mode_ext==f.MPG_MD_MS_LR)for(u=0;u<p.mode_gr;u++)n.reduce_side(o[u],r[u],m*p.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(_=0,u=0;u<p.mode_gr;u++)for(h=0;h<p.channels_out;h++)o[u][h]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(o[u][h]=LameInternalFlags.MAX_BITS_PER_CHANNEL),_+=o[u][h];if(_>l[0])for(u=0;u<p.mode_gr;u++)for(h=0;h<p.channels_out;h++)o[u][h]*=l[0],o[u][h]/=_}}t.exports=m},429:function(t,e,n){var s=n(302),i=n(1038),r=(i.System,i.VbrMode),o=i.Float,a=(i.ShortBlock,i.Util),l=(i.Arrays,i.new_array_n,i.new_byte,i.new_double,i.new_float),c=(i.new_float_n,i.new_int),u=(i.new_int_n,i.assert),h=n(687),_=n(3134),f=n(1998);function p(){var t=null,e=null,n=null;function i(t){return u(0<=t+p.Q_MAX2&&t<p.Q_MAX),x[t+p.Q_MAX2]}this.setModules=function(s,i,r){t=s,e=i,n=r},this.IPOW20=function(t){return u(0<=t&&t<p.Q_MAX),T[t]};var d=2220446049250313e-31,m=p.IXMAX_VAL,g=m+2,v=p.Q_MAX,b=p.Q_MAX2,y=(p.LARGE_BITS,100);this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var w=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=w,this.sfBandIndex=[new s([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new s([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new s([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new s([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new s([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new s([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new s([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new s([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new s([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var x=l(v+b+1),T=l(v),S=l(g),A=l(g);function k(t,e){var s=n.ATHformula(e,t);return s-=y,s=Math.pow(10,s/10+t.ATHlower),s}function M(t){for(var e=t.internal_flags.ATH.l,n=t.internal_flags.ATH.psfb21,s=t.internal_flags.ATH.s,i=t.internal_flags.ATH.psfb12,r=t.internal_flags,a=t.out_samplerate,l=0;l<h.SBMAX_l;l++){var c=r.scalefac_band.l[l],u=r.scalefac_band.l[l+1];e[l]=o.MAX_VALUE;for(var _=c;_<u;_++){var f=_*a/1152,p=k(t,f);e[l]=Math.min(e[l],p)}}for(l=0;l<h.PSFB21;l++){c=r.scalefac_band.psfb21[l],u=r.scalefac_band.psfb21[l+1];n[l]=o.MAX_VALUE;for(_=c;_<u;_++){f=_*a/1152,p=k(t,f);n[l]=Math.min(n[l],p)}}for(l=0;l<h.SBMAX_s;l++){c=r.scalefac_band.s[l],u=r.scalefac_band.s[l+1];s[l]=o.MAX_VALUE;for(_=c;_<u;_++){f=_*a/384,p=k(t,f);s[l]=Math.min(s[l],p)}s[l]*=r.scalefac_band.s[l+1]-r.scalefac_band.s[l]}for(l=0;l<h.PSFB12;l++){c=r.scalefac_band.psfb12[l],u=r.scalefac_band.psfb12[l+1];i[l]=o.MAX_VALUE;for(_=c;_<u;_++){f=_*a/384,p=k(t,f);i[l]=Math.min(i[l],p)}i[l]*=r.scalefac_band.s[13]-r.scalefac_band.s[12]}if(t.noATH){for(l=0;l<h.SBMAX_l;l++)e[l]=1e-20;for(l=0;l<h.PSFB21;l++)n[l]=1e-20;for(l=0;l<h.SBMAX_s;l++)s[l]=1e-20;for(l=0;l<h.PSFB12;l++)i[l]=1e-20}r.ATH.floor=10*Math.log10(k(t,-1))}function C(t){this.s=t}this.adj43=A,this.iteration_init=function(e){var n,s=e.internal_flags,i=s.l3_side;if(0==s.iteration_init_init){for(s.iteration_init_init=1,i.main_data_begin=0,M(e),S[0]=0,n=1;n<g;n++)S[n]=Math.pow(n,4/3);for(n=0;n<g-1;n++)A[n]=n+1-Math.pow(.5*(S[n]+S[n+1]),.75);for(A[n]=.5,n=0;n<v;n++)T[n]=Math.pow(2,-.1875*(n-210));for(n=0;n<=v+b;n++)x[n]=Math.pow(2,.25*(n-210-b));var r,o,a,l;for(t.huffman_init(s),n=e.exp_nspsytune>>2&63,n>=32&&(n-=64),r=Math.pow(10,n/4/10),n=e.exp_nspsytune>>8&63,n>=32&&(n-=64),o=Math.pow(10,n/4/10),n=e.exp_nspsytune>>14&63,n>=32&&(n-=64),a=Math.pow(10,n/4/10),n=e.exp_nspsytune>>20&63,n>=32&&(n-=64),l=a*Math.pow(10,n/4/10),n=0;n<h.SBMAX_l;n++){c=n<=6?r:n<=13?o:n<=20?a:l,s.nsPsy.longfact[n]=c}for(n=0;n<h.SBMAX_s;n++){var c;c=n<=5?r:n<=10?o:n<=11?a:l,s.nsPsy.shortfact[n]=c}}},this.on_pe=function(t,n,s,i,r,o){var a,l,h=t.internal_flags,p=0,d=c(2),m=new _(p),g=e.ResvMaxBits(t,i,m,o);p=m.bits;var v=p+g;for(v>f.MAX_BITS_PER_GRANULE&&(v=f.MAX_BITS_PER_GRANULE),a=0,l=0;l<h.channels_out;++l)s[l]=Math.min(f.MAX_BITS_PER_CHANNEL,p/h.channels_out),d[l]=0|s[l]*n[r][l]/700-s[l],d[l]>3*i/4&&(d[l]=3*i/4),d[l]<0&&(d[l]=0),d[l]+s[l]>f.MAX_BITS_PER_CHANNEL&&(d[l]=Math.max(0,f.MAX_BITS_PER_CHANNEL-s[l])),a+=d[l];if(a>g)for(l=0;l<h.channels_out;++l)d[l]=g*d[l]/a;for(l=0;l<h.channels_out;++l)s[l]+=d[l],g-=d[l];for(a=0,l=0;l<h.channels_out;++l)a+=s[l];if(a>f.MAX_BITS_PER_GRANULE){var b=0;for(l=0;l<h.channels_out;++l)s[l]*=f.MAX_BITS_PER_GRANULE,s[l]/=a,b+=s[l];u(b<=f.MAX_BITS_PER_GRANULE)}return v},this.reduce_side=function(t,e,n,s){u(s<=f.MAX_BITS_PER_GRANULE),u(t[0]+t[1]<=f.MAX_BITS_PER_GRANULE);var i=.33*(.5-e)/.5;i<0&&(i=0),i>.5&&(i=.5);var r=0|.5*i*(t[0]+t[1]);r>f.MAX_BITS_PER_CHANNEL-t[0]&&(r=f.MAX_BITS_PER_CHANNEL-t[0]),r<0&&(r=0),t[1]>=125&&(t[1]-r>125?(t[0]<n&&(t[0]+=r),t[1]-=r):(t[0]+=t[1]-125,t[1]=125)),r=t[0]+t[1],r>s&&(t[0]=s*t[0]/r,t[1]=s*t[1]/r),u(t[0]<=f.MAX_BITS_PER_CHANNEL),u(t[1]<=f.MAX_BITS_PER_CHANNEL),u(t[0]+t[1]<=f.MAX_BITS_PER_GRANULE)},this.athAdjust=function(t,e,n){var s=90.30873362,i=94.82444863,r=a.FAST_LOG10_X(e,10),o=t*t,l=0;return r-=n,o>1e-20&&(l=1+a.FAST_LOG10_X(o,10/s)),l<0&&(l=0),r*=l,r+=n+s-i,Math.pow(10,.1*r)},this.calc_xmin=function(t,e,n,s){var i,o=0,a=t.internal_flags,l=0,c=0,u=a.ATH,_=n.xr,f=t.VBR==r.vbr_mtrh?1:0,p=a.masking_lower;for(t.VBR!=r.vbr_mtrh&&t.VBR!=r.vbr_mt||(p=1),i=0;i<n.psy_lmax;i++){S=t.VBR==r.vbr_rh||t.VBR==r.vbr_mtrh?athAdjust(u.adjust,u.l[i],u.floor):u.adjust*u.l[i],w=n.width[i],A=S/w,k=d,C=w>>1,M=0;do{R=_[l]*_[l],M+=R,k+=R<A?R:A,l++,E=_[l]*_[l],M+=E,k+=E<A?E:A,l++}while(--C>0);if(M>S&&c++,i==h.SBPSY_l){var m=S*a.nsPsy.longfact[i];k<m&&(k=m)}if(0!=f&&(S=k),!t.ATHonly){var g=e.en.l[i];if(g>0)m=M*e.thm.l[i]*p/g,0!=f&&(m*=a.nsPsy.longfact[i]),S<m&&(S=m)}s[o++]=0!=f?S:S*a.nsPsy.longfact[i]}var v=575;if(n.block_type!=h.SHORT_TYPE){var b=576;while(0!=b--&&BitStream.EQ(_[b],0))v=b}n.max_nonzero_coeff=v;for(var y=n.sfb_smin;i<n.psymax;y++,i+=3){var w,x,T;for(T=t.VBR==r.vbr_rh||t.VBR==r.vbr_mtrh?athAdjust(u.adjust,u.s[y],u.floor):u.adjust*u.s[y],w=n.width[i],x=0;x<3;x++){var S,A,k,M=0,C=w>>1;A=T/w,k=d;do{var R,E;R=_[l]*_[l],M+=R,k+=R<A?R:A,l++,E=_[l]*_[l],M+=E,k+=E<A?E:A,l++}while(--C>0);if(M>T&&c++,y==h.SBPSY_s){m=T*a.nsPsy.shortfact[y];k<m&&(k=m)}if(S=0!=f?k:T,!t.ATHonly&&!t.ATHshort){g=e.en.s[y][x];if(g>0)m=M*e.thm.s[y][x]*p/g,0!=f&&(m*=a.nsPsy.shortfact[y]),S<m&&(S=m)}s[o++]=0!=f?S:S*a.nsPsy.shortfact[y]}t.useTemporal&&(s[o-3]>s[o-3+1]&&(s[o-3+1]+=(s[o-3]-s[o-3+1])*a.decay),s[o-3+1]>s[o-3+2]&&(s[o-3+2]+=(s[o-3+1]-s[o-3+2])*a.decay))}return c},this.calc_noise_core=function(t,e,n,s){var i=0,r=e.s,o=t.l3_enc;if(r>t.count1)while(0!=n--){c=t.xr[r],r++,i+=c*c,c=t.xr[r],r++,i+=c*c}else if(r>t.big_values){var a=l(2);a[0]=0,a[1]=s;while(0!=n--){c=Math.abs(t.xr[r])-a[o[r]],r++,i+=c*c,c=Math.abs(t.xr[r])-a[o[r]],r++,i+=c*c}}else while(0!=n--){var c;c=Math.abs(t.xr[r])-S[o[r]]*s,r++,i+=c*c,c=Math.abs(t.xr[r])-S[o[r]]*s,r++,i+=c*c}return e.s=r,i},this.calc_noise=function(t,e,n,s,r){var o,l,c=0,u=0,h=0,_=0,f=0,p=-20,d=0,m=t.scalefac,g=0;for(s.over_SSD=0,o=0;o<t.psymax;o++){var v,b=t.global_gain-(m[g++]+(0!=t.preflag?w[o]:0)<<t.scalefac_scale+1)-8*t.subblock_gain[t.window[o]],y=0;if(null!=r&&r.step[o]==b)y=r.noise[o],d+=t.width[o],n[c++]=y/e[u++],y=r.noise_log[o];else{var x,T=i(b);if(l=t.width[o]>>1,d+t.width[o]>t.max_nonzero_coeff)x=t.max_nonzero_coeff-d+1,l=x>0?x>>1:0;var S=new C(d);y=this.calc_noise_core(t,S,l,T),d=S.s,null!=r&&(r.step[o]=b,r.noise[o]=y),y=n[c++]=y/e[u++],y=a.FAST_LOG10(Math.max(y,1e-20)),null!=r&&(r.noise_log[o]=y)}if(null!=r&&(r.global_gain=t.global_gain),f+=y,y>0)v=Math.max(0|10*y+.5,1),s.over_SSD+=v*v,h++,_+=y;p=Math.max(p,y)}return s.over_count=h,s.tot_noise=f,s.over_noise=_,s.max_noise=p,h},this.set_pinfo=function(t,e,n,s,i){var r,o,a,c,_,f=t.internal_flags,p=0==e.scalefac_scale?.5:1,d=e.scalefac,m=l(L3Side.SFBMAX),g=l(L3Side.SFBMAX),v=new CalcNoiseResult;calc_xmin(t,n,e,m),calc_noise(e,m,g,v,null);var b=0;for(o=e.sfb_lmax,e.block_type!=h.SHORT_TYPE&&0==e.mixed_block_flag&&(o=22),r=0;r<o;r++){var y=f.scalefac_band.l[r],x=f.scalefac_band.l[r+1],T=x-y;for(c=0;b<x;b++)c+=e.xr[b]*e.xr[b];c/=T,_=1e15,f.pinfo.en[s][i][r]=_*c,f.pinfo.xfsf[s][i][r]=_*m[r]*g[r]/T,n.en.l[r]>0&&!t.ATHonly?c/=n.en.l[r]:c=0,f.pinfo.thr[s][i][r]=_*Math.max(c*n.thm.l[r],f.ATH.l[r]),f.pinfo.LAMEsfb[s][i][r]=0,0!=e.preflag&&r>=11&&(f.pinfo.LAMEsfb[s][i][r]=-p*w[r]),r<h.SBPSY_l&&(u(d[r]>=0),f.pinfo.LAMEsfb[s][i][r]-=p*d[r])}if(e.block_type==h.SHORT_TYPE)for(o=r,r=e.sfb_smin;r<h.SBMAX_s;r++){y=f.scalefac_band.s[r],x=f.scalefac_band.s[r+1],T=x-y;for(var S=0;S<3;S++){for(c=0,a=y;a<x;a++)c+=e.xr[b]*e.xr[b],b++;c=Math.max(c/T,1e-20),_=1e15,f.pinfo.en_s[s][i][3*r+S]=_*c,f.pinfo.xfsf_s[s][i][3*r+S]=_*m[o]*g[o]/T,n.en.s[r][S]>0?c/=n.en.s[r][S]:c=0,(t.ATHonly||t.ATHshort)&&(c=0),f.pinfo.thr_s[s][i][3*r+S]=_*Math.max(c*n.thm.s[r][S],f.ATH.s[r]),f.pinfo.LAMEsfb_s[s][i][3*r+S]=-2*e.subblock_gain[S],r<h.SBPSY_s&&(f.pinfo.LAMEsfb_s[s][i][3*r+S]-=p*d[o]),o++}}f.pinfo.LAMEqss[s][i]=e.global_gain,f.pinfo.LAMEmainbits[s][i]=e.part2_3_length+e.part2_length,f.pinfo.LAMEsfbits[s][i]=e.part2_length,f.pinfo.over[s][i]=v.over_count,f.pinfo.max_noise[s][i]=10*v.max_noise,f.pinfo.over_noise[s][i]=10*v.over_noise,f.pinfo.tot_noise[s][i]=10*v.tot_noise,f.pinfo.over_SSD[s][i]=v.over_SSD}}p.Q_MAX=257,p.Q_MAX2=116,p.LARGE_BITS=1e5,p.IXMAX_VAL=8206,t.exports=p},1062:function(t,e,n){var s=n(1038),i=(s.System,s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays,s.new_array_n,s.new_byte,s.new_double,s.new_float),r=(s.new_float_n,s.new_int),o=(s.new_int_n,s.assert,n(1287));function a(){this.linprebuf=i(2*o.MAX_ORDER),this.linpre=0,this.lstepbuf=i(o.MAX_SAMPLES_PER_WINDOW+o.MAX_ORDER),this.lstep=0,this.loutbuf=i(o.MAX_SAMPLES_PER_WINDOW+o.MAX_ORDER),this.lout=0,this.rinprebuf=i(2*o.MAX_ORDER),this.rinpre=0,this.rstepbuf=i(o.MAX_SAMPLES_PER_WINDOW+o.MAX_ORDER),this.rstep=0,this.routbuf=i(o.MAX_SAMPLES_PER_WINDOW+o.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=r(0|o.STEPS_per_dB*o.MAX_dB),this.B=r(0|o.STEPS_per_dB*o.MAX_dB)}t.exports=a},3060:function(t,e,n){var s=n(1038),i=s.assert;function r(){var t;this.setModules=function(e){t=e},this.ResvFrameBegin=function(e,n){var s,r=e.internal_flags,o=r.l3_side,a=t.getframebits(e);n.bits=(a-8*r.sideinfo_len)/r.mode_gr;var l=2048*r.mode_gr-8;e.brate>320?s=8*int(1e3*e.brate/(e.out_samplerate/1152)/8+.5):(s=11520,e.strict_ISO&&(s=8*int(32e4/(e.out_samplerate/1152)/8+.5))),r.ResvMax=s-a,r.ResvMax>l&&(r.ResvMax=l),(r.ResvMax<0||e.disable_reservoir)&&(r.ResvMax=0);var c=n.bits*r.mode_gr+Math.min(r.ResvSize,r.ResvMax);return c>s&&(c=s),i(0==r.ResvMax%8),i(r.ResvMax>=0),o.resvDrain_pre=0,null!=r.pinfo&&(r.pinfo.mean_bits=n.bits/2,r.pinfo.resvsize=r.ResvSize),c},this.ResvMaxBits=function(t,e,n,s){var i,r=t.internal_flags,o=r.ResvSize,a=r.ResvMax;0!=s&&(o+=e),0!=(1&r.substep_shaping)&&(a*=.9),n.bits=e,10*o>9*a?(i=o-9*a/10,n.bits+=i,r.substep_shaping|=128):(i=0,r.substep_shaping&=127,t.disable_reservoir||0!=(1&r.substep_shaping)||(n.bits-=.1*e));var l=o<6*r.ResvMax/10?o:6*r.ResvMax/10;return l-=i,l<0&&(l=0),l},this.ResvAdjust=function(t,e){t.ResvSize-=e.part2_3_length+e.part2_length},this.ResvFrameEnd=function(t,e){var n,s=t.l3_side;t.ResvSize+=e*t.mode_gr;var r=0;s.resvDrain_post=0,s.resvDrain_pre=0,0!=(n=t.ResvSize%8)&&(r+=n),n=t.ResvSize-r-t.ResvMax,n>0&&(i(0==n%8),i(n>=0),r+=n);var o=Math.min(8*s.main_data_begin,r)/8;s.resvDrain_pre+=8*o,r-=8*o,t.ResvSize-=8*o,s.main_data_begin-=o,s.resvDrain_post+=r,t.ResvSize-=r}}t.exports=r},302:function(t,e,n){var s=n(1038),i=s.System,r=(s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays,s.new_array_n,s.new_byte,s.new_double,s.new_float,s.new_float_n,s.new_int),o=(s.new_int_n,s.assert,n(687));function a(t,e,n,s){this.l=r(1+o.SBMAX_l),this.s=r(1+o.SBMAX_s),this.psfb21=r(1+o.PSFB21),this.psfb12=r(1+o.PSFB12);var a=this.l,l=this.s;4==arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],i.arraycopy(this.arrL,0,a,0,Math.min(this.arrL.length,this.l.length)),i.arraycopy(this.arrS,0,l,0,Math.min(this.arrS.length,this.s.length)),i.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),i.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}t.exports=a},7721:function(t){function e(t,e,n,s){this.xlen=t,this.linmax=e,this.table=n,this.hlen=s}var n={t1HB:[1,1,1,0],t2HB:[1,2,1,3,1,1,3,2,0],t3HB:[3,2,1,1,1,1,3,2,0],t5HB:[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],t6HB:[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],t7HB:[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],t8HB:[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],t9HB:[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],t10HB:[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],t11HB:[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],t12HB:[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],t13HB:[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],t15HB:[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],t16HB:[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],t24HB:[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],t32HB:[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],t33HB:[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],t1l:[1,4,3,5],t2l:[1,4,7,4,5,7,6,7,8],t3l:[2,3,7,4,4,7,6,7,8],t5l:[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],t6l:[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],t7l:[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],t8l:[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],t9l:[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],t10l:[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],t11l:[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],t12l:[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],t13l:[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],t15l:[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],t16_5l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],t16l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],t24l:[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],t32l:[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],t33l:[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8]};n.ht=[new e(0,0,null,null),new e(2,0,n.t1HB,n.t1l),new e(3,0,n.t2HB,n.t2l),new e(3,0,n.t3HB,n.t3l),new e(0,0,null,null),new e(4,0,n.t5HB,n.t5l),new e(4,0,n.t6HB,n.t6l),new e(6,0,n.t7HB,n.t7l),new e(6,0,n.t8HB,n.t8l),new e(6,0,n.t9HB,n.t9l),new e(8,0,n.t10HB,n.t10l),new e(8,0,n.t11HB,n.t11l),new e(8,0,n.t12HB,n.t12l),new e(16,0,n.t13HB,n.t13l),new e(0,0,null,n.t16_5l),new e(16,0,n.t15HB,n.t15l),new e(1,1,n.t16HB,n.t16l),new e(2,3,n.t16HB,n.t16l),new e(3,7,n.t16HB,n.t16l),new e(4,15,n.t16HB,n.t16l),new e(6,63,n.t16HB,n.t16l),new e(8,255,n.t16HB,n.t16l),new e(10,1023,n.t16HB,n.t16l),new e(13,8191,n.t16HB,n.t16l),new e(4,15,n.t24HB,n.t24l),new e(5,31,n.t24HB,n.t24l),new e(6,63,n.t24HB,n.t24l),new e(7,127,n.t24HB,n.t24l),new e(8,255,n.t24HB,n.t24l),new e(9,511,n.t24HB,n.t24l),new e(11,2047,n.t24HB,n.t24l),new e(13,8191,n.t24HB,n.t24l),new e(0,0,n.t32HB,n.t32l),new e(0,0,n.t33HB,n.t33l)],n.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],n.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],n.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],n.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],n.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],n.scfsi_band=[0,6,11,16,21],t.exports=n},5638:function(t,e,n){var s=n(1038),i=s.System,r=(s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays),o=(s.new_array_n,s.new_byte,s.new_double,s.new_float,s.new_float_n,s.new_int),a=(s.new_int_n,s.assert),l=n(687),c=n(7721),u=n(9438),h=n(429);function _(){var t=null;function e(t){this.bits=0|t}this.qupvt=null,this.setModules=function(e){this.qupvt=e,t=e};var n=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function s(t,e,n,s,i,r){var o=.5946/e;a(t>0),t>>=1;while(0!=t--)i[r++]=o>n[s++]?0:1,i[r++]=o>n[s++]?0:1}function f(e,n,s,i,r,o){a(e>0),e>>=1;var l=e%2;e>>=1;while(0!=e--){var c,u,h,_,f,p,d,m;c=s[i++]*n,u=s[i++]*n,f=0|c,h=s[i++]*n,p=0|u,_=s[i++]*n,d=0|h,c+=t.adj43[f],m=0|_,u+=t.adj43[p],r[o++]=0|c,h+=t.adj43[d],r[o++]=0|u,_+=t.adj43[m],r[o++]=0|h,r[o++]=0|_}0!=l&&(c=s[i++]*n,u=s[i++]*n,f=0|c,p=0|u,c+=t.adj43[f],u+=t.adj43[p],r[o++]=0|c,r[o++]=0|u)}function p(e,n,i,o,c){var u,h,_,p=0,d=0,m=0,g=0,v=n,b=0,y=v,w=0,x=e,T=0;for(_=null!=c&&o.global_gain==c.global_gain,h=o.block_type==l.SHORT_TYPE?38:21,u=0;u<=h;u++){var S=-1;if((_||o.block_type==l.NORM_TYPE)&&(S=o.global_gain-(o.scalefac[u]+(0!=o.preflag?t.pretab[u]:0)<<o.scalefac_scale+1)-8*o.subblock_gain[o.window[u]]),a(o.width[u]>=0),_&&c.step[u]==S)0!=d&&(f(d,i,x,T,y,w),d=0),0!=m&&(s(m,i,x,T,y,w),m=0);else{var A,k=o.width[u];if(p+o.width[u]>o.max_nonzero_coeff)A=o.max_nonzero_coeff-p+1,r.fill(n,o.max_nonzero_coeff,576,0),k=A,k<0&&(k=0),u=h+1;if(0==d&&0==m&&(y=v,w=b,x=e,T=g),null!=c&&c.sfb_count1>0&&u>=c.sfb_count1&&c.step[u]>0&&S>=c.step[u]?(0!=d&&(f(d,i,x,T,y,w),d=0,y=v,w=b,x=e,T=g),m+=k):(0!=m&&(s(m,i,x,T,y,w),m=0,y=v,w=b,x=e,T=g),d+=k),k<=0){0!=m&&(s(m,i,x,T,y,w),m=0),0!=d&&(f(d,i,x,T,y,w),d=0);break}}u<=h&&(b+=o.width[u],g+=o.width[u],p+=o.width[u])}0!=d&&(f(d,i,x,T,y,w),d=0),0!=m&&(s(m,i,x,T,y,w),m=0)}function d(t,e,n){var s=0,i=0;do{var r=t[e++],o=t[e++];s<r&&(s=r),i<o&&(i=o)}while(e<n);return s<i&&(s=i),s}function m(t,e,n,s,i,r){var o,a=65536*c.ht[s].xlen+c.ht[i].xlen,l=0;do{var u=t[e++],h=t[e++];0!=u&&(u>14&&(u=15,l+=a),u*=16),0!=h&&(h>14&&(h=15,l+=a),u+=h),l+=c.largetbl[u]}while(e<n);return o=65535&l,l>>=16,l>o&&(l=o,s=i),r.bits+=l,s}function g(t,e,n,s){var i=0,r=c.ht[1].hlen;do{var o=2*t[e+0]+t[e+1];e+=2,i+=r[o]}while(e<n);return s.bits+=i,1}function v(t,e,n,s,i){var r,o,a=0,l=c.ht[s].xlen;o=2==s?c.table23:c.table56;do{var u=t[e+0]*l+t[e+1];e+=2,a+=o[u]}while(e<n);return r=65535&a,a>>=16,a>r&&(a=r,s++),i.bits+=a,s}function b(t,e,n,s,i){var r=0,o=0,a=0,l=c.ht[s].xlen,u=c.ht[s].hlen,h=c.ht[s+1].hlen,_=c.ht[s+2].hlen;do{var f=t[e+0]*l+t[e+1];e+=2,r+=u[f],o+=h[f],a+=_[f]}while(e<n);var p=s;return r>o&&(r=o,p++),r>a&&(r=a,p=s+2),i.bits+=r,p}var y=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function w(t,e,n,s){var i=d(t,e,n);switch(i){case 0:return i;case 1:return g(t,e,n,s);case 2:case 3:return v(t,e,n,y[i-1],s);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return b(t,e,n,y[i-1],s);default:if(i>h.IXMAX_VAL)return s.bits=h.LARGE_BITS,-1;var r,o;for(i-=15,r=24;r<32;r++)if(c.ht[r].linmax>=i)break;for(o=r-8;o<24;o++)if(c.ht[o].linmax>=i)break;return m(t,e,n,o,r,s)}}function x(t,n,s,i,r,o,a){for(var l=n.big_values,c=0;c<=22;c++)i[c]=h.LARGE_BITS;for(c=0;c<16;c++){var u=t.scalefac_band.l[c+1];if(u>=l)break;var _=0,f=new e(_),p=w(s,0,u,f);_=f.bits;for(var d=0;d<8;d++){var m=t.scalefac_band.l[c+d+2];if(m>=l)break;var g=_;f=new e(g);var v=w(s,u,m,f);g=f.bits,i[c+d]>g&&(i[c+d]=g,r[c+d]=c,o[c+d]=p,a[c+d]=v)}}}function T(t,n,s,i,r,o,a,c){for(var u=n.big_values,h=2;h<l.SBMAX_l+1;h++){var _=t.scalefac_band.l[h];if(_>=u)break;var f=r[h-2]+n.count1bits;if(s.part2_3_length<=f)break;var p=new e(f),d=w(i,_,u,p);f=p.bits,s.part2_3_length<=f||(s.assign(n),s.part2_3_length=f,s.region0_count=o[h-2],s.region1_count=h-2-o[h-2],s.table_select[0]=a[h-2],s.table_select[1]=c[h-2],s.table_select[2]=d)}}this.noquant_count_bits=function(t,n,s){var i=n.l3_enc,r=Math.min(576,n.max_nonzero_coeff+2>>1<<1);for(null!=s&&(s.sfb_count1=0);r>1;r-=2)if(0!=(i[r-1]|i[r-2]))break;n.count1=r;for(var o=0,u=0;r>3;r-=4){var h;if((2147483647&(i[r-1]|i[r-2]|i[r-3]|i[r-4]))>1)break;h=2*(2*(2*i[r-4]+i[r-3])+i[r-2])+i[r-1],o+=c.t32l[h],u+=c.t33l[h]}var _=o;if(n.count1table_select=0,o>u&&(_=u,n.count1table_select=1),n.count1bits=_,n.big_values=r,0==r)return _;if(n.block_type==l.SHORT_TYPE)o=3*t.scalefac_band.s[3],o>n.big_values&&(o=n.big_values),u=n.big_values;else if(n.block_type==l.NORM_TYPE){if(a(r<=576),o=n.region0_count=t.bv_scf[r-2],u=n.region1_count=t.bv_scf[r-1],a(o+u+2<l.SBPSY_l),u=t.scalefac_band.l[o+u+2],o=t.scalefac_band.l[o+1],u<r){var f=new e(_);n.table_select[2]=w(i,u,r,f),_=f.bits}}else n.region0_count=7,n.region1_count=l.SBMAX_l-1-7-1,o=t.scalefac_band.l[8],u=r,o>u&&(o=u);if(o=Math.min(o,r),u=Math.min(u,r),a(o>=0),a(u>=0),0<o){f=new e(_);n.table_select[0]=w(i,0,o,f),_=f.bits}if(o<u){f=new e(_);n.table_select[1]=w(i,o,u,f),_=f.bits}if(2==t.use_best_huffman&&(n.part2_3_length=_,best_huffman_divide(t,n),_=n.part2_3_length),null!=s&&n.block_type==l.NORM_TYPE){var p=0;while(t.scalefac_band.l[p]<n.big_values)p++;s.sfb_count1=p}return _},this.count_bits=function(e,n,s,i){var r=s.l3_enc,o=h.IXMAX_VAL/t.IPOW20(s.global_gain);if(s.xrpow_max>o)return h.LARGE_BITS;if(p(n,r,t.IPOW20(s.global_gain),s,i),0!=(2&e.substep_shaping))for(var l=0,c=s.global_gain+s.scalefac_scale,u=.634521682242439/t.IPOW20(c),_=0;_<s.sfbmax;_++){var f,d=s.width[_];if(a(d>=0),0==e.pseudohalf[_])l+=d;else for(f=l,l+=d;f<l;++f)r[f]=n[f]>=u?r[f]:0}return this.noquant_count_bits(e,s,i)},this.best_huffman_divide=function(t,n){var s=new u,i=n.l3_enc,r=o(23),h=o(23),_=o(23),f=o(23);if(n.block_type!=l.SHORT_TYPE||1!=t.mode_gr){s.assign(n),n.block_type==l.NORM_TYPE&&(x(t,n,i,r,h,_,f),T(t,s,n,i,r,h,_,f));var p=s.big_values;if(!(0==p||(i[p-2]|i[p-1])>1)&&(p=n.count1+2,!(p>576))){s.assign(n),s.count1=p;var d=0,m=0;for(a(p<=576);p>s.big_values;p-=4){var g=2*(2*(2*i[p-4]+i[p-3])+i[p-2])+i[p-1];d+=c.t32l[g],m+=c.t33l[g]}if(s.big_values=p,s.count1table_select=0,d>m&&(d=m,s.count1table_select=1),s.count1bits=d,s.block_type==l.NORM_TYPE)T(t,s,n,i,r,h,_,f);else{if(s.part2_3_length=d,d=t.scalefac_band.l[8],d>p&&(d=p),d>0){var v=new e(s.part2_3_length);s.table_select[0]=w(i,0,d,v),s.part2_3_length=v.bits}if(p>d){v=new e(s.part2_3_length);s.table_select[1]=w(i,d,p,v),s.part2_3_length=v.bits}n.part2_3_length>s.part2_3_length&&n.assign(s)}}}};var S=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],A=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],k=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],M=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];function C(t,e){for(var n,s=e.tt[1][t],i=e.tt[0][t],r=0;r<c.scfsi_band.length-1;r++){for(n=c.scfsi_band[r];n<c.scfsi_band[r+1];n++)if(i.scalefac[n]!=s.scalefac[n]&&s.scalefac[n]>=0)break;if(n==c.scfsi_band[r+1]){for(n=c.scfsi_band[r];n<c.scfsi_band[r+1];n++)s.scalefac[n]=-1;e.scfsi[t][r]=1}}var o=0,a=0;for(n=0;n<11;n++)-1!=s.scalefac[n]&&(a++,o<s.scalefac[n]&&(o=s.scalefac[n]));for(var u=0,h=0;n<l.SBPSY_l;n++)-1!=s.scalefac[n]&&(h++,u<s.scalefac[n]&&(u=s.scalefac[n]));for(r=0;r<16;r++)if(o<S[r]&&u<A[r]){var _=k[r]*a+M[r]*h;s.part2_length>_&&(s.part2_length=_,s.scalefac_compress=r)}}function R(t,e){for(var n=0;n<e;++n)if(t[n]<0)return!1;return!0}_.slen1_tab=k,_.slen2_tab=M,this.best_scalefac_store=function(e,n,s,i){var r,o,c,u,h=i.tt[n][s],_=0;for(c=0,r=0;r<h.sfbmax;r++){var f=h.width[r];for(a(f>=0),c+=f,u=-f;u<0;u++)if(0!=h.l3_enc[u+c])break;0==u&&(h.scalefac[r]=_=-2)}if(0==h.scalefac_scale&&0==h.preflag){var p=0;for(r=0;r<h.sfbmax;r++)h.scalefac[r]>0&&(p|=h.scalefac[r]);if(0==(1&p)&&0!=p){for(r=0;r<h.sfbmax;r++)h.scalefac[r]>0&&(h.scalefac[r]>>=1);h.scalefac_scale=_=1}}if(0==h.preflag&&h.block_type!=l.SHORT_TYPE&&2==e.mode_gr){for(r=11;r<l.SBPSY_l;r++)if(h.scalefac[r]<t.pretab[r]&&-2!=h.scalefac[r])break;if(r==l.SBPSY_l){for(r=11;r<l.SBPSY_l;r++)h.scalefac[r]>0&&(h.scalefac[r]-=t.pretab[r]);h.preflag=_=1}}for(o=0;o<4;o++)i.scfsi[s][o]=0;for(2==e.mode_gr&&1==n&&i.tt[0][s].block_type!=l.SHORT_TYPE&&i.tt[1][s].block_type!=l.SHORT_TYPE&&(C(s,i),_=0),r=0;r<h.sfbmax;r++)-2==h.scalefac[r]&&(h.scalefac[r]=0);0!=_&&(2==e.mode_gr?this.scale_bitcount(h):this.scale_bitcount_lsf(e,h))};var E=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],O=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],B=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(e){var n,s,i,r=0,o=0,c=e.scalefac;if(a(R(c,e.sfbmax)),e.block_type==l.SHORT_TYPE)i=E,0!=e.mixed_block_flag&&(i=O);else if(i=B,0==e.preflag){for(s=11;s<l.SBPSY_l;s++)if(c[s]<t.pretab[s])break;if(s==l.SBPSY_l)for(e.preflag=1,s=11;s<l.SBPSY_l;s++)c[s]-=t.pretab[s]}for(s=0;s<e.sfbdivide;s++)r<c[s]&&(r=c[s]);for(;s<e.sfbmax;s++)o<c[s]&&(o=c[s]);for(e.part2_length=h.LARGE_BITS,n=0;n<16;n++)r<S[n]&&o<A[n]&&e.part2_length>i[n]&&(e.part2_length=i[n],e.scalefac_compress=n);return e.part2_length==h.LARGE_BITS};var I=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(e,n){var s,r,c,u,h,_,f,p,d=o(4),m=n.scalefac;for(s=0!=n.preflag?2:0,f=0;f<4;f++)d[f]=0;if(n.block_type==l.SHORT_TYPE){r=1;var g=t.nr_of_sfb_block[s][r];for(p=0,c=0;c<4;c++)for(u=g[c]/3,f=0;f<u;f++,p++)for(h=0;h<3;h++)m[3*p+h]>d[c]&&(d[c]=m[3*p+h])}else{r=0;g=t.nr_of_sfb_block[s][r];for(p=0,c=0;c<4;c++)for(u=g[c],f=0;f<u;f++,p++)m[p]>d[c]&&(d[c]=m[p])}for(_=!1,c=0;c<4;c++)d[c]>I[s][c]&&(_=!0);if(!_){var v,b,y,w;for(n.sfb_partition_table=t.nr_of_sfb_block[s][r],c=0;c<4;c++)n.slen[c]=P[d[c]];switch(v=n.slen[0],b=n.slen[1],y=n.slen[2],w=n.slen[3],s){case 0:n.scalefac_compress=(5*v+b<<4)+(y<<2)+w;break;case 1:n.scalefac_compress=400+(5*v+b<<2)+y;break;case 2:n.scalefac_compress=500+3*v+b;break;default:i.err.printf("intensity stereo not implemented yet\n");break}}if(!_)for(a(null!=n.sfb_partition_table),n.part2_length=0,c=0;c<4;c++)n.part2_length+=n.slen[c]*n.sfb_partition_table[c];return _};var P=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(t){for(var e=2;e<=576;e+=2){var s,i=0;while(t.scalefac_band.l[++i]<e);s=n[i][0];while(t.scalefac_band.l[s+1]>e)s--;s<0&&(s=n[i][0]),t.bv_scf[e-2]=s,s=n[i][1];while(t.scalefac_band.l[s+t.bv_scf[e-2]+2]>e)s--;s<0&&(s=n[i][1]),t.bv_scf[e-1]=s}}}t.exports=_},7095:function(t){function e(){this.setModules=function(t,e){t,e}}t.exports=e},3362:function(t){function e(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}t.exports=e},3398:function(t,e,n){var s=n(1038),i=s.System,r=s.VbrMode,o=(s.Float,s.ShortBlock),a=(s.Util,s.Arrays),l=(s.new_array_n,s.new_byte),c=(s.new_double,s.new_float,s.new_float_n,s.new_int,s.new_int_n,s.assert);function u(){var t,e,n;this.setModules=function(s,i,r){t=s,e=i,n=r};var s=1,h=2,_=4,f=8,p=u.NUMTOCENTRIES,d=u.MAXFRAMESIZE,m=p+4+4+4+4+4,g=m+9+1+1+8+1+1+3+1+1+2+4+2+2,v=128,b=64,y=32,w=null,x="Xing",T="Info",S=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function A(t,e){if(t.nVbrNumFrames++,t.sum+=e,t.seen++,!(t.seen<t.want)&&(t.pos<t.size&&(t.bag[t.pos]=t.sum,t.pos++,t.seen=0),t.pos==t.size)){for(var n=1;n<t.size;n+=2)t.bag[n/2]=t.bag[n];t.want*=2,t.pos/=2}}function k(t,e){if(!(t.pos<=0))for(var n=1;n<p;++n){var s,i,r=n/p,o=0|Math.floor(r*t.pos);o>t.pos-1&&(o=t.pos-1),s=t.bag[o],i=t.sum;var a=0|256*s/i;a>255&&(a=255),e[n]=255&a}}function M(t,e){var n=255&t[e+0];return n<<=8,n|=255&t[e+1],n<<=8,n|=255&t[e+2],n<<=8,n|=255&t[e+3],n}function C(t,e,n){t[e+0]=255&n>>24,t[e+1]=255&n>>16,t[e+2]=255&n>>8,t[e+3]=255&n}function R(t,e,n){t[e+0]=255&n>>8,t[e+1]=255&n}function E(t,e){return new String(t,e,x.length(),w).equals(x)||new String(t,e,T.length(),w).equals(T)}function O(t,e,n){return 255&(t<<e|n&~(-1<<e))}function B(e,n){var s=e.internal_flags;n[0]=O(n[0],8,255),n[1]=O(n[1],3,7),n[1]=O(n[1],1,e.out_samplerate<16e3?0:1),n[1]=O(n[1],1,e.version),n[1]=O(n[1],2,1),n[1]=O(n[1],1,e.error_protection?0:1),n[2]=O(n[2],4,s.bitrate_index),n[2]=O(n[2],2,s.samplerate_index),n[2]=O(n[2],1,0),n[2]=O(n[2],1,e.extension),n[3]=O(n[3],2,e.mode.ordinal()),n[3]=O(n[3],2,s.mode_ext),n[3]=O(n[3],1,e.copyright),n[3]=O(n[3],1,e.original),n[3]=O(n[3],2,e.emphasis),n[0]=255;var i,o,a=241&n[1];i=1==e.version?v:e.out_samplerate<16e3?y:b,e.VBR==r.vbr_off&&(i=e.brate),o=e.free_format?0:255&16*t.BitrateIndex(i,e.version,e.out_samplerate),1==e.version?(n[1]=255&(10|a),a=13&n[2],n[2]=255&(o|a)):(n[1]=255&(2|a),a=13&n[2],n[2]=255&(o|a))}function I(t,e){var n=e^t;return e=e>>8^S[255&n],e}function P(t,e,s,i,r){var a,l,c,u=t.internal_flags,h=0,_=t.encoder_delay,f=t.encoder_padding,p=100-10*t.VBR_q-t.quality,d=n.getLameVeryShortVersion(),m=0,g=[1,5,3,2,4,0,3],v=0|(t.lowpassfreq/100+.5>255?255:t.lowpassfreq/100+.5),b=0,y=0,w=0,x=t.internal_flags.noise_shaping,T=0,S=0,A=0,k=0,M=0,E=0!=(1&t.exp_nspsytune),O=0!=(2&t.exp_nspsytune),B=!1,P=!1,N=t.internal_flags.nogap_total,V=t.internal_flags.nogap_current,D=t.ATHtype,L=0;switch(t.VBR){case vbr_abr:c=t.VBR_mean_bitrate_kbps;break;case vbr_off:c=t.brate;break;default:c=t.VBR_min_bitrate_kbps}switch(a=t.VBR.ordinal()<g.length?g[t.VBR.ordinal()]:0,l=16*m+a,u.findReplayGain&&(u.RadioGain>510&&(u.RadioGain=510),u.RadioGain<-510&&(u.RadioGain=-510),y=8192,y|=3072,u.RadioGain>=0?y|=u.RadioGain:(y|=512,y|=-u.RadioGain)),u.findPeakSample&&(b=Math.abs(0|u.PeakSample/32767*Math.pow(2,23)+.5)),-1!=N&&(V>0&&(P=!0),V<N-1&&(B=!0)),L=D+((E?1:0)<<4)+((O?1:0)<<5)+((B?1:0)<<6)+((P?1:0)<<7),p<0&&(p=0),t.mode){case MONO:T=0;break;case STEREO:T=1;break;case DUAL_CHANNEL:T=2;break;case JOINT_STEREO:T=t.force_ms?4:3;break;case NOT_SET:default:T=7;break}A=t.in_samplerate<=32e3?0:48e3==t.in_samplerate?2:t.in_samplerate>48e3?3:1,(t.short_blocks==o.short_block_forced||t.short_blocks==o.short_block_dispensed||-1==t.lowpassfreq&&-1==t.highpassfreq||t.scale_left<t.scale_right||t.scale_left>t.scale_right||t.disable_reservoir&&t.brate<320||t.noATH||t.ATHonly||0==D||t.in_samplerate<=32e3)&&(S=1),k=x+(T<<2)+(S<<5)+(A<<6),M=u.nMusicCRC,C(s,i+h,p),h+=4;for(var F=0;F<9;F++)s[i+h+F]=255&d.charAt(F);h+=9,s[i+h]=255&l,h++,s[i+h]=255&v,h++,C(s,i+h,b),h+=4,R(s,i+h,y),h+=2,R(s,i+h,w),h+=2,s[i+h]=255&L,h++,s[i+h]=c>=255?255:255&c,h++,s[i+h]=255&_>>4,s[i+h+1]=255&(_<<4)+(f>>8),s[i+h+2]=255&f,h+=3,s[i+h]=255&k,h++,s[i+h++]=0,R(s,i+h,t.preset),h+=2,C(s,i+h,e),h+=4,R(s,i+h,M),h+=2;for(var q=0;q<h;q++)r=I(s[i+q],r);return R(s,i+h,r),h+=2,h}function N(t){t.seek(0);var e,n=l(10);return t.readFully(n),e=new String(n,"ISO-8859-1").startsWith("ID3")?0:((127&n[6])<<21|(127&n[7])<<14|(127&n[8])<<7|127&n[9])+n.length,e}this.addVbrFrame=function(t){var e=t.internal_flags,n=Tables.bitrate_table[t.version][e.bitrate_index];c(null!=e.VBR_seek_table.bag),A(e.VBR_seek_table,n)},this.getVbrTag=function(t){var e=new VBRTagData,n=0;e.flags=0;var i=t[n+1]>>3&1,r=t[n+2]>>2&3,o=t[n+3]>>6&3,a=t[n+2]>>4&15;if(a=Tables.bitrate_table[i][a],t[n+1]>>4==14?e.samprate=Tables.samplerate_table[2][r]:e.samprate=Tables.samplerate_table[i][r],n+=0!=i?3!=o?36:21:3!=o?21:13,!E(t,n))return null;n+=4,e.hId=i;var l=e.flags=M(t,n);if(n+=4,0!=(l&s)&&(e.frames=M(t,n),n+=4),0!=(l&h)&&(e.bytes=M(t,n),n+=4),0!=(l&_)){if(null!=e.toc)for(var c=0;c<p;c++)e.toc[c]=t[n+c];n+=p}e.vbrScale=-1,0!=(l&f)&&(e.vbrScale=M(t,n),n+=4),e.headersize=72e3*(i+1)*a/e.samprate,n+=21;var u=t[n+0]<<4;u+=t[n+1]>>4;var d=(15&t[n+1])<<8;return d+=255&t[n+2],(u<0||u>3e3)&&(u=-1),(d<0||d>3e3)&&(d=-1),e.encDelay=u,e.encPadding=d,e},this.InitVbrTag=function(t){var n,s=t.internal_flags;n=1==t.version?v:t.out_samplerate<16e3?y:b,t.VBR==r.vbr_off&&(n=t.brate);var i=72e3*(t.version+1)*n/t.out_samplerate,o=s.sideinfo_len+g;if(s.VBR_seek_table.TotalFrameSize=i,i<o||i>d)t.bWriteVbrTag=!1;else{s.VBR_seek_table.nVbrNumFrames=0,s.VBR_seek_table.nBytesWritten=0,s.VBR_seek_table.sum=0,s.VBR_seek_table.seen=0,s.VBR_seek_table.want=1,s.VBR_seek_table.pos=0,null==s.VBR_seek_table.bag&&(s.VBR_seek_table.bag=new int[400],s.VBR_seek_table.size=400);var a=l(d);B(t,a);for(var c=s.VBR_seek_table.TotalFrameSize,u=0;u<c;++u)e.add_dummy_byte(t,255&a[u],1)}},this.updateMusicCRC=function(t,e,n,s){for(var i=0;i<s;++i)t[0]=I(e[n+i],t[0])},this.getLameTagFrame=function(t,n){var o=t.internal_flags;if(!t.bWriteVbrTag)return 0;if(o.Class_ID!=Lame.LAME_ID)return 0;if(o.VBR_seek_table.pos<=0)return 0;if(n.length<o.VBR_seek_table.TotalFrameSize)return o.VBR_seek_table.TotalFrameSize;a.fill(n,0,o.VBR_seek_table.TotalFrameSize,0),B(t,n);var c=l(p);if(t.free_format)for(var u=1;u<p;++u)c[u]=255&255*u/100;else k(o.VBR_seek_table,c);var d=o.sideinfo_len;t.error_protection&&(d-=2),t.VBR==r.vbr_off?(n[d++]=255&T.charAt(0),n[d++]=255&T.charAt(1),n[d++]=255&T.charAt(2),n[d++]=255&T.charAt(3)):(n[d++]=255&x.charAt(0),n[d++]=255&x.charAt(1),n[d++]=255&x.charAt(2),n[d++]=255&x.charAt(3)),C(n,d,s+h+_+f),d+=4,C(n,d,o.VBR_seek_table.nVbrNumFrames),d+=4;var m=o.VBR_seek_table.nBytesWritten+o.VBR_seek_table.TotalFrameSize;C(n,d,0|m),d+=4,i.arraycopy(c,0,n,d,c.length),d+=c.length,t.error_protection&&e.CRC_writeheader(o,n);var g=0;for(u=0;u<d;u++)g=I(n[u],g);return d+=P(t,m,n,d,g),o.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(t,e){var n=t.internal_flags;if(n.VBR_seek_table.pos<=0)return-1;if(e.seek(e.length()),0==e.length())return-1;var s=N(e);e.seek(s);var i=l(d),r=getLameTagFrame(t,i);return r>i.length?-1:(r<1||e.write(i,0,r),0)}}u.NUMTOCENTRIES=100,u.MAXFRAMESIZE=2880,t.exports=u},2367:function(t){function e(){var t="http://www.mp3dev.org/",e=3,n=98,s=4,i=0,r=93;this.getLameVersion=function(){return e+"."+n+"."+s},this.getLameShortVersion=function(){return e+"."+n+"."+s},this.getLameVeryShortVersion=function(){return"LAME"+e+"."+n+"r"},this.getPsyVersion=function(){return i+"."+r},this.getLameUrl=function(){return t},this.getLameOsBitness=function(){return"32bits"}}t.exports=e},1038:function(t){function e(t){return new Int8Array(t)}function n(t){return new Int16Array(t)}function s(t){return new Int32Array(t)}function i(t){return new Float32Array(t)}function r(t){return new Float64Array(t)}function o(t){if(1==t.length)return i(t[0]);var e=t[0];t=t.slice(1);for(var n=[],s=0;s<e;s++)n.push(o(t));return n}function a(t){if(1==t.length)return s(t[0]);var e=t[0];t=t.slice(1);for(var n=[],i=0;i<e;i++)n.push(a(t));return n}function l(t){if(1==t.length)return n(t[0]);var e=t[0];t=t.slice(1);for(var s=[],i=0;i<e;i++)s.push(l(t));return s}function c(t){if(1==t.length)return new Array(t[0]);var e=t[0];t=t.slice(1);for(var n=[],s=0;s<e;s++)n.push(c(t));return n}var u={fill:function(t,e,n,s){if(2==arguments.length)for(var i=0;i<t.length;i++)t[i]=arguments[1];else for(i=e;i<n;i++)t[i]=s}},h={arraycopy:function(t,e,n,s,i){var r=e+i;while(e<r)n[s++]=t[e++]}},_={};function f(t){this.ordinal=t}_.SQRT2=1.4142135623730951,_.FAST_LOG10=function(t){return Math.log10(t)},_.FAST_LOG10_X=function(t,e){return Math.log10(t)*e},f.short_block_allowed=new f(0),f.short_block_coupled=new f(1),f.short_block_dispensed=new f(2),f.short_block_forced=new f(3);var p={};function d(t){this.ordinal=t}p.MAX_VALUE=34028235e31,d.vbr_off=new d(0),d.vbr_mt=new d(1),d.vbr_rh=new d(2),d.vbr_abr=new d(3),d.vbr_mtrh=new d(4),d.vbr_default=d.vbr_mtrh;var m=function(t){};t.exports={System:h,VbrMode:d,Float:p,ShortBlock:f,Util:_,Arrays:u,new_array_n:c,new_byte:e,new_double:r,new_float:i,new_float_n:o,new_int:s,new_int_n:a,new_short:n,new_short_n:l,assert:m}},5644:function(t,e,n){var s=n(1038),i=(s.System,s.VbrMode,s.Float,s.ShortBlock,s.Util,s.Arrays,s.new_array_n,s.new_byte),r=(s.new_double,s.new_float,s.new_float_n,s.new_int,s.new_int_n,s.assert);Lame=n(4566),Presets=n(9457),GainAnalysis=n(1287),QuantizePVT=n(429),Quantize=n(9833),Takehiro=n(5638),Reservoir=n(3060),MPEGMode=n(8231),BitStream=n(3724);n(687);var o=n(2367),a=n(3398);function l(){this.setModules=function(t,e){t,e}}function c(){this.setModules=function(t,e,n){t,e,n}}function u(){}function h(){this.setModules=function(t,e){t,e}}function _(t,e,n){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),t=1,e=44100,n=128);var s=new Lame,_=new l,f=new GainAnalysis,p=new BitStream,d=new Presets,m=new QuantizePVT,g=new Quantize,v=new a,b=new o,y=new h,w=new Reservoir,x=new Takehiro,T=new c,S=new u;s.setModules(f,p,d,m,g,v,b,y,S),p.setModules(f,S,b,v),y.setModules(p,b),d.setModules(s),g.setModules(p,w,m,x),m.setModules(x,w,s.enc.psy),w.setModules(p),x.setModules(m),v.setModules(s,p,b),_.setModules(T,S),T.setModules(b,y,d);var A=s.lame_init();A.num_channels=t,A.in_samplerate=e,A.brate=n,A.mode=MPEGMode.STEREO,A.quality=3,A.bWriteVbrTag=!1,A.disable_reservoir=!0,A.write_id3tag_automatic=!1;var k=s.lame_init_params(A);r(0==k);var M=1152,C=0|1.25*M+7200,R=i(C);this.encodeBuffer=function(e,n){1==t&&(n=e),r(e.length==n.length),e.length>M&&(M=e.length,C=0|1.25*M+7200,R=i(C));var o=s.lame_encode_buffer(A,e,n,e.length,R,0,C);return new Int8Array(R.subarray(0,o))},this.flush=function(){var t=s.lame_encode_flush(A,R,0,C);return new Int8Array(R.subarray(0,t))}}function f(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function p(t){return t.charCodeAt(0)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3)}f.RIFF=p("RIFF"),f.WAVE=p("WAVE"),f.fmt_=p("fmt "),f.data=p("data"),f.readHeader=function(t){var e=new f,n=t.getUint32(0,!1);if(f.RIFF==n){t.getUint32(4,!0);if(f.WAVE==t.getUint32(8,!1)&&f.fmt_==t.getUint32(12,!1)){var s=t.getUint32(16,!0),i=20;switch(s){case 16:case 18:e.channels=t.getUint16(i+2,!0),e.sampleRate=t.getUint32(i+4,!0);break;default:throw"extended fmt chunk not implemented"}i+=s;var r=f.data,o=0;while(r!=n){if(n=t.getUint32(i,!1),o=t.getUint32(i+4,!0),r==n)break;i+=o+8}return e.dataLen=o,e.dataOffset=i+8,e}}},t.exports.d=_,t.exports.Q=f},9933:function(t){function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}t.exports=e,t.exports.__esModule=!0,t.exports["default"]=t.exports},8419:function(t){function e(t){if(Array.isArray(t))return t}t.exports=e,t.exports.__esModule=!0,t.exports["default"]=t.exports},2547:function(t,e,n){function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n(1703),t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},3515:function(t){function e(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},6066:function(t){function e(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var s,i,r=[],o=!0,a=!1;try{for(n=n.call(t);!(o=(s=n.next()).done);o=!0)if(r.push(s.value),e&&r.length===e)break}catch(l){a=!0,i=l}finally{try{o||null==n["return"]||n["return"]()}finally{if(a)throw i}}return r}}t.exports=e,t.exports.__esModule=!0,t.exports["default"]=t.exports},8826:function(t,e,n){function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n(1703),t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},2:function(t,e,n){var s=n(8419),i=n(6066),r=n(7486),o=n(8826);function a(t,e){return s(t)||i(t,e)||r(t,e)||o()}t.exports=a,t.exports.__esModule=!0,t.exports["default"]=t.exports},7486:function(t,e,n){var s=n(9933);function i(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},2123:function(t,e,n){"use strict";n.d(e,{B6:function(){return Sl},D_:function(){return ql},J5:function(){return tc},Y3:function(){return Sc}});const s="14.7.77";var i=n(5382);const r=()=>new DOMException("","AbortError"),o=t=>(e,n,[s,i,r],o)=>{t(e[i],[n,s,r],(t=>t[0]===n&&t[1]===s),o)},a=t=>(e,n,s)=>{const i=[];for(let t=0;t<s.numberOfInputs;t+=1)i.push(new Set);t.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},l=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},c=new WeakSet,u=new WeakMap,h=new WeakMap,_=new WeakMap,f=new WeakMap,p=new WeakMap,d=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,b={construct(){return b}},y=t=>{try{const e=new Proxy(t,b);new e}catch{return!1}return!0},w=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,x=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),i=s.match(w);while(null!==i){const t=i[1].slice(1,-1),r=i[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(r),s=s.slice(i[0].length).replace(/^[\s]+/,""),i=s.match(w)}return[n.join(";"),s]},T=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},S=t=>{if(!y(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!==typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},A=(t,e,n,s,i,r,o,a,l,c,u,h,_)=>{let f=0;return(p,d,m={credentials:"omit"})=>{const v=u.get(p);if(void 0!==v&&v.has(d))return Promise.resolve();const b=c.get(p);if(void 0!==b){const t=b.get(d);if(void 0!==t)return t}const y=r(p),w=void 0===y.audioWorklet?i(d).then((([t,e])=>{const[s,i]=x(t,e),r=`${s};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${i}\n})})(window,'_AWGS')`;return n(r)})).then((()=>{const t=_._AWGS.pop();if(void 0===t)throw new SyntaxError;s(y.currentTime,y.sampleRate,(()=>t(class{},void 0,((t,n)=>{if(""===t.trim())throw e();const s=g.get(y);if(void 0!==s){if(s.has(t))throw e();S(n),T(n.parameterDescriptors),s.set(t,n)}else S(n),T(n.parameterDescriptors),g.set(y,new Map([[t,n]]))}),y.sampleRate,void 0,void 0)))})):Promise.all([i(d),Promise.resolve(t(h,h))]).then((([[t,e],n])=>{const s=f+1;f=s;const[i,r]=x(t,e),c=n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}",u=n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));",h=n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));",_=`${i};((AudioWorkletProcessor,registerProcessor)=>{${r}\n})(${c},(n,p)=>registerProcessor(n,class extends p{${u}process(i,o,p){${h}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${s}',class extends AudioWorkletProcessor{process(){return !1}})`,p=new Blob([_],{type:"application/javascript; charset=utf-8"}),d=URL.createObjectURL(p);return y.audioWorklet.addModule(d,m).then((()=>{if(a(y))return y;const t=o(y);return t.audioWorklet.addModule(d,m).then((()=>t))})).then((t=>{if(null===l)throw new SyntaxError;try{new l(t,`__sac${s}`)}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(d)))}));return void 0===b?c.set(p,new Map([[d,w]])):b.set(d,w),w.then((()=>{const t=u.get(p);void 0===t?u.set(p,new Set([d])):t.add(d)})).finally((()=>{const t=c.get(p);void 0!==t&&t.delete(d)})),w}},k=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},M=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[s]=n;return t.delete(s),s},C=(t,e,n,s)=>{const i=k(t,e),r=M(i,(t=>t[0]===n&&t[1]===s));return 0===i.size&&t.delete(e),r},R=t=>k(d,t),E=t=>{if(c.has(t))throw new Error("The AudioNode is already stored.");c.add(t),R(t).forEach((t=>t(!0)))},O=t=>"port"in t,B=t=>{if(!c.has(t))throw new Error("The AudioNode is not stored.");c["delete"](t),R(t).forEach((t=>t(!1)))},I=(t,e)=>{!O(t)&&e.every((t=>0===t.size))&&B(t)},P=(t,e,n,s,i,r,o,a,l,c,u,h,_)=>{const f=new WeakMap;return(p,d,m,g,v)=>{const{activeInputs:b,passiveInputs:y}=r(d),{outputs:w}=r(p),x=a(p),T=r=>{const a=l(d),c=l(p);if(r){const e=C(y,p,m,g);t(b,p,e,!1),v||h(p)||n(c,a,m,g),_(d)&&E(d)}else{const t=s(b,p,m,g);e(y,g,t,!1),v||h(p)||i(c,a,m,g);const n=o(d);if(0===n)u(d)&&I(d,b);else{const t=f.get(d);void 0!==t&&clearTimeout(t),f.set(d,setTimeout((()=>{u(d)&&I(d,b)}),1e3*n))}}};return!!c(w,[d,m,g],(t=>t[0]===d&&t[1]===m&&t[2]===g),!0)&&(x.add(T),u(p)?t(b,p,[m,g,T],!0):e(y,g,[p,m,T],!0),!0)}},N=t=>(e,n,[s,i,r],o)=>{const a=e.get(s);void 0===a?e.set(s,new Set([[i,n,r]])):t(a,[i,n,r],(t=>t[0]===i&&t[1]===n),o)},V=t=>(e,n)=>{const s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(s),s.disconnect()};n.addEventListener("ended",i)},D=t=>(e,n)=>{t(e).add(n)},L={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},F=(t,e,n,s,i,r)=>class extends t{constructor(t,n){const o=i(t),a={...L,...n},l=s(o,a),c=r(o)?e():null;super(t,!1,l,c),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}},q=(t,e)=>t.context===e,j=(t,e,n)=>()=>{const s=new WeakMap,i=async(i,r)=>{let o=e(i);const a=q(o,r);if(!a){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=t(r,e)}return s.set(r,o),await n(i,r,o),o};return{render(t,e){const n=s.get(e);return void 0!==n?Promise.resolve(n):i(t,e)}}},H=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},X=()=>new DOMException("","IndexSizeError"),U=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(s){if(12===s.code)throw X();throw s}})(t.getChannelData)},Y={numberOfChannels:1},W=(t,e,n,s,i,r,o,a)=>{let l=null;return class c{constructor(c){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:h,sampleRate:_}={...Y,...c};null===l&&(l=new i(1,1,44100));const f=null!==s&&e(r,r)?new s({length:u,numberOfChannels:h,sampleRate:_}):l.createBuffer(h,u,_);if(0===f.numberOfChannels)throw n();return"function"!==typeof f.copyFromChannel?(o(f),U(f)):e(H,(()=>H(f)))||a(f),t.add(f),f}static[Symbol.hasInstance](e){return null!==e&&"object"===typeof e&&Object.getPrototypeOf(e)===c.prototype||t.has(e)}}},G=-34028234663852886e22,z=-G,Z=t=>c.has(t),K={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Q=(t,e,n,s,i,r,o,a)=>class extends t{constructor(t,s){const a=r(t),l={...K,...s},c=i(a,l),u=o(a),h=u?e():null;super(t,!1,c,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=c,this._onended=null,this._playbackRate=n(this,u,c.playbackRate,z,G)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){const e="function"===typeof t?a(this,t):null;this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){E(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),Z(this)&&B(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}},$=(t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null;const l=async(l,c)=>{let u=n(l);const h=q(u,c);if(!h){const t={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=e(c,t),null!==o&&u.start(...o),null!==a&&u.stop(a)}return r.set(c,u),h?await t(c,l.playbackRate,u.playbackRate):await s(c,l.playbackRate,u.playbackRate),await i(l,c,u),u};return{set start(t){o=t},set stop(t){a=t},render(t,e){const n=r.get(e);return void 0!==n?Promise.resolve(n):l(t,e)}}},J=t=>"playbackRate"in t,tt=t=>"frequency"in t&&"gain"in t,et=t=>"offset"in t,nt=t=>!("frequency"in t)&&"gain"in t,st=t=>"detune"in t&&"frequency"in t,it=t=>"pan"in t,rt=t=>k(u,t),ot=t=>k(_,t),at=(t,e)=>{const{activeInputs:n}=rt(t);n.forEach((n=>n.forEach((([n])=>{e.includes(t)||at(n,[...e,t])}))));const s=J(t)?[t.playbackRate]:O(t)?Array.from(t.parameters.values()):tt(t)?[t.Q,t.detune,t.frequency,t.gain]:et(t)?[t.offset]:nt(t)?[t.gain]:st(t)?[t.detune,t.frequency]:it(t)?[t.pan]:[];for(const i of s){const t=ot(i);void 0!==t&&t.activeInputs.forEach((([t])=>at(t,e)))}Z(t)&&B(t)},lt=t=>{at(t.destination,[])},ct=t=>void 0===t||"number"===typeof t||"string"===typeof t&&("balanced"===t||"interactive"===t||"playback"===t),ut=(t,e,n,s,i,r,o,a,l)=>class extends t{constructor(t={}){if(null===l)throw new Error("Missing the native AudioContext constructor.");let e;try{e=new l(t)}catch(o){if(12===o.code&&"sampleRate is not in range"===o.message)throw n();throw o}if(null===e)throw s();if(!ct(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:i}=t,{sampleRate:r}=e;if(this._baseLatency="number"===typeof e.baseLatency?e.baseLatency:"balanced"===i?512/r:"interactive"===i||void 0===i?256/r:"playback"===i?1024/r:128*Math.max(2,Math.min(128,Math.round(i*r/128)))/r,this._nativeAudioContext=e,"webkitAudioContext"===l.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),lt(this)})))}createMediaElementSource(t){return new i(this,{mediaElement:t})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(t){return new o(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise(((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((t=>{if(void 0===t||15===t.code)throw e();throw t}))}suspend(){return this._nativeAudioContext.suspend().catch((t=>{if(void 0===t)throw e();throw t}))}},ht=(t,e,n,s,i,r,o,a)=>class extends t{constructor(t,n){const s=r(t),l=o(s),c=i(s,n,l),u=l?e(a):null;super(t,!1,c,u),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},_t=t=>{const e=new WeakMap,n=async(n,s)=>{const i=s.destination;return e.set(s,i),await t(n,s,i),i};return{render(t,s){const i=e.get(s);return void 0!==i?Promise.resolve(i):n(t,s)}}},ft=(t,e,n,s,i,r,o,a)=>(l,c)=>{const u=c.listener,h=()=>{const h=new Float32Array(1),_=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),f=o(c);let p=!1,d=[0,0,-1,0,1,0],m=[0,0,0];const g=()=>{if(p)return;p=!0;const t=s(c,256,9,0);t.onaudioprocess=({inputBuffer:t})=>{const e=[r(t,h,0),r(t,h,1),r(t,h,2),r(t,h,3),r(t,h,4),r(t,h,5)];e.some(((t,e)=>t!==d[e]))&&(u.setOrientation(...e),d=e);const n=[r(t,h,6),r(t,h,7),r(t,h,8)];n.some(((t,e)=>t!==m[e]))&&(u.setPosition(...n),m=n)},_.connect(t)},v=t=>e=>{e!==d[t]&&(d[t]=e,u.setOrientation(...d))},b=t=>e=>{e!==m[t]&&(m[t]=e,u.setPosition(...m))},y=(e,s,r)=>{const o=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:s});o.connect(_,0,e),o.start(),Object.defineProperty(o.offset,"defaultValue",{get(){return s}});const u=t({context:l},f,o.offset,z,G);return a(u,"value",(t=>()=>t.call(u)),(t=>e=>{try{t.call(u,e)}catch(n){if(9!==n.code)throw n}g(),f&&r(e)})),u.cancelAndHoldAtTime=(t=>f?()=>{throw i()}:(...e)=>{const n=t.apply(u,e);return g(),n})(u.cancelAndHoldAtTime),u.cancelScheduledValues=(t=>f?()=>{throw i()}:(...e)=>{const n=t.apply(u,e);return g(),n})(u.cancelScheduledValues),u.exponentialRampToValueAtTime=(t=>f?()=>{throw i()}:(...e)=>{const n=t.apply(u,e);return g(),n})(u.exponentialRampToValueAtTime),u.linearRampToValueAtTime=(t=>f?()=>{throw i()}:(...e)=>{const n=t.apply(u,e);return g(),n})(u.linearRampToValueAtTime),u.setTargetAtTime=(t=>f?()=>{throw i()}:(...e)=>{const n=t.apply(u,e);return g(),n})(u.setTargetAtTime),u.setValueAtTime=(t=>f?()=>{throw i()}:(...e)=>{const n=t.apply(u,e);return g(),n})(u.setValueAtTime),u.setValueCurveAtTime=(t=>f?()=>{throw i()}:(...e)=>{const n=t.apply(u,e);return g(),n})(u.setValueCurveAtTime),u};return{forwardX:y(0,0,v(0)),forwardY:y(1,0,v(1)),forwardZ:y(2,-1,v(2)),positionX:y(6,0,b(0)),positionY:y(7,0,b(1)),positionZ:y(8,0,b(2)),upX:y(3,0,v(3)),upY:y(4,1,v(4)),upZ:y(5,0,v(5))}},{forwardX:_,forwardY:f,forwardZ:p,positionX:d,positionY:m,positionZ:g,upX:v,upY:b,upZ:y}=void 0===u.forwardX?h():u;return{get forwardX(){return _},get forwardY(){return f},get forwardZ(){return p},get positionX(){return d},get positionY(){return m},get positionZ(){return g},get upX(){return v},get upY(){return b},get upZ(){return y}}},pt=t=>"context"in t,dt=t=>pt(t[0]),mt=(t,e,n,s)=>{for(const i of t)if(n(i)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},gt=(t,e,[n,s],i)=>{mt(t,[e,n,s],(t=>t[0]===e&&t[1]===n),i)},vt=(t,[e,n,s],i)=>{const r=t.get(e);void 0===r?t.set(e,new Set([[n,s]])):mt(r,[n,s],(t=>t[0]===n),i)},bt=t=>"inputs"in t,yt=(t,e,n,s)=>{if(bt(e)){const i=e.inputs[s];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,s),[e,n,s]},wt=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},xt=(t,e,n)=>M(t,(t=>t[0]===e&&t[1]===n)),Tt=(t,e)=>{const n=R(t);if(!n.delete(e))throw new Error("Missing the expected event listener.")},St=(t,e,n)=>{const s=k(t,e),i=M(s,(t=>t[0]===n));return 0===s.size&&t.delete(e),i},At=(t,e,n,s)=>{bt(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},kt=t=>k(h,t),Mt=t=>k(f,t),Ct=t=>m.has(t),Rt=t=>!c.has(t),Et=(t,e)=>new Promise((n=>{if(null!==e)n(!0);else{const e=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),r=i.getChannelData(0);r[0]=1,r[1]=1;const o=t.createBufferSource();o.buffer=i,o.loop=!0,o.connect(e).connect(t.destination),o.connect(s),o.disconnect(s),e.onaudioprocess=s=>{const i=s.inputBuffer.getChannelData(0);Array.prototype.some.call(i,(t=>1===t))?n(!0):n(!1),o.stop(),e.onaudioprocess=null,o.disconnect(e),e.disconnect(t.destination)},o.start()}})),Ot=(t,e)=>{const n=new Map;for(const s of t)for(const t of s){const e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach(((t,n)=>e(n,t)))},Bt=t=>"context"in t,It=t=>{const e=new Map;t.connect=(t=>(n,s=0,i=0)=>{const r=Bt(n)?t(n,s,i):t(n,s),o=e.get(n);return void 0===o?e.set(n,[{input:i,output:s}]):o.every((t=>t.input!==i||t.output!==s))&&o.push({input:i,output:s}),r})(t.connect.bind(t)),t.disconnect=(n=>(s,i,r)=>{if(n.apply(t),void 0===s)e.clear();else if("number"===typeof s)for(const[t,n]of e){const i=n.filter((t=>t.output!==s));0===i.length?e.delete(t):e.set(t,i)}else if(e.has(s))if(void 0===i)e.delete(s);else{const t=e.get(s);if(void 0!==t){const n=t.filter((t=>t.output!==i&&(t.input!==r||void 0===r)));0===n.length?e.delete(s):e.set(s,n)}}for(const[n,o]of e)o.forEach((e=>{Bt(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)}))})(t.disconnect)},Pt=(t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=ot(e),{outputs:o}=rt(t),a=R(t),l=o=>{const a=kt(t),l=Mt(e);if(o){const e=St(r,t,n);gt(i,t,e,!1),s||Ct(t)||a.connect(l,n)}else{const e=xt(i,t,n);vt(r,e,!1),s||Ct(t)||a.disconnect(l,n)}};return!!mt(o,[e,n],(t=>t[0]===e&&t[1]===n),!0)&&(a.add(l),Z(t)?gt(i,t,[n,l],!0):vt(r,[t,n,l],!0),!0)},Nt=(t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=rt(e),o=wt(i[s],t,n);if(null===o){const e=C(r,t,n,s);return[e[2],!1]}return[o[2],!0]},Vt=(t,e,n)=>{const{activeInputs:s,passiveInputs:i}=ot(e),r=wt(s,t,n);if(null===r){const e=St(i,t,n);return[e[1],!1]}return[r[2],!0]},Dt=(t,e,n,s,i)=>{const[r,o]=Nt(t,n,s,i);if(null!==r&&(Tt(t,r),!o||e||Ct(t)||At(kt(t),kt(n),s,i)),Z(n)){const{activeInputs:t}=rt(n);I(n,t)}},Lt=(t,e,n,s)=>{const[i,r]=Vt(t,n,s);null!==i&&(Tt(t,i),!r||e||Ct(t)||kt(t).disconnect(Mt(n),s))},Ft=(t,e)=>{const n=rt(t),s=[];for(const i of n.outputs)dt(i)?Dt(t,e,...i):Lt(t,e,...i),s.push(i[0]);return n.outputs.clear(),s},qt=(t,e,n)=>{const s=rt(t),i=[];for(const r of s.outputs)r[1]===n&&(dt(r)?Dt(t,e,...r):Lt(t,e,...r),i.push(r[0]),s.outputs.delete(r));return i},jt=(t,e,n,s,i)=>{const r=rt(t);return Array.from(r.outputs).filter((t=>t[0]===n&&(void 0===s||t[1]===s)&&(void 0===i||t[2]===i))).map((n=>(dt(n)?Dt(t,e,...n):Lt(t,e,...n),r.outputs.delete(n),n[0])))},Ht=(t,e,n,s,i,r,o,a,l,c,u,_,f,p,m,g)=>class extends c{constructor(e,s,i,r){super(i),this._context=e,this._nativeAudioNode=i;const o=u(e);_(o)&&!0!==n(Et,(()=>Et(o,g)))&&It(i),h.set(this,i),d.set(this,new Set),"closed"!==e.state&&s&&E(this),t(this,r,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,a=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();const c=u(this._context),h=m(c);if(f(t)||p(t))throw r();if(pt(t)){const i=kt(t);try{const e=yt(this._nativeAudioNode,i,n,a),s=Rt(this);(h||s)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!s&&Rt(t)&&E(t)}catch(g){if(12===g.code)throw r();throw g}const o=e(this,t,n,a,h);if(o){const e=l([this],t);Ot(e,s(h))}return t}const _=Mt(t);if("playbackRate"===_.name&&1024===_.maxValue)throw o();try{this._nativeAudioNode.connect(_,n),(h||Rt(this))&&this._nativeAudioNode.disconnect(_,n)}catch(g){if(12===g.code)throw r();throw g}const d=Pt(this,t,n,h);if(d){const e=l([this],t);Ot(e,s(h))}}disconnect(t,e,n){let s;const o=u(this._context),c=m(o);if(void 0===t)s=Ft(this,c);else if("number"===typeof t){if(t<0||t>=this.numberOfOutputs)throw i();s=qt(this,c,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw i();if(pt(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw i();if(s=jt(this,c,t,e,n),0===s.length)throw r()}for(const i of s){const t=l([this],i);Ot(t,a)}}},Xt=(t,e,n,s,r,o,a,l,c,u,h,_,f)=>(p,d,m,g=null,v=null)=>{const b=new i.AutomationEventList(m.defaultValue),y=d?s(b):null,w={get defaultValue(){return m.defaultValue},get maxValue(){return null===g?m.maxValue:g},get minValue(){return null===v?m.minValue:v},get value(){return m.value},set value(t){m.value=t,w.setValueAtTime(t,p.context.currentTime)},cancelAndHoldAtTime(t){if("function"===typeof m.cancelAndHoldAtTime)null===y&&b.flush(p.context.currentTime),b.add(r(t)),m.cancelAndHoldAtTime(t);else{const e=Array.from(b).pop();null===y&&b.flush(p.context.currentTime),b.add(r(t));const n=Array.from(b).pop();m.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return w},cancelScheduledValues(t){return null===y&&b.flush(p.context.currentTime),b.add(o(t)),m.cancelScheduledValues(t),w},exponentialRampToValueAtTime(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;return null===y&&b.flush(p.context.currentTime),b.add(a(t,e)),m.exponentialRampToValueAtTime(t,e),w},linearRampToValueAtTime(t,e){return null===y&&b.flush(p.context.currentTime),b.add(l(t,e)),m.linearRampToValueAtTime(t,e),w},setTargetAtTime(t,e,n){return null===y&&b.flush(p.context.currentTime),b.add(c(t,e,n)),m.setTargetAtTime(t,e,n),w},setValueAtTime(t,e){return null===y&&b.flush(p.context.currentTime),b.add(u(t,e)),m.setValueAtTime(t,e),w},setValueCurveAtTime(t,e,n){const s=t instanceof Float32Array?t:new Float32Array(t);if(null!==_&&"webkitAudioContext"===_.name){const t=e+n,i=p.context.sampleRate,r=Math.ceil(e*i),o=Math.floor(t*i),a=o-r,l=new Float32Array(a);for(let u=0;u<a;u+=1){const t=(s.length-1)/n*((r+u)/i-e),o=Math.floor(t),a=Math.ceil(t);l[u]=o===a?s[o]:(1-(t-o))*s[o]+(1-(a-t))*s[a]}null===y&&b.flush(p.context.currentTime),b.add(h(l,e,n)),m.setValueCurveAtTime(l,e,n);const c=o/i;c<t&&f(w,l[l.length-1],c),f(w,s[s.length-1],t)}else null===y&&b.flush(p.context.currentTime),b.add(h(s,e,n)),m.setValueCurveAtTime(s,e,n);return w}};return n.set(w,m),e.set(w,p),t(w,y),w},Ut=t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:s}=n;e.exponentialRampToValueAtTime(s,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:s}=n;e.linearRampToValueAtTime(s,t)}else if("setTarget"===n.type){const{startTime:t,target:s,timeConstant:i}=n;e.setTargetAtTime(s,t,i)}else if("setValue"===n.type){const{startTime:t,value:s}=n;e.setValueAtTime(s,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,t)}}}});class Yt{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach(((n,s)=>t.call(e,n,s,this)))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const Wt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Gt=(t,e,n,s,i,r,o,a,l,c,u,h,_,f)=>class extends e{constructor(e,f,p){var d;const m=a(e),v=l(m),b=u({...Wt,...p});_(b);const y=g.get(m),w=null===y||void 0===y?void 0:y.get(f),x=v||"closed"!==m.state?m:null!==(d=o(m))&&void 0!==d?d:m,T=i(x,v?null:e.baseLatency,c,f,w,b),S=v?s(f,b,w):null;super(e,!0,T,S);const A=[];T.parameters.forEach(((t,e)=>{const s=n(this,v,t);A.push([e,s])})),this._nativeAudioWorkletNode=T,this._onprocessorerror=null,this._parameters=new Yt(A),v&&t(m,this);const{activeInputs:k}=r(this);h(T,k)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e="function"===typeof t?f(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function zt(t,e,n,s,i){if("function"===typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,i);else{const r=t.getChannelData(s);if(0===e[n].byteLength)e[n]=r.slice(i,i+128);else{const t=new Float32Array(r.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const Zt=(t,e,n,s,i)=>{"function"===typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],s,i):0!==e[n].byteLength&&t.getChannelData(s).set(e[n],i)},Kt=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const t=[],i="number"===typeof e?e:e[s];for(let e=0;e<i;e+=1)t.push(new Float32Array(128));n.push(t)}return n},Qt=(t,e)=>{const n=k(v,t),s=kt(e);return k(n,s)},$t=async(t,e,n,s,i,r,o)=>{const a=null===e?128*Math.ceil(t.context.length/128):e.length,l=s.channelCount*s.numberOfInputs,c=i.reduce(((t,e)=>t+e),0),u=0===c?null:n.createBuffer(c,a,n.sampleRate);if(void 0===r)throw new Error("Missing the processor constructor.");const h=rt(t),_=await Qt(n,t),f=Kt(s.numberOfInputs,s.channelCount),p=Kt(s.numberOfOutputs,i),d=Array.from(t.parameters.keys()).reduce(((t,e)=>({...t,[e]:new Float32Array(128)})),{});for(let g=0;g<a;g+=128){if(s.numberOfInputs>0&&null!==e)for(let t=0;t<s.numberOfInputs;t+=1)for(let n=0;n<s.channelCount;n+=1)zt(e,f[t],n,n,g);void 0!==r.parameterDescriptors&&null!==e&&r.parameterDescriptors.forEach((({name:t},n)=>{zt(e,d,t,l+n,g)}));for(let t=0;t<s.numberOfInputs;t+=1)for(let e=0;e<i[t];e+=1)0===p[t][e].byteLength&&(p[t][e]=new Float32Array(128));try{const t=f.map(((t,e)=>0===h.activeInputs[e].size?[]:t)),e=o(g/n.sampleRate,n.sampleRate,(()=>_.process(t,p,d)));if(null!==u)for(let n=0,r=0;n<s.numberOfOutputs;n+=1){for(let t=0;t<i[n];t+=1)Zt(u,p[n],t,r+t,g);r+=i[n]}if(!e)break}catch(m){t.dispatchEvent(new ErrorEvent("processorerror",{colno:m.colno,filename:m.filename,lineno:m.lineno,message:m.message}));break}}return u},Jt=(t,e,n,s,i,r,o,a,l,c,u,h,_,f,p,d)=>(m,g,v)=>{const b=new WeakMap;let y=null;const w=async(a,w)=>{let x=u(a),T=null;const S=q(x,w),A=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(null===h){const t=A.reduce(((t,e)=>t+e),0),n=i(w,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),r=[];for(let e=0;e<a.numberOfOutputs;e+=1)r.push(s(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[e]}));const c=o(w,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});c.connect=e.bind(null,r),c.disconnect=l.bind(null,r),T=[n,r,c]}else S||(x=new h(w,m));if(b.set(w,null===T?x:T[2]),null!==T){if(null===y){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===_)throw new Error("Missing the native OfflineAudioContext constructor.");const t=a.channelCount*a.numberOfInputs,e=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,n=t+e,l=async()=>{const l=new _(n,128*Math.ceil(a.context.length/128),w.sampleRate),c=[],u=[];for(let t=0;t<g.numberOfInputs;t+=1)c.push(o(l,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),u.push(i(l,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const h=await Promise.all(Array.from(a.parameters.values()).map((async t=>{const e=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await f(l,t,e.offset),e}))),m=s(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<g.numberOfInputs;t+=1){c[t].connect(u[t]);for(let e=0;e<g.channelCount;e+=1)u[t].connect(m,e,t*g.channelCount+e)}for(const[e,n]of h.entries())n.connect(m,0,t+e),n.start(0);return m.connect(l.destination),await Promise.all(c.map((t=>p(a,l,t)))),d(l)};y=$t(a,0===n?null:await l(),w,g,A,v,c)}const t=await y,e=n(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,u,h]=T;null!==t&&(e.buffer=t,e.start(0)),e.connect(l);for(let n=0,s=0;n<a.numberOfOutputs;n+=1){const t=u[n];for(let e=0;e<A[n];e+=1)l.connect(t,s+e,e);s+=A[n]}return h}if(S)for(const[e,n]of a.parameters.entries())await t(w,n,x.parameters.get(e));else for(const[t,e]of a.parameters.entries())await f(w,e,x.parameters.get(t));return await p(a,w,x),x};return{render(t,e){a(e,t);const n=b.get(e);return void 0!==n?Promise.resolve(n):w(t,e)}}},te=(t,e,n,s,i,r,o,a,l,c,u,h,_,f,p,d,m,g,v,b)=>class extends p{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(t,e,s){return new n({length:e,numberOfChannels:t,sampleRate:s})}createBufferSource(){return new s(this)}createChannelMerger(t=6){return new r(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new o(this,{numberOfOutputs:t})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(t=1){return new u(this,{maxDelayTime:t})}createDynamicsCompressor(){return new h(this)}createGain(){return new _(this)}createIIRFilter(t,e){return new f(this,{feedback:e,feedforward:t})}createOscillator(){return new d(this)}createPanner(){return new m(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new g(this,{...n,imag:e,real:t})}createStereoPanner(){return new v(this)}createWaveShaper(){return new b(this)}decodeAudioData(t,e,n){return c(this._nativeContext,t).then((t=>("function"===typeof e&&e(t),t)),(t=>{throw"function"===typeof n&&n(t),t}))}},ee={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},ne=(t,e,n,s,i,r,o,a)=>class extends t{constructor(t,s){const l=r(t),c={...ee,...s},u=i(l,c),h=o(l),_=h?n():null;super(t,!1,u,_),this._Q=e(this,h,u.Q,z,G),this._detune=e(this,h,u.detune,1200*Math.log2(z),-1200*Math.log2(z)),this._frequency=e(this,h,u.frequency,t.sampleRate/2,0),this._gain=e(this,h,u.gain,40*Math.log10(z),G),this._nativeBiquadFilterNode=u,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(i){if(11===i.code)throw s();throw i}if(t.length!==e.length||e.length!==n.length)throw s()}},se=(t,e,n,s,i)=>()=>{const r=new WeakMap,o=async(o,a)=>{let l=n(o);const c=q(l,a);if(!c){const t={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(a,t)}return r.set(a,l),c?(await t(a,o.Q,l.Q),await t(a,o.detune,l.detune),await t(a,o.frequency,l.frequency),await t(a,o.gain,l.gain)):(await s(a,o.Q,l.Q),await s(a,o.detune,l.detune),await s(a,o.frequency,l.frequency),await s(a,o.gain,l.gain)),await i(o,a,l),l};return{render(t,e){const n=r.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}},ie=(t,e)=>(n,s)=>{const i=e.get(n);if(void 0!==i)return i;const r=t.get(n);if(void 0!==r)return r;try{const i=s();return i instanceof Promise?(t.set(n,i),i.catch((()=>!1)).then((s=>(t.delete(n),e.set(n,s),s)))):(e.set(n,i),i)}catch{return e.set(n,!1),!1}},re={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},oe=(t,e,n,s,i)=>class extends t{constructor(t,r){const o=s(t),a={...re,...r},l=n(o,a),c=i(o)?e():null;super(t,!1,l,c)}},ae=(t,e,n)=>()=>{const s=new WeakMap,i=async(i,r)=>{let o=e(i);const a=q(o,r);if(!a){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=t(r,e)}return s.set(r,o),await n(i,r,o),o};return{render(t,e){const n=s.get(e);return void 0!==n?Promise.resolve(n):i(t,e)}}},le={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},ce=(t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=s(t),l=r({...le,...o}),c=n(a,l),u=i(a)?e():null;super(t,!1,c,u)}},ue=(t,e,n)=>()=>{const s=new WeakMap,i=async(i,r)=>{let o=e(i);const a=q(o,r);if(!a){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=t(r,e)}return s.set(r,o),await n(i,r,o),o};return{render(t,e){const n=s.get(e);return void 0!==n?Promise.resolve(n):i(t,e)}}},he=t=>(e,n,s)=>t(n,e,s),_e=t=>(e,n,s=0,i=0)=>{const r=e[s];if(void 0===r)throw t();return Bt(n)?r.connect(n,0,i):r.connect(n,0)},fe=t=>(e,n)=>{const s=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return s.buffer=i,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}},pe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},de=(t,e,n,s,i,r,o)=>class extends t{constructor(t,o){const a=i(t),l={...pe,...o},c=s(a,l),u=r(a),h=u?n():null;super(t,!1,c,h),this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=c,this._offset=e(this,u,c.offset,z,G),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e="function"===typeof t?o(this,t):null;this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){E(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),Z(this)&&B(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}},me=(t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null;const l=async(l,c)=>{let u=n(l);const h=q(u,c);if(!h){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=e(c,t),null!==o&&u.start(o),null!==a&&u.stop(a)}return r.set(c,u),h?await t(c,l.offset,u.offset):await s(c,l.offset,u.offset),await i(l,c,u),u};return{set start(t){o=t},set stop(t){a=t},render(t,e){const n=r.get(e);return void 0!==n?Promise.resolve(n):l(t,e)}}},ge=t=>e=>(t[0]=e,t[0]),ve={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},be=(t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=s(t),l={...ve,...o},c=n(a,l),u=i(a),h=u?e():null;super(t,!1,c,h),this._isBufferNullified=!1,this._nativeConvolverNode=c,null!==l.buffer&&r(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,44100),this._isBufferNullified=!0,r(this,0)}else this._isBufferNullified=!1,r(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}},ye=(t,e,n)=>()=>{const s=new WeakMap,i=async(i,r)=>{let o=e(i);const a=q(o,r);if(!a){const e={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=t(r,e)}return s.set(r,o),bt(o)?await n(i,r,o.inputs[0]):await n(i,r,o),o};return{render(t,e){const n=s.get(e);return void 0!==n?Promise.resolve(n):i(t,e)}}},we=(t,e)=>(n,s,i)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,i)}catch(r){if("SyntaxError"===r.name)throw t();throw r}},xe=()=>new DOMException("","DataCloneError"),Te=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise((s=>{const i=()=>{n.onmessage=null,e.close(),n.close(),s()};n.onmessage=()=>i();try{e.postMessage(t,[t])}finally{i()}}))},Se=(t,e,n,s,i,r,o,a,l,c,u)=>(h,_)=>{const f=o(h)?h:r(h);if(i.has(_)){const t=n();return Promise.reject(t)}try{i.add(_)}catch{}return e(l,(()=>l(f)))?f.decodeAudioData(_).then((n=>(Te(_).catch((()=>{})),e(a,(()=>a(n)))||u(n),t.add(n),n))):new Promise(((e,n)=>{const i=async()=>{try{await Te(_)}catch{}},r=t=>{n(t),i()};try{f.decodeAudioData(_,(n=>{"function"!==typeof n.copyFromChannel&&(c(n),U(n)),t.add(n),i().then((()=>e(n)))}),(t=>{r(null===t?s():t)}))}catch(o){r(o)}}))},Ae=(t,e,n,s,i,r,o,a)=>(l,c)=>{const u=e.get(l);if(void 0===u)throw new Error("Missing the expected cycle count.");const h=r(l.context),_=a(h);if(u===c){if(e.delete(l),!_&&o(l)){const e=s(l),{outputs:r}=n(l);for(const n of r)if(dt(n)){const i=s(n[0]);t(e,i,n[1],n[2])}else{const t=i(n[0]);e.connect(t,n[1])}}}else e.set(l,u-c)},ke={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Me=(t,e,n,s,i,r,o)=>class extends t{constructor(t,a){const l=i(t),c={...ke,...a},u=s(l,c),h=r(l),_=h?n(c.maxDelayTime):null;super(t,!1,u,_),this._delayTime=e(this,h,u.delayTime),o(this,c.maxDelayTime)}get delayTime(){return this._delayTime}},Ce=(t,e,n,s,i)=>r=>{const o=new WeakMap,a=async(a,l)=>{let c=n(a);const u=q(c,l);if(!u){const t={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:r};c=e(l,t)}return o.set(l,c),u?await t(l,a.delayTime,c.delayTime):await s(l,a.delayTime,c.delayTime),await i(a,l,c),c};return{render(t,e){const n=o.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}},Re=t=>(e,n,s,i)=>t(e[i],(t=>t[0]===n&&t[1]===s)),Ee=t=>(e,n)=>{t(e).delete(n)},Oe=t=>"delayTime"in t,Be=(t,e,n)=>function s(i,r){const o=pt(r)?r:n(t,r);if(Oe(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map((t=>s([...i,o],t[0]))).reduce(((t,e)=>t.concat(e)),[])},Ie=(t,e,n)=>{const s=e[n];if(void 0===s)throw t();return s},Pe=t=>(e,n,s,i=0)=>void 0===n?e.forEach((t=>t.disconnect())):"number"===typeof n?Ie(t,e,n).disconnect():Bt(n)?void 0===s?e.forEach((t=>t.disconnect(n))):void 0===i?Ie(t,e,s).disconnect(n,0):Ie(t,e,s).disconnect(n,0,i):void 0===s?e.forEach((t=>t.disconnect(n))):Ie(t,e,s).disconnect(n,0),Ne={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Ve=(t,e,n,s,i,r,o,a)=>class extends t{constructor(t,i){const l=r(t),c={...Ne,...i},u=s(l,c),h=o(l),_=h?n():null;super(t,!1,u,_),this._attack=e(this,h,u.attack),this._knee=e(this,h,u.knee),this._nativeDynamicsCompressorNode=u,this._ratio=e(this,h,u.ratio),this._release=e(this,h,u.release),this._threshold=e(this,h,u.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"===typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},De=(t,e,n,s,i)=>()=>{const r=new WeakMap,o=async(o,a)=>{let l=n(o);const c=q(l,a);if(!c){const t={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(a,t)}return r.set(a,l),c?(await t(a,o.attack,l.attack),await t(a,o.knee,l.knee),await t(a,o.ratio,l.ratio),await t(a,o.release,l.release),await t(a,o.threshold,l.threshold)):(await s(a,o.attack,l.attack),await s(a,o.knee,l.knee),await s(a,o.ratio,l.ratio),await s(a,o.release,l.release),await s(a,o.threshold,l.threshold)),await i(o,a,l),l};return{render(t,e){const n=r.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}},Le=()=>new DOMException("","EncodingError"),Fe=t=>e=>new Promise(((n,s)=>{if(null===t)return void s(new SyntaxError);const i=t.document.head;if(null===i)s(new SyntaxError);else{const r=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,c=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(e,n,i,r,o)=>n===a||n===t.location.href&&1===i&&1===r?(c(),s(o),!1):null!==l?l(e,n,i,r,o):void 0,r.onerror=()=>{c(),s(new SyntaxError)},r.onload=()=>{c(),n()},r.src=a,r.type="module",i.appendChild(r)}})),qe=t=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(e,n,s){if(null!==n){let i=this._listeners.get(n);void 0===i&&(i=t(this,n),"function"===typeof n&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(e,i,s)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const s=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===s?null:s,n)}},je=t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}},He=t=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw t()},Xe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Ue=(t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=i(t),l={...Xe,...o},c=s(a,l),u=r(a),h=u?n():null;super(t,!1,c,h),this._gain=e(this,u,c.gain,z,G)}get gain(){return this._gain}},Ye=(t,e,n,s,i)=>()=>{const r=new WeakMap,o=async(o,a)=>{let l=n(o);const c=q(l,a);if(!c){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(a,t)}return r.set(a,l),c?await t(a,o.gain,l.gain):await s(a,o.gain,l.gain),await i(o,a,l),l};return{render(t,e){const n=r.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}},We=(t,e)=>n=>e(t,n),Ge=t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},ze=t=>e=>{var n;return null!==(n=t.get(e))&&void 0!==n?n:0},Ze=t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},Ke=t=>e=>t.get(e),Qe=()=>new DOMException("","InvalidStateError"),$e=t=>e=>{const n=t.get(e);if(void 0===n)throw Qe();return n},Je=(t,e)=>n=>{let s=t.get(n);if(void 0!==s)return s;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s},tn=t=>e=>{const n=t.get(e);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n},en=()=>new DOMException("","InvalidAccessError"),nn=t=>{t.getFrequencyResponse=(e=>(n,s,i)=>{if(n.length!==s.length||s.length!==i.length)throw en();return e.call(t,n,s,i)})(t.getFrequencyResponse)},sn={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},rn=(t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=s(t),l=i(a),c={...sn,...o},u=e(a,l?null:t.baseLatency,c),h=l?n(c.feedback,c.feedforward):null;super(t,!1,u,h),nn(u),this._nativeIIRFilterNode=u,r(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}},on=(t,e,n,s,i,r,o,a,l,c,u)=>{const h=c.length;let _=a;for(let f=0;f<h;f+=1){let a=n[0]*c[f];for(let e=1;e<i;e+=1){const s=_-e&l-1;a+=n[e]*r[s],a-=t[e]*o[s]}for(let t=i;t<s;t+=1)a+=n[t]*r[_-t&l-1];for(let n=i;n<e;n+=1)a-=t[n]*o[_-n&l-1];r[_]=c[f],o[_]=a,_=_+1&l-1,u[f]=a}return _},an=(t,e,n,s)=>{const i=n instanceof Float64Array?n:new Float64Array(n),r=s instanceof Float64Array?s:new Float64Array(s),o=i.length,a=r.length,l=Math.min(o,a);if(1!==i[0]){for(let t=0;t<o;t+=1)r[t]/=i[0];for(let t=1;t<a;t+=1)i[t]/=i[0]}const c=32,u=new Float32Array(c),h=new Float32Array(c),_=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let p=0;p<f;p+=1){const e=t.getChannelData(p),n=_.getChannelData(p);u.fill(0),h.fill(0),on(i,o,r,a,l,u,h,0,c,e,n)}return _},ln=(t,e,n,s,i)=>(r,o)=>{const a=new WeakMap;let l=null;const c=async(c,u)=>{let h=null,_=e(c);const f=q(_,u);if(void 0===u.createIIRFilter?h=t(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(_=u.createIIRFilter(o,r)),a.set(u,null===h?_:h),null!==h){if(null===l){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new n(c.context.destination.channelCount,c.context.length,u.sampleRate);l=(async()=>{await s(c,t,t.destination);const e=await i(t);return an(e,u,r,o)})()}const t=await l;return h.buffer=t,h.start(0),h}return await s(c,u,_),_};return{render(t,e){const n=a.get(e);return void 0!==n?Promise.resolve(n):c(t,e)}}},cn=(t,e,n,s,i,r)=>o=>(a,l)=>{const c=t.get(a);if(void 0===c){if(!o&&r(a)){const t=s(a),{outputs:r}=n(a);for(const n of r)if(dt(n)){const i=s(n[0]);e(t,i,n[1],n[2])}else{const e=i(n[0]);t.disconnect(e,n[1])}}t.set(a,l)}else t.set(a,c+l)},un=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},hn=(t,e)=>n=>t.has(n)||e(n),_n=(t,e)=>n=>t.has(n)||e(n),fn=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},pn=t=>e=>null!==t&&e instanceof t,dn=t=>e=>null!==t&&"function"===typeof t.AudioNode&&e instanceof t.AudioNode,mn=t=>e=>null!==t&&"function"===typeof t.AudioParam&&e instanceof t.AudioParam,gn=(t,e)=>n=>t(n)||e(n),vn=t=>e=>null!==t&&e instanceof t,bn=t=>null!==t&&t.isSecureContext,yn=(t,e,n,s)=>class extends t{constructor(t,i){const r=n(t),o=e(r,i);if(s(r))throw TypeError();super(t,!0,o,null),this._nativeMediaElementAudioSourceNode=o}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},wn={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},xn=(t,e,n,s)=>class extends t{constructor(t,i){const r=n(t);if(s(r))throw new TypeError;const o={...wn,...i},a=e(r,o);super(t,!1,a,null),this._nativeMediaStreamAudioDestinationNode=a}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Tn=(t,e,n,s)=>class extends t{constructor(t,i){const r=n(t),o=e(r,i);if(s(r))throw new TypeError;super(t,!0,o,null),this._nativeMediaStreamAudioSourceNode=o}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},Sn=(t,e,n)=>class extends t{constructor(t,s){const i=n(t),r=e(i,s);super(t,!0,r,null)}},An=(t,e,n,s,i)=>class extends s{constructor(t={}){if(null===i)throw new Error("Missing the native AudioContext constructor.");let s;try{s=new i(t)}catch(a){if(12===a.code&&"sampleRate is not in range"===a.message)throw e();throw a}if(null===s)throw n();if(!ct(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&s.sampleRate!==t.sampleRate)throw e();super(s,2);const{latencyHint:r}=t,{sampleRate:o}=s;if(this._baseLatency="number"===typeof s.baseLatency?s.baseLatency:"balanced"===r?512/o:"interactive"===r||void 0===r?256/o:"playback"===r?1024/o:128*Math.max(2,Math.min(128,Math.round(r*o/128)))/o,this._nativeAudioContext=s,"webkitAudioContext"===i.name?(this._nativeGainNode=s.createGain(),this._nativeOscillatorNode=s.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(s.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===s.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),s.removeEventListener("statechange",t)};s.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw t()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),lt(this)})))}resume(){return"suspended"===this._state?new Promise(((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((e=>{if(void 0===e||15===e.code)throw t();throw e}))}suspend(){return this._nativeAudioContext.suspend().catch((e=>{if(void 0===e)throw t();throw e}))}},kn=(t,e,n,s,i,r)=>class extends n{constructor(n,r){super(n),this._nativeContext=n,p.set(this,n),s(n)&&i.set(n,new Set),this._destination=new t(this,r),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"===typeof t?r(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Mn=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},Cn={numberOfChannels:1},Rn=(t,e,n,s,i)=>class extends s{constructor(e){const{length:s,numberOfChannels:i,sampleRate:r}={...Cn,...e},o=n(i,s,r);t(Mn,(()=>Mn(o)))||o.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(o.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(o,i),this._length=s,this._nativeOfflineAudioContext=o,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(e()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,lt(this)})))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((()=>this._waitForThePromiseToSettle(t)))}},En=(t,e)=>(n,s,i)=>{const r=new Set;return n.connect=(i=>(o,a=0,l=0)=>{const c=0===r.size;if(e(o))return i.call(n,o,a,l),t(r,[o,a,l],(t=>t[0]===o&&t[1]===a&&t[2]===l),!0),c&&s(),o;i.call(n,o,a),t(r,[o,a],(t=>t[0]===o&&t[1]===a),!0),c&&s()})(n.connect),n.disconnect=(t=>(s,o,a)=>{const l=r.size>0;if(void 0===s)t.apply(n),r.clear();else if("number"===typeof s){t.call(n,s);for(const t of r)t[1]===s&&r.delete(t)}else{e(s)?t.call(n,s,o,a):t.call(n,s,o);for(const t of r)t[0]!==s||void 0!==o&&t[1]!==o||void 0!==a&&t[2]!==a||r.delete(t)}const c=0===r.size;l&&c&&i()})(n.disconnect),n},On=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n]&&(t[n]=s)},Bn=(t,e)=>{On(t,e,"channelCount"),On(t,e,"channelCountMode"),On(t,e,"channelInterpretation")},In=t=>"function"===typeof t.getFloatTimeDomainData,Pn=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let t=0;t<s;t+=1)e[t]=.0078125*(n[t]-128);return e}},Nn=(t,e)=>(n,s)=>{const i=n.createAnalyser();if(Bn(i,s),!(s.maxDecibels>s.minDecibels))throw e();return On(i,s,"fftSize"),On(i,s,"maxDecibels"),On(i,s,"minDecibels"),On(i,s,"smoothingTimeConstant"),t(In,(()=>In(i)))||Pn(i),i},Vn=t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Dn=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n].value&&(t[n].value=s)},Ln=t=>{t.start=(e=>{let n=!1;return(s=0,i=0,r)=>{if(n)throw Qe();e.call(t,s,i,r),n=!0}})(t.start)},Fn=t=>{t.start=(e=>(n=0,s=0,i)=>{if("number"===typeof i&&i<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,i)})(t.start)},qn=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},jn=(t,e,n,s,i,r,o,a,l,c,u)=>(h,_)=>{const f=h.createBufferSource();return Bn(f,_),Dn(f,_,"playbackRate"),On(f,_,"buffer"),On(f,_,"loop"),On(f,_,"loopEnd"),On(f,_,"loopStart"),e(n,(()=>n(h)))||Ln(f),e(s,(()=>s(h)))||l(f),e(i,(()=>i(h)))||c(f,h),e(r,(()=>r(h)))||Fn(f),e(o,(()=>o(h)))||u(f,h),e(a,(()=>a(h)))||qn(f),t(h,f),f},Hn=t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,Xn=(t,e)=>(n,s,i)=>{const r=n.destination;if(r.channelCount!==s)try{r.channelCount=s}catch{}i&&"explicit"!==r.channelCountMode&&(r.channelCountMode="explicit"),0===r.maxChannelCount&&Object.defineProperty(r,"maxChannelCount",{value:s});const o=t(n,{channelCount:s,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return e(o,"channelCount",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e);try{r.channelCount=e}catch(n){if(e>r.maxChannelCount)throw n}})),e(o,"channelCountMode",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e),r.channelCountMode=e})),e(o,"channelInterpretation",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e),r.channelInterpretation=e})),Object.defineProperty(o,"maxChannelCount",{get:()=>r.maxChannelCount}),o.connect(r),o},Un=t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,Yn=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},Wn=(t,e,n,s,i)=>(r,o,a,l,c,u)=>{if(null!==a)try{const e=new a(r,l,u),s=new Map;let o=null;if(Object.defineProperties(e,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>o,set:t=>{"function"===typeof o&&e.removeEventListener("processorerror",o),o="function"===typeof t?t:null,"function"===typeof o&&e.addEventListener("processorerror",o)}}}),e.addEventListener=(t=>(...n)=>{if("processorerror"===n[0]){const t="function"===typeof n[1]?n[1]:"object"===typeof n[1]&&null!==n[1]&&"function"===typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==t){const e=s.get(n[1]);void 0!==e?n[1]=e:(n[1]=e=>{"error"===e.type?(Object.defineProperties(e,{type:{value:"processorerror"}}),t(e)):t(new ErrorEvent(n[0],{...e}))},s.set(t,n[1]))}}return t.call(e,"error",n[1],n[2]),t.call(e,...n)})(e.addEventListener),e.removeEventListener=(t=>(...n)=>{if("processorerror"===n[0]){const t=s.get(n[1]);void 0!==t&&(s.delete(n[1]),n[1]=t)}return t.call(e,"error",n[1],n[2]),t.call(e,n[0],n[1],n[2])})(e.removeEventListener),0!==u.numberOfOutputs){const t=n(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(t).connect(r.destination);const s=()=>t.disconnect(),o=()=>t.connect(r.destination);return i(e,s,o)}return e}catch(h){if(11===h.code)throw s();throw h}if(void 0===c)throw s();return Yn(u),e(r,o,c,u)},Gn=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),zn=t=>new Promise(((e,n)=>{const{port1:s,port2:i}=new MessageChannel;s.onmessage=({data:t})=>{s.close(),i.close(),e(t)},s.onmessageerror=({data:t})=>{s.close(),i.close(),n(t)},i.postMessage(t)})),Zn=async(t,e)=>{const n=await zn(e);return new t(n)},Kn=(t,e,n,s)=>{let i=v.get(t);void 0===i&&(i=new WeakMap,v.set(t,i));const r=Zn(n,s);return i.set(e,r),r},Qn=(t,e,n,s,i,r,o,a,l,c,u,h,_)=>(f,p,d,m)=>{if(0===m.numberOfInputs&&0===m.numberOfOutputs)throw l();const g=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(g.some((t=>t<1)))throw l();if(g.length!==m.numberOfOutputs)throw e();if("explicit"!==m.channelCountMode)throw l();const v=m.channelCount*m.numberOfInputs,b=g.reduce(((t,e)=>t+e),0),y=void 0===d.parameterDescriptors?0:d.parameterDescriptors.length;if(v+y>6||b>6)throw l();const w=new MessageChannel,x=[],T=[];for(let t=0;t<m.numberOfInputs;t+=1)x.push(o(f,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),T.push(i(f,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));const S=[];if(void 0!==d.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:s}of d.parameterDescriptors){const i=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==m.parameterData[s]?m.parameterData[s]:void 0===t?0:t});Object.defineProperties(i.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?z:e},minValue:{get:()=>void 0===n?G:n}}),S.push(i)}const A=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+y)}),k=Gn(p,f.sampleRate),M=a(f,k,v+y,Math.max(1,b)),C=i(f,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),R=[];for(let t=0;t<m.numberOfOutputs;t+=1)R.push(s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:g[t]}));for(let t=0;t<m.numberOfInputs;t+=1){x[t].connect(T[t]);for(let e=0;e<m.channelCount;e+=1)T[t].connect(A,e,t*m.channelCount+e)}const E=new Yt(void 0===d.parameterDescriptors?[]:d.parameterDescriptors.map((({name:t},e)=>{const n=S[e];return n.connect(A,0,v+e),n.start(0),[t,n.offset]})));A.connect(M);let O=m.channelInterpretation,B=null;const I=0===m.numberOfOutputs?[M]:R,P={get bufferSize(){return k},get channelCount(){return m.channelCount},set channelCount(t){throw n()},get channelCountMode(){return m.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return O},set channelInterpretation(t){for(const e of x)e.channelInterpretation=t;O=t},get context(){return M.context},get inputs(){return x},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get onprocessorerror(){return B},set onprocessorerror(t){"function"===typeof B&&P.removeEventListener("processorerror",B),B="function"===typeof t?t:null,"function"===typeof B&&P.addEventListener("processorerror",B)},get parameters(){return E},get port(){return w.port2},addEventListener(...t){return M.addEventListener(t[0],t[1],t[2])},connect:t.bind(null,I),disconnect:c.bind(null,I),dispatchEvent(...t){return M.dispatchEvent(t[0])},removeEventListener(...t){return M.removeEventListener(t[0],t[1],t[2])}},N=new Map;w.port1.addEventListener=(t=>(...e)=>{if("message"===e[0]){const t="function"===typeof e[1]?e[1]:"object"===typeof e[1]&&null!==e[1]&&"function"===typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=N.get(e[1]);void 0!==n?e[1]=n:(e[1]=e=>{u(f.currentTime,f.sampleRate,(()=>t(e)))},N.set(t,e[1]))}}return t.call(w.port1,e[0],e[1],e[2])})(w.port1.addEventListener),w.port1.removeEventListener=(t=>(...e)=>{if("message"===e[0]){const t=N.get(e[1]);void 0!==t&&(N.delete(e[1]),e[1]=t)}return t.call(w.port1,e[0],e[1],e[2])})(w.port1.removeEventListener);let V=null;Object.defineProperty(w.port1,"onmessage",{get:()=>V,set:t=>{"function"===typeof V&&w.port1.removeEventListener("message",V),V="function"===typeof t?t:null,"function"===typeof V&&(w.port1.addEventListener("message",V),w.port1.start())}}),d.prototype.port=w.port1;let D=null;const L=Kn(f,P,d,m);L.then((t=>D=t));const F=Kt(m.numberOfInputs,m.channelCount),q=Kt(m.numberOfOutputs,g),j=void 0===d.parameterDescriptors?[]:d.parameterDescriptors.reduce(((t,{name:e})=>({...t,[e]:new Float32Array(128)})),{});let H=!0;const X=()=>{m.numberOfOutputs>0&&M.disconnect(C);for(let t=0,e=0;t<m.numberOfOutputs;t+=1){const n=R[t];for(let s=0;s<g[t];s+=1)C.disconnect(n,e+s,s);e+=g[t]}},U=new Map;M.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==D){const s=h(P);for(let i=0;i<k;i+=128){for(let e=0;e<m.numberOfInputs;e+=1)for(let n=0;n<m.channelCount;n+=1)zt(t,F[e],n,n,i);void 0!==d.parameterDescriptors&&d.parameterDescriptors.forEach((({name:e},n)=>{zt(t,j,e,v+n,i)}));for(let t=0;t<m.numberOfInputs;t+=1)for(let e=0;e<g[t];e+=1)0===q[t][e].byteLength&&(q[t][e]=new Float32Array(128));try{const t=F.map(((t,e)=>{const n=s[e];if(n.size>0)return U.set(e,k/128),t;const i=U.get(e);return void 0===i?[]:(t.every((t=>t.every((t=>0===t))))&&(1===i?U.delete(e):U.set(e,i-1)),t)})),n=u(f.currentTime+i/f.sampleRate,f.sampleRate,(()=>D.process(t,q,j)));H=n;for(let s=0,r=0;s<m.numberOfOutputs;s+=1){for(let t=0;t<g[s];t+=1)Zt(e,q[s],t,r+t,i);r+=g[s]}}catch(n){H=!1,P.dispatchEvent(new ErrorEvent("processorerror",{colno:n.colno,filename:n.filename,lineno:n.lineno,message:n.message}))}if(!H){for(let t=0;t<m.numberOfInputs;t+=1){x[t].disconnect(T[t]);for(let e=0;e<m.channelCount;e+=1)T[i].disconnect(A,e,t*m.channelCount+e)}if(void 0!==d.parameterDescriptors){const t=d.parameterDescriptors.length;for(let e=0;e<t;e+=1){const t=S[e];t.disconnect(A,0,v+e),t.stop()}}A.disconnect(M),M.onaudioprocess=null,Y?X():K();break}}}};let Y=!1;const W=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Z=()=>M.connect(W).connect(f.destination),K=()=>{M.disconnect(W),W.disconnect()},Q=()=>{if(H){K(),m.numberOfOutputs>0&&M.connect(C);for(let t=0,e=0;t<m.numberOfOutputs;t+=1){const n=R[t];for(let s=0;s<g[t];s+=1)C.connect(n,e+s,s);e+=g[t]}}Y=!0},$=()=>{H&&(Z(),X()),Y=!1};return Z(),_(P,Q,$)},$n=(t,e)=>{const n=t.createBiquadFilter();return Bn(n,e),Dn(n,e,"Q"),Dn(n,e,"detune"),Dn(n,e,"frequency"),Dn(n,e,"gain"),On(n,e,"type"),n},Jn=(t,e)=>(n,s)=>{const i=n.createChannelMerger(s.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,i),Bn(i,s),i},ts=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Qe()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw Qe()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw Qe()}})},es=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Bn(n,e),ts(n),n},ns=(t,e,n,s,i)=>(r,o)=>{if(void 0===r.createConstantSource)return n(r,o);const a=r.createConstantSource();return Bn(a,o),Dn(a,o,"offset"),e(s,(()=>s(r)))||Fn(a),e(i,(()=>i(r)))||qn(a),t(r,a),a},ss=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),is=(t,e,n,s)=>(i,{offset:r,...o})=>{const a=i.createBuffer(1,2,44100),l=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(i,{...o,gain:r}),u=a.getChannelData(0);u[0]=1,u[1]=1,l.buffer=a,l.loop=!0;const h={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){c.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){c.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){c.channelInterpretation=t},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(t){l.onended=t},addEventListener(...t){return l.addEventListener(t[0],t[1],t[2])},dispatchEvent(...t){return l.dispatchEvent(t[0])},removeEventListener(...t){return l.removeEventListener(t[0],t[1],t[2])},start(t=0){l.start.call(l,t)},stop(t=0){l.stop.call(l,t)}},_=()=>l.connect(c),f=()=>l.disconnect(c);return t(i,l),s(ss(h,c),_,f)},rs=(t,e)=>(n,s)=>{const i=n.createConvolver();if(Bn(i,s),s.disableNormalization===i.normalize&&(i.normalize=!s.disableNormalization),On(i,s,"buffer"),s.channelCount>2)throw t();if(e(i,"channelCount",(t=>()=>t.call(i)),(e=>n=>{if(n>2)throw t();return e.call(i,n)})),"max"===s.channelCountMode)throw t();return e(i,"channelCountMode",(t=>()=>t.call(i)),(e=>n=>{if("max"===n)throw t();return e.call(i,n)})),i},os=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Bn(n,e),Dn(n,e,"delayTime"),n},as=t=>(e,n)=>{const s=e.createDynamicsCompressor();if(Bn(s,n),n.channelCount>2)throw t();if("max"===n.channelCountMode)throw t();return Dn(s,n,"attack"),Dn(s,n,"knee"),Dn(s,n,"ratio"),Dn(s,n,"release"),Dn(s,n,"threshold"),s},ls=(t,e)=>{const n=t.createGain();return Bn(n,e),Dn(n,e,"gain"),n},cs=t=>(e,n,s)=>{if(void 0===e.createIIRFilter)return t(e,n,s);const i=e.createIIRFilter(s.feedforward,s.feedback);return Bn(i,s),i};function us(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function hs(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function _s(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1)n=hs(n,e),n[0]+=t[s];return n}const fs=(t,e,n,s)=>(i,r,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:c,feedforward:u})=>{const h=Gn(r,i.sampleRate),_=c instanceof Float64Array?c:new Float64Array(c),f=u instanceof Float64Array?u:new Float64Array(u),p=_.length,d=f.length,m=Math.min(p,d);if(0===p||p>20)throw s();if(0===_[0])throw e();if(0===d||d>20)throw s();if(0===f[0])throw e();if(1!==_[0]){for(let t=0;t<d;t+=1)f[t]/=_[0];for(let t=1;t<p;t+=1)_[t]/=_[0]}const g=n(i,h,o,o);g.channelCount=o,g.channelCountMode=a,g.channelInterpretation=l;const v=32,b=[],y=[],w=[];for(let t=0;t<o;t+=1){b.push(0);const t=new Float32Array(v),e=new Float32Array(v);t.fill(0),e.fill(0),y.push(t),w.push(e)}g.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,s=e.numberOfChannels;for(let i=0;i<s;i+=1){const t=e.getChannelData(i),s=n.getChannelData(i);b[i]=on(_,p,f,d,m,y[i],w[i],b[i],v,t,s)}};const x=i.sampleRate/2,T={get bufferSize(){return h},get channelCount(){return g.channelCount},set channelCount(t){g.channelCount=t},get channelCountMode(){return g.channelCountMode},set channelCountMode(t){g.channelCountMode=t},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(t){g.channelInterpretation=t},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener(...t){return g.addEventListener(t[0],t[1],t[2])},dispatchEvent(...t){return g.dispatchEvent(t[0])},getFrequencyResponse(e,n,s){if(e.length!==n.length||n.length!==s.length)throw t();const i=e.length;for(let t=0;t<i;t+=1){const i=-Math.PI*(e[t]/x),r=[Math.cos(i),Math.sin(i)],o=_s(f,r),a=_s(_,r),l=us(o,a);n[t]=Math.sqrt(l[0]*l[0]+l[1]*l[1]),s[t]=Math.atan2(l[1],l[0])}},removeEventListener(...t){return g.removeEventListener(t[0],t[1],t[2])}};return ss(T,g)},ps=(t,e)=>t.createMediaElementSource(e.mediaElement),ds=(t,e)=>{const n=t.createMediaStreamDestination();return Bn(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},ms=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort(((t,e)=>t.id<e.id?-1:t.id>e.id?1:0));const s=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(i,"mediaStream",{value:e}),i},gs=(t,e)=>(n,{mediaStreamTrack:s})=>{if("function"===typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(s);const i=new MediaStream([s]),r=n.createMediaStreamSource(i);if("audio"!==s.kind)throw t();if(e(n))throw new TypeError;return r},vs=t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,bs=(t,e,n,s,i,r)=>(o,a)=>{const l=o.createOscillator();return Bn(l,a),Dn(l,a,"detune"),Dn(l,a,"frequency"),void 0!==a.periodicWave?l.setPeriodicWave(a.periodicWave):On(l,a,"type"),e(n,(()=>n(o)))||Fn(l),e(s,(()=>s(o)))||r(l,o),e(i,(()=>i(o)))||qn(l),t(o,l),l},ys=t=>(e,n)=>{const s=e.createPanner();return void 0===s.orientationX?t(e,n):(Bn(s,n),Dn(s,n,"orientationX"),Dn(s,n,"orientationY"),Dn(s,n,"orientationZ"),Dn(s,n,"positionX"),Dn(s,n,"positionY"),Dn(s,n,"positionZ"),On(s,n,"coneInnerAngle"),On(s,n,"coneOuterAngle"),On(s,n,"coneOuterGain"),On(s,n,"distanceModel"),On(s,n,"maxDistance"),On(s,n,"panningModel"),On(s,n,"refDistance"),On(s,n,"rolloffFactor"),s)},ws=(t,e,n,s,i,r,o,a,l,c)=>(u,{coneInnerAngle:h,coneOuterAngle:_,coneOuterGain:f,distanceModel:p,maxDistance:d,orientationX:m,orientationY:g,orientationZ:v,panningModel:b,positionX:y,positionY:w,positionZ:x,refDistance:T,rolloffFactor:S,...A})=>{const k=u.createPanner();if(A.channelCount>2)throw o();if("max"===A.channelCountMode)throw o();Bn(k,A);const M={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},C=n(u,{...M,channelInterpretation:"speakers",numberOfInputs:6}),R=s(u,{...A,gain:1}),E=s(u,{...M,gain:1}),O=s(u,{...M,gain:0}),B=s(u,{...M,gain:0}),I=s(u,{...M,gain:0}),P=s(u,{...M,gain:0}),N=s(u,{...M,gain:0}),V=i(u,256,6,1),D=r(u,{...M,curve:new Float32Array([1,1]),oversample:"none"});let L=[m,g,v],F=[y,w,x];const q=new Float32Array(1);V.onaudioprocess=({inputBuffer:t})=>{const e=[l(t,q,0),l(t,q,1),l(t,q,2)];e.some(((t,e)=>t!==L[e]))&&(k.setOrientation(...e),L=e);const n=[l(t,q,3),l(t,q,4),l(t,q,5)];n.some(((t,e)=>t!==F[e]))&&(k.setPosition(...n),F=n)},Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0});const j={get bufferSize(){},get channelCount(){return k.channelCount},set channelCount(t){if(t>2)throw o();R.channelCount=t,k.channelCount=t},get channelCountMode(){return k.channelCountMode},set channelCountMode(t){if("max"===t)throw o();R.channelCountMode=t,k.channelCountMode=t},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(t){R.channelInterpretation=t,k.channelInterpretation=t},get coneInnerAngle(){return k.coneInnerAngle},set coneInnerAngle(t){k.coneInnerAngle=t},get coneOuterAngle(){return k.coneOuterAngle},set coneOuterAngle(t){k.coneOuterAngle=t},get coneOuterGain(){return k.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();k.coneOuterGain=t},get context(){return k.context},get distanceModel(){return k.distanceModel},set distanceModel(t){k.distanceModel=t},get inputs(){return[R]},get maxDistance(){return k.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;k.maxDistance=t},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get orientationX(){return E.gain},get orientationY(){return O.gain},get orientationZ(){return B.gain},get panningModel(){return k.panningModel},set panningModel(t){k.panningModel=t},get positionX(){return I.gain},get positionY(){return P.gain},get positionZ(){return N.gain},get refDistance(){return k.refDistance},set refDistance(t){if(t<0)throw new RangeError;k.refDistance=t},get rolloffFactor(){return k.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;k.rolloffFactor=t},addEventListener(...t){return R.addEventListener(t[0],t[1],t[2])},dispatchEvent(...t){return R.dispatchEvent(t[0])},removeEventListener(...t){return R.removeEventListener(t[0],t[1],t[2])}};h!==j.coneInnerAngle&&(j.coneInnerAngle=h),_!==j.coneOuterAngle&&(j.coneOuterAngle=_),f!==j.coneOuterGain&&(j.coneOuterGain=f),p!==j.distanceModel&&(j.distanceModel=p),d!==j.maxDistance&&(j.maxDistance=d),m!==j.orientationX.value&&(j.orientationX.value=m),g!==j.orientationY.value&&(j.orientationY.value=g),v!==j.orientationZ.value&&(j.orientationZ.value=v),b!==j.panningModel&&(j.panningModel=b),y!==j.positionX.value&&(j.positionX.value=y),w!==j.positionY.value&&(j.positionY.value=w),x!==j.positionZ.value&&(j.positionZ.value=x),T!==j.refDistance&&(j.refDistance=T),S!==j.rolloffFactor&&(j.rolloffFactor=S),1===L[0]&&0===L[1]&&0===L[2]||k.setOrientation(...L),0===F[0]&&0===F[1]&&0===F[2]||k.setPosition(...F);const H=()=>{R.connect(k),t(R,D,0,0),D.connect(E).connect(C,0,0),D.connect(O).connect(C,0,1),D.connect(B).connect(C,0,2),D.connect(I).connect(C,0,3),D.connect(P).connect(C,0,4),D.connect(N).connect(C,0,5),C.connect(V).connect(u.destination)},X=()=>{R.disconnect(k),a(R,D,0,0),D.disconnect(E),E.disconnect(C),D.disconnect(O),O.disconnect(C),D.disconnect(B),B.disconnect(C),D.disconnect(I),I.disconnect(C),D.disconnect(P),P.disconnect(C),D.disconnect(N),N.disconnect(C),C.disconnect(V),V.disconnect(u.destination)};return c(ss(j,k),H,X)},xs=t=>(e,{disableNormalization:n,imag:s,real:i})=>{const r=s instanceof Float32Array?s:new Float32Array(s),o=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(o,r,{disableNormalization:n});if(Array.from(s).length<2)throw t();return a},Ts=(t,e,n,s)=>t.createScriptProcessor(e,n,s),Ss=(t,e)=>(n,s)=>{const i=s.channelCountMode;if("clamped-max"===i)throw e();if(void 0===n.createStereoPanner)return t(n,s);const r=n.createStereoPanner();return Bn(r,s),Dn(r,s,"pan"),Object.defineProperty(r,"channelCountMode",{get:()=>i,set:t=>{if(t!==i)throw e()}}),r},As=(t,e,n,s,i,r)=>{const o=16385,a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},h=(t,e,i,r)=>{const h=new Float32Array(o),_=new Float32Array(o);for(let n=0;n<o;n+=1){const t=n/(o-1)*l;h[n]=Math.cos(t),_[n]=Math.sin(t)}const f=n(t,{...c,gain:0}),p=s(t,{...u,curve:h}),d=s(t,{...u,curve:a}),m=n(t,{...c,gain:0}),g=s(t,{...u,curve:_});return{connectGraph(){e.connect(f),e.connect(void 0===d.inputs?d:d.inputs[0]),e.connect(m),d.connect(i),i.connect(void 0===p.inputs?p:p.inputs[0]),i.connect(void 0===g.inputs?g:g.inputs[0]),p.connect(f.gain),g.connect(m.gain),f.connect(r,0,0),m.connect(r,0,1)},disconnectGraph(){e.disconnect(f),e.disconnect(void 0===d.inputs?d:d.inputs[0]),e.disconnect(m),d.disconnect(i),i.disconnect(void 0===p.inputs?p:p.inputs[0]),i.disconnect(void 0===g.inputs?g:g.inputs[0]),p.disconnect(f.gain),g.disconnect(m.gain),f.disconnect(r,0,0),m.disconnect(r,0,1)}}},_=(t,i,r,h)=>{const _=new Float32Array(o),f=new Float32Array(o),p=new Float32Array(o),d=new Float32Array(o),m=Math.floor(o/2);for(let e=0;e<o;e+=1)if(e>m){const t=(e-m)/(o-1-m)*l;_[e]=Math.cos(t),f[e]=Math.sin(t),p[e]=0,d[e]=1}else{const t=e/(o-1-m)*l;_[e]=1,f[e]=0,p[e]=Math.cos(t),d[e]=Math.sin(t)}const g=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),v=n(t,{...c,gain:0}),b=s(t,{...u,curve:_}),y=n(t,{...c,gain:0}),w=s(t,{...u,curve:f}),x=s(t,{...u,curve:a}),T=n(t,{...c,gain:0}),S=s(t,{...u,curve:p}),A=n(t,{...c,gain:0}),k=s(t,{...u,curve:d});return{connectGraph(){i.connect(g),i.connect(void 0===x.inputs?x:x.inputs[0]),g.connect(v,0),g.connect(y,0),g.connect(T,1),g.connect(A,1),x.connect(r),r.connect(void 0===b.inputs?b:b.inputs[0]),r.connect(void 0===w.inputs?w:w.inputs[0]),r.connect(void 0===S.inputs?S:S.inputs[0]),r.connect(void 0===k.inputs?k:k.inputs[0]),b.connect(v.gain),w.connect(y.gain),S.connect(T.gain),k.connect(A.gain),v.connect(h,0,0),T.connect(h,0,0),y.connect(h,0,1),A.connect(h,0,1)},disconnectGraph(){i.disconnect(g),i.disconnect(void 0===x.inputs?x:x.inputs[0]),g.disconnect(v,0),g.disconnect(y,0),g.disconnect(T,1),g.disconnect(A,1),x.disconnect(r),r.disconnect(void 0===b.inputs?b:b.inputs[0]),r.disconnect(void 0===w.inputs?w:w.inputs[0]),r.disconnect(void 0===S.inputs?S:S.inputs[0]),r.disconnect(void 0===k.inputs?k:k.inputs[0]),b.disconnect(v.gain),w.disconnect(y.gain),S.disconnect(T.gain),k.disconnect(A.gain),v.disconnect(h,0,0),T.disconnect(h,0,0),y.disconnect(h,0,1),A.disconnect(h,0,1)}}},f=(t,e,n,s,r)=>{if(1===e)return h(t,n,s,r);if(2===e)return _(t,n,s,r);throw i()};return(e,{channelCount:s,channelCountMode:o,pan:a,...l})=>{if("max"===o)throw i();const c=t(e,{...l,channelCount:1,channelCountMode:o,numberOfInputs:2}),u=n(e,{...l,channelCount:s,channelCountMode:o,gain:1}),h=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a});let{connectGraph:_,disconnectGraph:p}=f(e,s,u,h,c);Object.defineProperty(h.gain,"defaultValue",{get:()=>0}),Object.defineProperty(h.gain,"maxValue",{get:()=>1}),Object.defineProperty(h.gain,"minValue",{get:()=>-1});const d={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(t){u.channelCount!==t&&(m&&p(),({connectGraph:_,disconnectGraph:p}=f(e,t,u,h,c)),m&&_()),u.channelCount=t},get channelCountMode(){return u.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw i();u.channelCountMode=t},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(t){u.channelInterpretation=t},get context(){return u.context},get inputs(){return[u]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get pan(){return h.gain},addEventListener(...t){return u.addEventListener(t[0],t[1],t[2])},dispatchEvent(...t){return u.dispatchEvent(t[0])},removeEventListener(...t){return u.removeEventListener(t[0],t[1],t[2])}};let m=!1;const g=()=>{_(),m=!0},v=()=>{p(),m=!1};return r(ss(d,c),g,v)}},ks=(t,e,n,s,i,r,o)=>(a,l)=>{const c=a.createWaveShaper();if(null!==r&&"webkitAudioContext"===r.name&&void 0===a.createGain().gain.automationRate)return n(a,l);Bn(c,l);const u=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==u&&u.length<2)throw e();On(c,{curve:u},"curve"),On(c,l,"oversample");let h=null,_=!1;o(c,"curve",(t=>()=>t.call(c)),(e=>n=>(e.call(c,n),_&&(s(n)&&null===h?h=t(a,c):s(n)||null===h||(h(),h=null)),n)));const f=()=>{_=!0,s(c.curve)&&(h=t(a,c))},p=()=>{_=!1,null!==h&&(h(),h=null)};return i(c,f,p)},Ms=(t,e,n,s,i)=>(r,{curve:o,oversample:a,...l})=>{const c=r.createWaveShaper(),u=r.createWaveShaper();Bn(c,l),Bn(u,l);const h=n(r,{...l,gain:1}),_=n(r,{...l,gain:-1}),f=n(r,{...l,gain:1}),p=n(r,{...l,gain:-1});let d=null,m=!1,g=null;const v={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){h.channelCount=t,_.channelCount=t,c.channelCount=t,f.channelCount=t,u.channelCount=t,p.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){h.channelCountMode=t,_.channelCountMode=t,c.channelCountMode=t,f.channelCountMode=t,u.channelCountMode=t,p.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){h.channelInterpretation=t,_.channelInterpretation=t,c.channelInterpretation=t,f.channelInterpretation=t,u.channelInterpretation=t,p.channelInterpretation=t},get context(){return c.context},get curve(){return g},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)c.curve=n,u.curve=n;else{const t=n.length,e=new Float32Array(t+2-t%2),s=new Float32Array(t+2-t%2);e[0]=n[0],s[0]=-n[t-1];const i=Math.ceil((t+1)/2),r=(t+1)/2-1;for(let o=1;o<i;o+=1){const a=o/i*r,l=Math.floor(a),c=Math.ceil(a);e[o]=l===c?n[l]:(1-(a-l))*n[l]+(1-(c-a))*n[c],s[o]=l===c?-n[t-1-l]:-(1-(a-l))*n[t-1-l]-(1-(c-a))*n[t-1-c]}e[i]=t%2===1?n[i-1]:(n[i-2]+n[i-1])/2,c.curve=e,u.curve=s}g=n,m&&(s(g)&&null===d?d=t(r,h):null!==d&&(d(),d=null))},get inputs(){return[h]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(t){c.oversample=t,u.oversample=t},addEventListener(...t){return h.addEventListener(t[0],t[1],t[2])},dispatchEvent(...t){return h.dispatchEvent(t[0])},removeEventListener(...t){return h.removeEventListener(t[0],t[1],t[2])}};null!==o&&(v.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==v.oversample&&(v.oversample=a);const b=()=>{h.connect(c).connect(f),h.connect(_).connect(u).connect(p).connect(f),m=!0,s(g)&&(d=t(r,h))},y=()=>{h.disconnect(c),c.disconnect(f),h.disconnect(_),_.disconnect(u),u.disconnect(p),p.disconnect(f),m=!1,null!==d&&(d(),d=null)};return i(ss(v,f),b,y)},Cs=()=>new DOMException("","NotSupportedError"),Rs={numberOfChannels:1},Es=(t,e,n,s,i)=>class extends t{constructor(t,n,i){let r;if("number"===typeof t&&void 0!==n&&void 0!==i)r={length:n,numberOfChannels:t,sampleRate:i};else{if("object"!==typeof t)throw new Error("The given parameters are not valid.");r=t}const{length:o,numberOfChannels:a,sampleRate:l}={...Rs,...r},c=s(a,o,l);e(Mn,(()=>Mn(c)))||c.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(c.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(c,a),this._length=o,this._nativeOfflineAudioContext=c,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,lt(this)})))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((()=>this._waitForThePromiseToSettle(t)))}},Os={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Bs=(t,e,n,s,i,r,o)=>class extends t{constructor(t,o){const a=i(t),l={...Os,...o},c=n(a,l),u=r(a),h=u?s():null,_=t.sampleRate/2;super(t,!1,c,h),this._detune=e(this,u,c.detune,153600,-153600),this._frequency=e(this,u,c.frequency,_,-_),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=h,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e="function"===typeof t?o(this,t):null;this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){E(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),Z(this)&&B(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}},Is=(t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null,l=null;const c=async(c,u)=>{let h=n(c);const _=q(h,u);if(!_){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:null===o?void 0:o,type:h.type};h=e(u,t),null!==a&&h.start(a),null!==l&&h.stop(l)}return r.set(u,h),_?(await t(u,c.detune,h.detune),await t(u,c.frequency,h.frequency)):(await s(u,c.detune,h.detune),await s(u,c.frequency,h.frequency)),await i(c,u,h),h};return{set periodicWave(t){o=t},set start(t){a=t},set stop(t){l=t},render(t,e){const n=r.get(e);return void 0!==n?Promise.resolve(n):c(t,e)}}},Ps={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Ns=(t,e,n,s,i,r,o)=>class extends t{constructor(t,a){const l=i(t),c={...Ps,...a},u=n(l,c),h=r(l),_=h?s():null;super(t,!1,u,_),this._nativePannerNode=u,this._orientationX=e(this,h,u.orientationX,z,G),this._orientationY=e(this,h,u.orientationY,z,G),this._orientationZ=e(this,h,u.orientationZ,z,G),this._positionX=e(this,h,u.positionX,z,G),this._positionY=e(this,h,u.positionY,z,G),this._positionZ=e(this,h,u.positionZ,z,G),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}},Vs=(t,e,n,s,i,r,o,a,l,c)=>()=>{const u=new WeakMap;let h=null;const _=async(_,f)=>{let p=null,d=r(_);const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation},g={...m,coneInnerAngle:d.coneInnerAngle,coneOuterAngle:d.coneOuterAngle,coneOuterGain:d.coneOuterGain,distanceModel:d.distanceModel,maxDistance:d.maxDistance,panningModel:d.panningModel,refDistance:d.refDistance,rolloffFactor:d.rolloffFactor},v=q(d,f);if("bufferSize"in d)p=s(f,{...m,gain:1});else if(!v){const t={...g,orientationX:d.orientationX.value,orientationY:d.orientationY.value,orientationZ:d.orientationZ.value,positionX:d.positionX.value,positionY:d.positionY.value,positionZ:d.positionZ.value};d=i(f,t)}if(u.set(f,null===p?d:p),null!==p){if(null===h){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new o(6,_.context.length,f.sampleRate),s=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});s.connect(t.destination),h=(async()=>{const e=await Promise.all([_.orientationX,_.orientationY,_.orientationZ,_.positionX,_.positionY,_.positionZ].map((async(e,s)=>{const i=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===s?1:0});return await a(t,e,i.offset),i})));for(let t=0;t<6;t+=1)e[t].connect(s,0,t),e[t].start(0);return c(t)})()}const t=await h,r=s(f,{...m,gain:1});await l(_,f,r);const u=[];for(let e=0;e<t.numberOfChannels;e+=1)u.push(t.getChannelData(e));let d=[u[0][0],u[1][0],u[2][0]],v=[u[3][0],u[4][0],u[5][0]],b=s(f,{...m,gain:1}),y=i(f,{...g,orientationX:d[0],orientationY:d[1],orientationZ:d[2],positionX:v[0],positionY:v[1],positionZ:v[2]});r.connect(b).connect(y.inputs[0]),y.connect(p);for(let e=128;e<t.length;e+=128){const t=[u[0][e],u[1][e],u[2][e]],n=[u[3][e],u[4][e],u[5][e]];if(t.some(((t,e)=>t!==d[e]))||n.some(((t,e)=>t!==v[e]))){d=t,v=n;const o=e/f.sampleRate;b.gain.setValueAtTime(0,o),b=s(f,{...m,gain:0}),y=i(f,{...g,orientationX:d[0],orientationY:d[1],orientationZ:d[2],positionX:v[0],positionY:v[1],positionZ:v[2]}),b.gain.setValueAtTime(1,o),r.connect(b).connect(y.inputs[0]),y.connect(p)}}return p}return v?(await t(f,_.orientationX,d.orientationX),await t(f,_.orientationY,d.orientationY),await t(f,_.orientationZ,d.orientationZ),await t(f,_.positionX,d.positionX),await t(f,_.positionY,d.positionY),await t(f,_.positionZ,d.positionZ)):(await a(f,_.orientationX,d.orientationX),await a(f,_.orientationY,d.orientationY),await a(f,_.orientationZ,d.orientationZ),await a(f,_.positionX,d.positionX),await a(f,_.positionY,d.positionY),await a(f,_.positionZ,d.positionZ)),bt(d)?await l(_,f,d.inputs[0]):await l(_,f,d),d};return{render(t,e){const n=u.get(e);return void 0!==n?Promise.resolve(n):_(t,e)}}},Ds={disableNormalization:!1},Ls=(t,e,n,s)=>class i{constructor(i,r){const o=e(i),a=s({...Ds,...r}),l=t(o,a);return n.add(l),l}static[Symbol.hasInstance](t){return null!==t&&"object"===typeof t&&Object.getPrototypeOf(t)===i.prototype||n.has(t)}},Fs=(t,e)=>(n,s,i)=>{const r=t(s);return r.replay(i),e(s,n,i)},qs=(t,e,n)=>async(s,i,r)=>{const o=t(s);await Promise.all(o.activeInputs.map(((t,o)=>Array.from(t).map((async([t,a])=>{const l=e(t),c=await l.render(t,i),u=s.context.destination;n(t)||s===u&&n(s)||c.connect(r,a,o)})))).reduce(((t,e)=>[...t,...e]),[]))},js=(t,e,n)=>async(s,i,r)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map((async([e,s])=>{const o=t(e),a=await o.render(e,i);n(e)||a.connect(r,s)})))},Hs=(t,e,n,s)=>i=>t(Mn,(()=>Mn(i)))?Promise.resolve(t(s,s)).then((t=>{if(!t){const t=n(i,512,0,1);i.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>i.currentTime,t.connect(i.destination)}return i.startRendering()})):new Promise((t=>{const n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(i.destination),i.startRendering()})),Xs=t=>(e,n)=>{t.set(e,n)},Us=t=>(e,n)=>t.set(e,n),Ys=(t,e,n,s,i,r,o,a)=>(l,c)=>n(l).render(l,c).then((()=>Promise.all(Array.from(s(c)).map((t=>n(t).render(t,c)))))).then((()=>i(c))).then((n=>("function"!==typeof n.copyFromChannel?(o(n),U(n)):e(r,(()=>r(n)))||a(n),t.add(n),n))),Ws={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Gs=(t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=i(t),l={...Ws,...o},c=n(a,l),u=r(a),h=u?s():null;super(t,!1,c,h),this._pan=e(this,u,c.pan)}get pan(){return this._pan}},zs=(t,e,n,s,i)=>()=>{const r=new WeakMap,o=async(o,a)=>{let l=n(o);const c=q(l,a);if(!c){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(a,t)}return r.set(a,l),c?await t(a,o.pan,l.pan):await s(a,o.pan,l.pan),bt(l)?await i(o,a,l.inputs[0]):await i(o,a,l),l};return{render(t,e){const n=r.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}},Zs=t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},Ks=(t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),i=URL.createObjectURL(n);let r=!1,o=!1;try{await s.audioWorklet.addModule(i);const e=new t(s,"a",{numberOfOutputs:0}),n=s.createOscillator();e.port.onmessage=()=>r=!0,e.onprocessorerror=()=>o=!0,n.connect(e),n.start(0),await s.startRendering()}catch{}finally{URL.revokeObjectURL(i)}return r&&!o},Qs=(t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((t=>{n.oncomplete=()=>{s.disconnect(),t(0!==n.currentTime)},n.startRendering()}))},$s=()=>new DOMException("","UnknownError"),Js={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},ti=(t,e,n,s,i,r,o)=>class extends t{constructor(t,e){const a=i(t),l={...Js,...e},c=n(a,l),u=r(a),h=u?s():null;super(t,!0,c,h),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}},ei=(t,e,n)=>()=>{const s=new WeakMap,i=async(i,r)=>{let o=e(i);const a=q(o,r);if(!a){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=t(r,e)}return s.set(r,o),bt(o)?await n(i,r,o.inputs[0]):await n(i,r,o),o};return{render(t,e){const n=s.get(e);return void 0!==n?Promise.resolve(n):i(t,e)}}},ni=()=>"undefined"===typeof window?null:window,si=(t,e)=>n=>{n.copyFromChannel=(s,i,r=0)=>{const o=t(r),a=t(i);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),u=s.length;for(let t=o<0?-o:0;t+o<l&&t<u;t+=1)s[t]=c[t+o]},n.copyToChannel=(s,i,r=0)=>{const o=t(r),a=t(i);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),u=s.length;for(let t=o<0?-o:0;t+o<l&&t<u;t+=1)c[t+o]=s[t]}},ii=t=>e=>{e.copyFromChannel=(n=>(s,i,r=0)=>{const o=t(r),a=t(i);if(o<e.length)return n.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(s,i,r=0)=>{const o=t(r),a=t(i);if(o<e.length)return n.call(e,s,a,o)})(e.copyToChannel)},ri=t=>(e,n)=>{const s=n.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=s),t(e,"buffer",(t=>()=>{const n=t.call(e);return n===s?null:n}),(t=>n=>t.call(e,null===n?s:n)))},oi=(t,e)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource(),r=()=>{const t=s.numberOfInputs;for(let e=0;e<t;e+=1)i.connect(s,0,e)},o=()=>i.disconnect(s);e(s,r,o)},ai=(t,e,n)=>void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),li=t=>{if(null===t)return!1;const e=t.length;return e%2!==0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},ci=(t,e,n,s)=>{let i=t;while(!i.hasOwnProperty(e))i=Object.getPrototypeOf(i);const{get:r,set:o}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(r),set:s(o)})},ui=t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},(()=>1))}),hi=t=>({...t,channelCount:t.numberOfOutputs}),_i=t=>{const{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,(()=>0)),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,(()=>0))}:{...t,imag:e,real:n}},fi=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(9!==s.code)throw s;fi(t,e,n+1e-7)}},pi=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},di=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},mi=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},gi=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},vi=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},bi=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},yi=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},wi=t=>{t.start=(e=>(n=0,s=0,i)=>{const r=t.buffer,o=null===r?s:Math.min(r.duration,s);null!==r&&o>r.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,i)})(t.start)},xi=(t,e)=>{const n=e.createGain();t.connect(n);const s=(e=>()=>{e.call(t,n),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),ss(t,n),t.stop=(e=>{let s=!1;return(i=0)=>{if(s)try{e.call(t,i)}catch{n.gain.setValueAtTime(0,i)}else e.call(t,i),s=!0}})(t.stop)},Ti=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),"function"===typeof e?e.call(t,n):e.handleEvent.call(t,n)},Si=o(mt),Ai=N(mt),ki=Re(M),Mi=new WeakMap,Ci=ze(Mi),Ri=ie(new Map,new WeakMap),Ei=ni(),Oi=Nn(Ri,X),Bi=Ge(rt),Ii=qs(rt,Bi,Ct),Pi=j(Oi,kt,Ii),Ni=$e(p),Vi=vs(Ei),Di=vn(Vi),Li=new WeakMap,Fi=qe(Ti),qi=Hn(Ei),ji=pn(qi),Hi=dn(Ei),Xi=mn(Ei),Ui=Un(Ei),Yi=Ht(a(u),P(Si,Ai,yt,ki,At,rt,Ci,R,kt,mt,Z,Ct,Rt),Ri,cn(m,At,rt,kt,Mt,Z),X,en,Cs,Ae(yt,m,rt,kt,Mt,Ni,Z,Di),Be(Li,rt,k),Fi,Ni,ji,Hi,Xi,Di,Ui),Wi=F(Yi,Pi,X,Oi,Ni,Di),Gi=new WeakSet,zi=Vn(Ei),Zi=ge(new Uint32Array(1)),Ki=si(Zi,X),Qi=ii(Zi),$i=W(Gi,Ri,Cs,zi,Vi,Zs(zi),Ki,Qi),Ji=V(ls),tr=js(Bi,ot,Ct),er=he(tr),nr=jn(Ji,Ri,pi,di,mi,gi,vi,bi,wi,ri(ci),xi),sr=Fs(Ze(ot),tr),ir=$(er,nr,kt,sr,Ii),rr=Xt(l(_),Li,f,Ut,i.createCancelAndHoldAutomationEvent,i.createCancelScheduledValuesAutomationEvent,i.createExponentialRampToValueAutomationEvent,i.createLinearRampToValueAutomationEvent,i.createSetTargetAutomationEvent,i.createSetValueAutomationEvent,i.createSetValueCurveAutomationEvent,qi,fi),or=Q(Yi,ir,rr,Qe,nr,Ni,Di,Ti),ar=ht(Yi,_t,X,Qe,Xn(ls,ci),Ni,Di,Ii),lr=se(er,$n,kt,sr,Ii),cr=Us(Mi),ur=ne(Yi,rr,lr,en,$n,Ni,Di,cr),hr=En(mt,Hi),_r=oi(Qe,hr),fr=Jn(qi,_r),pr=ae(fr,kt,Ii),dr=oe(Yi,pr,fr,Ni,Di),mr=ue(es,kt,Ii),gr=ce(Yi,mr,es,Ni,Di,hi),vr=is(Ji,nr,ls,hr),br=ns(Ji,Ri,vr,gi,bi),yr=me(er,br,kt,sr,Ii),wr=de(Yi,rr,yr,br,Ni,Di,Ti),xr=rs(Cs,ci),Tr=ye(xr,kt,Ii),Sr=be(Yi,Tr,xr,Ni,Di,cr),Ar=Ce(er,os,kt,sr,Ii),kr=Me(Yi,rr,Ar,os,Ni,Di,cr),Mr=as(Cs),Cr=De(er,Mr,kt,sr,Ii),Rr=Ve(Yi,rr,Cr,Mr,Cs,Ni,Di,cr),Er=Ye(er,ls,kt,sr,Ii),Or=Ue(Yi,rr,Er,ls,Ni,Di),Br=fs(en,Qe,Ts,Cs),Ir=Hs(Ri,ls,Ts,Qs(ls,Vi)),Pr=ln(nr,kt,Vi,Ii,Ir),Nr=cs(Br),Vr=rn(Yi,Nr,Pr,Ni,Di,cr),Dr=ft(rr,fr,br,Ts,Cs,ai,Di,ci),Lr=new WeakMap,Fr=kn(ar,Dr,Fi,Di,Lr,Ti),qr=bs(Ji,Ri,gi,vi,bi,xi),jr=Is(er,qr,kt,sr,Ii),Hr=Bs(Yi,rr,qr,jr,Ni,Di,Ti),Xr=fe(nr),Ur=Ms(Xr,Qe,ls,li,hr),Yr=ks(Xr,Qe,Ur,li,hr,qi,ci),Wr=ws(yt,Qe,fr,ls,Ts,Yr,Cs,At,ai,hr),Gr=ys(Wr),zr=Vs(er,fr,br,ls,Gr,kt,Vi,sr,Ii,Ir),Zr=Ns(Yi,rr,Gr,zr,Ni,Di,cr),Kr=xs(X),Qr=Ls(Kr,Ni,new WeakSet,_i),$r=As(fr,es,ls,Yr,Cs,hr),Jr=Ss($r,Cs),to=zs(er,Jr,kt,sr,Ii),eo=Gs(Yi,rr,Jr,to,Ni,Di),no=ei(Yr,kt,Ii),so=ti(Yi,Qe,Yr,no,Ni,Di,cr),io=bn(Ei),ro=je(Ei),oo=new WeakMap,ao=Je(oo,Vi),lo=io?A(Ri,Cs,Fe(Ei),ro,He(r),Ni,ao,Di,Ui,new WeakMap,new WeakMap,Ks(Ui,Vi),Ei):void 0,co=gn(ji,Di),uo=Se(Gi,Ri,xe,Le,new WeakSet,Ni,co,H,Mn,Ki,Qi),ho=te(lo,Wi,$i,or,ur,dr,gr,wr,Sr,uo,kr,Rr,Or,Vr,Fr,Hr,Zr,Qr,eo,so),_o=yn(Yi,ps,Ni,Di),fo=xn(Yi,ds,Ni,Di),po=Tn(Yi,ms,Ni,Di),mo=gs(Qe,Di),go=Sn(Yi,mo,Ni),vo=ut(ho,Qe,Cs,$s,_o,fo,po,go,qi),bo=tn(Lr),yo=D(bo),wo=_e(X),xo=Ee(bo),To=Pe(X),So=new WeakMap,Ao=We(So,k),ko=Qn(wo,X,Qe,fr,es,br,ls,Ts,Cs,To,ro,Ao,hr),Mo=Wn(Qe,ko,ls,Cs,hr),Co=Jt(er,wo,nr,fr,es,br,ls,xo,To,ro,kt,Ui,Vi,sr,Ii,Ir),Ro=Ke(oo),Eo=Xs(So),Oo=io?Gt(yo,Yi,rr,Co,Mo,rt,Ro,Ni,Di,Ui,ui,Eo,yi,Ti):void 0,Bo=(An(Qe,Cs,$s,Fr,qi),we(Cs,Vi)),Io=Ys(Gi,Ri,Bi,bo,Ir,H,Ki,Qi),Po=(Rn(Ri,Qe,Bo,Fr,Io),Es(ho,Ri,Qe,Bo,Io)),No=un(p,ji),Vo=hn(h,Hi),Do=_n(f,Xi),Lo=fn(p,Di);function Fo(t,e){if(!t)throw new Error(e)}function qo(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function jo(t){t.isOffline||"running"===t.state||Uo('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Ho=console;function Xo(...t){Ho.log(...t)}function Uo(...t){Ho.warn(...t)}function Yo(t){return"undefined"===typeof t}function Wo(t){return!Yo(t)}function Go(t){return"function"===typeof t}function zo(t){return"number"===typeof t}function Zo(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function Ko(t){return"boolean"===typeof t}function Qo(t){return Array.isArray(t)}function $o(t){return"string"===typeof t}function Jo(t){return $o(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function ta(t){return new vo(t)}function ea(t,e,n){return new Po(t,e,n)}const na="object"===typeof self?self:null,sa=na&&(na.hasOwnProperty("AudioContext")||na.hasOwnProperty("webkitAudioContext"));function ia(t,e,n){return Fo(Wo(Oo),"This node only works in a secure context (https or localhost)"),new Oo(t,e,n)}function ra(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function oa(t,e,n,s){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(e){r(e)}}function a(t){try{l(s["throw"](t))}catch(e){r(e)}}function l(t){t.done?n(t.value):i(t.value).then(o,a)}l((s=s.apply(t,e||[])).next())}))}Object.create;Object.create;class aa{constructor(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout((()=>{this._createTimeout(),this._callback()}),1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function la(t){return Do(t)}function ca(t){return Vo(t)}function ua(t){return Lo(t)}function ha(t){return No(t)}function _a(t){return t instanceof AudioBuffer}function fa(t,e){return"value"===t||la(e)||ca(e)||_a(e)}function pa(t,...e){if(!e.length)return t;const n=e.shift();if(Zo(t)&&Zo(n))for(const s in n)fa(s,n[s])?t[s]=n[s]:Zo(n[s])?(t[s]||Object.assign(t,{[s]:{}}),pa(t[s],n[s])):Object.assign(t,{[s]:n[s]});return pa(t,...e)}function da(t,e){return t.length===e.length&&t.every(((t,n)=>e[n]===t))}function ma(t,e,n=[],s){const i={},r=Array.from(e);if(Zo(r[0])&&s&&!Reflect.has(r[0],s)){const e=Object.keys(r[0]).some((e=>Reflect.has(t,e)));e||(pa(i,{[s]:r[0]}),n.splice(n.indexOf(s),1),r.shift())}if(1===r.length&&Zo(r[0]))pa(i,r[0]);else for(let o=0;o<n.length;o++)Wo(r[o])&&(i[n[o]]=r[o]);return pa(t,i)}function ga(t){return t.constructor.getDefaults()}function va(t,e){return Yo(t)?e:t}function ba(t,e){return e.forEach((e=>{Reflect.has(t,e)&&delete t[e]})),t}
/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */
class ya{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||na&&this.toString()===na.TONE_DEBUG_CLASS)&&Xo(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}ya.version=s;const wa=1e-6;function xa(t,e){return t>e+wa}function Ta(t,e){return xa(t,e)||Aa(t,e)}function Sa(t,e){return t+wa<e}function Aa(t,e){return Math.abs(t-e)<wa}function ka(t,e,n){return Math.max(Math.min(t,n),e)}class Ma extends ya{constructor(){super(),this.name="Timeline",this._timeline=[];const t=ma(Ma.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Fo(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Fo(Ta(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const n=this._search(t,e);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Aa(this._timeline[e].time,t)){for(let n=e;n>=0;n--){if(!Aa(this._timeline[n].time,t))break;e=n}this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&Ta(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let n=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][e]<=t)return s-1;while(n<i){let s=Math.floor(n+(i-n)/2);const r=this._timeline[s],o=this._timeline[s+1];if(Aa(r[e],t)){for(let n=s;n<this._timeline.length;n++){const i=this._timeline[n];if(!Aa(i[e],t))break;s=n}return s}if(Sa(r[e],t)&&xa(o[e],t))return s;xa(r[e],t)?i=s:n=s+1}return-1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){const n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let s=this._search(t),i=this._search(e);return-1!==s&&-1!==i?(this._timeline[s].time!==t&&(s+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,s,i)):-1===s&&this._iterate(n,0,i),this}forEachFrom(t,e){let n=this._search(t);while(n>=0&&this._timeline[n].time>=t)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){const n=this._search(t);if(-1!==n&&Aa(this._timeline[n].time,t)){let s=n;for(let e=n;e>=0;e--){if(!Aa(this._timeline[e].time,t))break;s=e}this._iterate((t=>{e(t)}),s,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Ca=[];function Ra(t){Ca.push(t)}function Ea(t){Ca.forEach((e=>e(t)))}const Oa=[];function Ba(t){Oa.push(t)}function Ia(t){Oa.forEach((e=>e(t)))}class Pa extends ya{constructor(){super(...arguments),this.name="Emitter"}on(t,e){const n=t.split(/\W+/);return n.forEach((t=>{Yo(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)})),this}once(t,e){const n=(...s)=>{e(...s),this.off(t,n)};return this.on(t,n),this}off(t,e){const n=t.split(/\W+/);return n.forEach((n=>{if(Yo(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(Yo(e))this._events[t]=[];else{const n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}})),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const n=this._events[t].slice(0);for(let t=0,s=n.length;t<s;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach((e=>{const n=Object.getOwnPropertyDescriptor(Pa.prototype,e);Object.defineProperty(t.prototype,e,n)}))}dispose(){return super.dispose(),this._events=void 0,this}}class Na extends Pa{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Va extends Na{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Ma,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=ma(Va.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=ta({latencyHint:t.latencyHint}),this._ticker=new aa(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(Ea(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){Fo(ha(this._context),"Not available if OfflineAudioContext");const e=this._context;return e.createMediaStreamSource(t)}createMediaElementSource(t){Fo(ha(this._context),"Not available if OfflineAudioContext");const e=this._context;return e.createMediaElementSource(t)}createMediaStreamDestination(){Fo(ha(this._context),"Not available if OfflineAudioContext");const t=this._context;return t.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Fo(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Fo(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Fo(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Fo(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return ia(this.rawContext,t,e)}addAudioWorkletModule(t,e){return oa(this,void 0,void 0,(function*(){Fo(Wo(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)}))}workletsAreReady(){return oa(this,void 0,void 0,(function*(){const t=[];this._workletModules.forEach((e=>t.push(e))),yield Promise.all(t)}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,$o(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25;break}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return ha(this._context)?this._context.resume():Promise.resolve()}close(){return oa(this,void 0,void 0,(function*(){ha(this._context)&&(yield this._context.close()),this._initialized&&Ia(this)}))}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let i=0;i<n.length;i++)n[i]=t;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=e,s.loop=!0,s.start(0),this._constants.set(t,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((t=>this._constants[t].disconnect())),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();while(this._timeouts.length&&e&&e.time<=t)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach((e=>{e.id===t&&this._timeouts.remove(e)})),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const n=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),s()},id:n,time:i+e})};return s(),n}}class Da extends Na{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return oa(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function La(t,e){Qo(e)?e.forEach((e=>La(t,e))):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Fa(t,e){Qo(e)?e.forEach((e=>Fa(t,e))):Object.defineProperty(t,e,{writable:!0})}const qa=()=>{};class ja extends ya{constructor(){super(),this.name="ToneAudioBuffer",this.onload=qa;const t=ma(ja.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&_a(t.url)||t.url instanceof ja?this.set(t.url):$o(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:qa,onload:qa,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Ya().sampleRate}set(t){return t instanceof ja?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return oa(this,void 0,void 0,(function*(){const e=ja.load(t).then((t=>{this.set(t),this.onload(this)}));ja.downloads.push(e);try{yield e}finally{const t=ja.downloads.indexOf(e);ja.downloads.splice(t,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=Qo(t)&&t[0].length>0,n=e?t.length:1,s=e?t[0].length:t.length,i=Ya(),r=i.createBuffer(n,s,i.sampleRate),o=e||1!==n?t:[t];for(let a=0;a<n;a++)r.copyToChannel(o[a],a);return this._buffer=r,this}toMono(t){if(zo(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length);const e=this.numberOfChannels;for(let n=0;n<e;n++){const e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map((t=>t/e)),this.fromArray(t)}return this}toArray(t){if(zo(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){const n=Math.floor(t*this.sampleRate),s=Math.floor(e*this.sampleRate);Fo(n<s,"The start time must be less than the end time");const i=s-n,r=Ya().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let o=0;o<this.numberOfChannels;o++)r.copyToChannel(this.getChannelData(o).subarray(n,s),o);return new ja(r)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new ja).fromArray(t)}static fromUrl(t){return oa(this,void 0,void 0,(function*(){const e=new ja;return yield e.load(t)}))}static load(t){return oa(this,void 0,void 0,(function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const n=e[1].split("|");let s=n[0];for(const t of n)if(ja.supportsType(t)){s=t;break}t=t.replace(e[0],s)}const n=""===ja.baseUrl||ja.baseUrl.endsWith("/")?ja.baseUrl:ja.baseUrl+"/",s=yield fetch(n+t);if(!s.ok)throw new Error(`could not load url: ${t}`);const i=yield s.arrayBuffer(),r=yield Ya().decodeAudioData(i);return r}))}static supportsType(t){const e=t.split("."),n=e[e.length-1],s=document.createElement("audio").canPlayType("audio/"+n);return""!==s}static loaded(){return oa(this,void 0,void 0,(function*(){yield Promise.resolve();while(ja.downloads.length)yield ja.downloads[0]}))}}ja.baseUrl="",ja.downloads=[];class Ha extends Va{constructor(){super({clockSource:"offline",context:ua(arguments[0])?arguments[0]:ea(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:ua(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=ua(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return oa(this,void 0,void 0,(function*(){let e=0;while(this._duration-this._currentTime>=0){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const n=Math.floor(this.sampleRate/128);t&&e%n===0&&(yield new Promise((t=>setTimeout(t,1))))}}))}render(t=!0){return oa(this,void 0,void 0,(function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new ja(e)}))}close(){return Promise.resolve()}}const Xa=new Da;let Ua=Xa;function Ya(){return Ua===Xa&&sa&&Wa(new Va),Ua}function Wa(t){Ua=ha(t)?new Va(t):ua(t)?new Ha(t):t}if(na&&!na.TONE_SILENCE_LOGGING){let t="v";"dev"===s&&(t="");const e=` * Tone.js ${t}${s} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Ga(t){return Math.pow(10,t/20)}function za(t){return Math.log(t)/Math.LN10*20}function Za(t){return Math.pow(2,t/12)}let Ka=440;function Qa(){return Ka}function $a(t){Ka=t}function Ja(t){return Math.round(tl(t))}function tl(t){return 69+12*Math.log2(t/Ka)}function el(t){return Ka*Math.pow(2,(t-69)/12)}class nl extends ya{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const n=parseInt(t,10),s="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/n)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let s=0;return t&&"0"!==t&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s+=this._beatsToUnits(parseFloat(n)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof nl&&this.fromType(this._val),Yo(this._val))return this._noArg();if($o(this._val)&&Yo(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Zo(this._val)){let t=0;for(const e in this._val)if(Wo(this._val[e])){const n=this._val[e],s=new this.constructor(this.context,e).valueOf()*n;t+=s}return t}if(Wo(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return $o(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class sl extends nl{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new sl(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const n=new this.constructor(this.context,t).valueOf(),s=this.valueOf(),i=Math.round(s/n),r=i*n,o=r-s;return s+o*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let i=1;i<9;i++){const t=Math.pow(2,i);e.push(t+"n."),e.push(t+"n"),e.push(t+"t")}e.push("0");let n=e[0],s=new sl(this.context,e[0]).toSeconds();return e.forEach((e=>{const i=new sl(this.context,e).toSeconds();Math.abs(i-t)<Math.abs(s-t)&&(n=e,s=i)})),n}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const n=Math.floor(e/this._getTimeSignature());let s=e%1*4;e=Math.floor(e)%this._getTimeSignature();const i=s.toString();i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3)));const r=[n,e,s];return r.join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Ja(this.toFrequency())}_now(){return this.context.now()}}class il extends sl{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Qa()}static set A4(t){$a(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:il.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const n=rl[t.toLowerCase()],s=n+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?s:il.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let s=1;return t&&"0"!==t&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s*=this._beatsToUnits(parseFloat(n)/4)),s}}})}transpose(t){return new il(this.context,this.valueOf()*Za(t))}harmonize(t){return t.map((t=>this.transpose(t)))}toMidi(){return Ja(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/il.A4);let n=Math.round(12*e)+57;const s=Math.floor(n/12);s<0&&(n+=-12*s);const i=ol[n%12];return i+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return el(t)}static ftom(t){return Ja(t)}}const rl={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},ol=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class al extends sl{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ll extends ya{constructor(){super();const t=ma(ll.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Ya()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new sl(this.context,t).toSeconds()}toFrequency(t){return new il(this.context,t).toFrequency()}toTicks(t){return new al(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach((n=>{Yo(t[n])&&delete e[n]})),e}get(){const t=ga(this);return Object.keys(t).forEach((e=>{if(Reflect.has(this,e)){const n=this[e];Wo(n)&&Wo(n.value)&&Wo(n.setValueAtTime)?t[e]=n.value:n instanceof ll?t[e]=n._getPartialProperties(t[e]):Qo(n)||zo(n)||$o(n)||Ko(n)?t[e]=n:delete t[e]}})),t}set(t){return Object.keys(t).forEach((e=>{Reflect.has(this,e)&&Wo(this[e])&&(this[e]&&Wo(this[e].value)&&Wo(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof ll?this[e].set(t[e]):this[e]=t[e])})),this}}class cl extends Ma{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return qo(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){const n=this._search(e);for(let s=n;s>=0;s--){const e=this._timeline[s];if(e.state===t)return e}}getNextState(t,e){const n=this._search(e);if(-1!==n)for(let s=n;s<this._timeline.length;s++){const e=this._timeline[s];if(e.state===t)return e}}}class ul extends ll{constructor(){super(ma(ul.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=ma(ul.getDefaults(),arguments,["param","units","convert"]);Fo(Wo(t.param)&&(la(t.param)||t.param instanceof ul),"param must be an AudioParam");while(!la(t.param))t.param=t.param._param;this._swappable=!!Wo(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Ma(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Wo(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ll.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Wo(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Wo(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Wo(this.maxValue)&&Wo(this.minValue)&&qo(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Ga(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?za(t):t}setValueAtTime(t,e){const n=this.toSeconds(e),s=this._fromType(t);return Fo(isFinite(s)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),s=this._events.get(e);let i=this._initialValue;if(null===s)i=this._initialValue;else if("setTargetAtTime"!==s.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=s.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=s.value;if("setTargetAtTime"===s.type){const e=this._events.getBefore(s.time);t=null===e?this._initialValue:e.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(s.time,t,n.time,n.value,e):this._exponentialInterpolate(s.time,t,n.time,n.value,e)}else i=s.value;else{const t=this._events.getBefore(s.time);let n;n=null===t?this._initialValue:t.value,"setTargetAtTime"===s.type&&(i=this._exponentialApproach(s.time,n,s.value,s.constant,e))}return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const n=this._fromType(t),s=this.toSeconds(e);return Fo(isFinite(n)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:s,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,s),this._param.linearRampToValueAtTime(n,s),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=Aa(n,0)?this._minOutput:n,this._assertRange(n);const s=this.toSeconds(e);return Fo(isFinite(n)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,s),this._param.exponentialRampToValueAtTime(n,s),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);const s=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,s),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){const s=this._fromType(t);Fo(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(e);return this._assertRange(s),Fo(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",t,i,n),this._param.setTargetAtTime(s,i,n),this}setValueCurveAtTime(t,e,n,s=1){n=this.toSeconds(n),e=this.toSeconds(e);const i=this._fromType(t[0])*s;this.setValueAtTime(this._toType(i),e);const r=n/(t.length-1);for(let o=1;o<t.length;o++){const n=this._fromType(t[o])*s;this.linearRampToValueAtTime(this._toType(n),e+o*r)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return Fo(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));Fo(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);const s=this._events.get(e),i=this._events.getAfter(e);return s&&Aa(s.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){const s=this._events.getAfter(n.time),i=s?s.time:e+2,r=(i-e)/10;for(let n=e;n<i;n+=r)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,(e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this}setParam(t){Fo(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,s,i){return n+(e-n)*Math.exp(-(i-t)/s)}_linearInterpolate(t,e,n,s,i){return e+(i-t)/(n-t)*(s-e)}_exponentialInterpolate(t,e,n,s,i){return e*Math.pow(s/e,(i-t)/(n-t))}}class hl extends ll{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Wo(this.input)?la(this.input)||this.input instanceof ul?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Wo(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Wo(t)&&(t instanceof hl||ca(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){const e=this._getInternalNodes();e.forEach((e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}_getChannelProperties(){const t=this._getInternalNodes();Fo(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return fl(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Uo("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return pl(this,t,e,n),this}chain(...t){return _l(this,...t),this}fan(...t){return t.forEach((t=>this.connect(t))),this}dispose(){return super.dispose(),Wo(this.input)&&(this.input instanceof hl?this.input.dispose():ca(this.input)&&this.input.disconnect()),Wo(this.output)&&(this.output instanceof hl?this.output.dispose():ca(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function _l(...t){const e=t.shift();t.reduce(((t,e)=>(t instanceof hl?t.connect(e):ca(t)&&fl(t,e),e)),e)}function fl(t,e,n=0,s=0){Fo(Wo(t),"Cannot connect from undefined node"),Fo(Wo(e),"Cannot connect to undefined node"),(e instanceof hl||ca(e))&&Fo(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Fo(t.numberOfOutputs>0,"Cannot connect from node with no outputs");while(e instanceof hl||e instanceof ul)Wo(e.input)&&(e=e.input);while(t instanceof hl)Wo(t.output)&&(t=t.output);la(e)?t.connect(e,n):t.connect(e,n,s)}function pl(t,e,n=0,s=0){if(Wo(e))while(e instanceof hl)e=e.input;while(!ca(t))Wo(t.output)&&(t=t.output);la(e)?t.disconnect(e,n):ca(e)?t.disconnect(e,n,s):t.disconnect()}class dl extends hl{constructor(){super(ma(dl.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=ma(dl.getDefaults(),arguments,["gain","units"]);this.gain=new ul({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),La(this,"gain")}static getDefaults(){return Object.assign(hl.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ml extends hl{constructor(t){super(t),this.onended=qa,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new dl({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(hl.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:qa})}_startGain(t,e=1){Fo(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Fo(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((()=>{const t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()}),this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==qa&&(this.onended(this),this.onended=qa,!this.context.isOffline)){const t=()=>this.dispose();"undefined"!==typeof window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Fo(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class gl extends ml{constructor(){super(ma(gl.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=ma(gl.getDefaults(),arguments,["offset"]);fl(this._source,this._gainNode),this.offset=new ul({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(ml.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class vl extends hl{constructor(){super(ma(vl.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=ma(vl.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new gl({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(hl.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return bl(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,s){return this._param.setValueCurveAtTime(t,e,n,s),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function bl(t,e,n,s){(e instanceof ul||la(e)||e instanceof vl&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof vl&&(e.overridden=!0)),fl(t,e,n,s)}class yl extends ul{constructor(){super(ma(yl.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Ma(1/0),this._multiplier=1;const t=ma(yl.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ul.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);const s=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max(1/n,1));for(let o=0;o<=r;o++){const t=n*o+e,r=this._exponentialApproach(i.time,i.value,s,n,t);this.linearRampToValueAtTime(this._toType(r),t)}return this}setValueAtTime(t,e){const n=this.toSeconds(e);super.setValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),r=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(r,0),this}linearRampToValueAtTime(t,e){const n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),r=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(r,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const n=this._fromType(t),s=this._events.get(e),i=Math.round(Math.max(10*(e-s.time),1)),r=(e-s.time)/i;for(let o=0;o<=i;o++){const t=r*o+s.time,i=this._exponentialInterpolate(s.time,s.value,e,n,t);this.linearRampToValueAtTime(this._toType(i),t)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Yo(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const n=this._fromType(this.getValueAtTime(t.time));let s=this._fromType(this.getValueAtTime(e));const i=this._events.get(e);return i&&i.time===e&&"setValueAtTime"===i.type&&(s=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+s)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(e);return this.getTimeOfTick(s+t)-n}getTimeOfTick(t){const e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){const s=this._fromType(this.getValueAtTime(e.time)),i=this._fromType(this.getValueAtTime(n.time)),r=(i-s)/(n.time-e.time),o=Math.sqrt(Math.pow(s,2)-2*r*(e.ticks-t)),a=(-s+o)/r,l=(-s-o)/r;return(a>0?a:l)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const n=this.toSeconds(e),s=this.toSeconds(t),i=this.getTicksAtTime(n),r=this.getTicksAtTime(n+s);return r-i}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class wl extends vl{constructor(){super(ma(wl.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=ma(wl.getDefaults(),arguments,["value"]);this.input=this._param=new yl({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(vl.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class xl extends ll{constructor(){super(ma(xl.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new cl,this._tickOffset=new Ma;const t=ma(xl.getDefaults(),arguments,["frequency"]);this.frequency=new wl({context:this.context,units:t.units,value:t.frequency}),La(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ll.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Wo(e)&&this.setTicksAtTime(e,n)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),n=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);let i=n,r=0;return this._state.forEachBetween(n.time,e+this.sampleTime,(t=>{let e=i.time;const n=this._tickOffset.get(t.time);n&&n.time>=i.time&&(r=n.ticks,e=n.time),"started"===i.state&&"started"!==t.state&&(r+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),i=t})),this._state.remove(s),r}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let s=e,i=0;return this._state.forEachBetween(e.time,t+this.sampleTime,(t=>{let e=s.time;const n=this._tickOffset.get(t.time);n&&n.time>=s.time&&(i=n.seconds,e=n.time),"started"===s.state&&"started"!==t.state&&(i+=t.time-e),s=t})),this._state.remove(n),i}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const n=this._tickOffset.get(e),s=this._state.get(e),i=Math.max(n.time,s.time),r=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(r)}forEachTickBetween(t,e,n){let s=this._state.get(t);this._state.forEachBetween(t,e,(e=>{s&&"started"===s.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(s.time,t),e.time-this.sampleTime,n),s=e}));let i=null;if(s&&"started"===s.state){const o=Math.max(s.time,t),a=this.frequency.getTicksAtTime(o),l=this.frequency.getTicksAtTime(s.time),c=a-l;let u=Math.ceil(c)-c;u=Aa(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);while(h<e){try{n(h,Math.round(this.getTicksAtTime(h)))}catch(r){i=r;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Tl extends ll{constructor(){super(ma(Tl.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=qa,this._lastUpdate=0,this._state=new cl("stopped"),this._boundLoop=this._loop.bind(this);const t=ma(Tl.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new xl({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,La(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ll.getDefaults(),{callback:qa,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){jo(this.context);const n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(s+t,n)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,(t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time);break}})),this._tickSource.forEachTickBetween(t,e,((t,e)=>{this.callback(t,e)})))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Pa.mixin(Tl);function Sl(t,e,n=2,s=Ya().sampleRate){return oa(this,void 0,void 0,(function*(){const i=Ya(),r=new Ha(n,e,s);Wa(r),yield t(r);const o=r.render();Wa(i);const a=yield o;return new ja(a)}))}class Al extends ya{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=ma(Al.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach((e=>{this._loadingCount++;const n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)}))}static getDefaults(){return{baseUrl:"",onerror:qa,onload:qa,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Fo(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every((([t,e])=>e.loaded))}add(t,e,n=qa,s=qa){return $o(e)?this._buffers.set(t.toString(),new ja(this.baseUrl+e,n,s)):this._buffers.set(t.toString(),new ja(e,n,s)),this}dispose(){return super.dispose(),this._buffers.forEach((t=>t.dispose())),this._buffers.clear(),this}}class kl extends al{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Ml extends ll{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ma,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;while(this._events.length&&this._events.peek().time-this.anticipation<=t){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Ra((t=>{t.draw=new Ml({context:t})})),Ba((t=>{t.draw.dispose()}));class Cl extends ya{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Fo(Wo(t.time),"Events must have a time property"),Fo(Wo(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new Rl(t.time,t.time+t.duration,t);null===this._root?this._root=e:this._root.insert(e),this._length++;while(null!==e)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const n of e)if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,(t=>this.remove(t))),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{const e=t.getBalance();let n,s=null;if(e>0)if(null===t.left.right)n=t.left,n.right=t.right,s=n;else{n=t.left.right;while(null!==n.right)n=n.right;n.parent&&(n.parent.right=n.left,s=n.parent,n.left=t.left,n.right=t.right)}else if(null===t.right.left)n=t.right,n.left=t.left,s=n;else{n=t.right.left;while(null!==n.left)n=n.left;n.parent&&(n.parent.left=n.right,s=n.parent,n.left=t.left,n.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=n:t.parent.right=n:this._setRoot(n),s&&this._rebalance(s)}t.dispose()}_rotateLeft(t){const e=t.parent,n=t.isLeftChild(),s=t.right;s&&(t.right=s.left,s.left=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rotateRight(t){const e=t.parent,n=t.isLeftChild(),s=t.left;s&&(t.left=s.right,s.right=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse((t=>e.push(t))),e.forEach((e=>{e.event&&t(e.event)}))}return this}forEachAtTime(t,e){if(null!==this._root){const n=[];this._root.search(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}forEachFrom(t,e){if(null!==this._root){const n=[];this._root.searchAfter(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse((t=>t.dispose())),this._root=null,this}}class Rl{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class El extends hl{constructor(){super(ma(El.getDefaults(),arguments,["volume"])),this.name="Volume";const t=ma(El.getDefaults(),arguments,["volume"]);this.input=this.output=new dl({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,La(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(hl.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ol extends hl{constructor(){super(ma(Ol.getDefaults(),arguments)),this.name="Destination",this.input=new El({context:this.context}),this.output=new dl({context:this.context}),this.volume=this.input.volume;const t=ma(Ol.getDefaults(),arguments);_l(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(hl.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),_l(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Ra((t=>{t.destination=new Ol({context:t})})),Ba((t=>{t.destination.dispose()}));class Bl extends ya{constructor(t){super(),this.name="TimelineValue",this._timeline=new Ma({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class Il{constructor(t,e){this.id=Il._eventId++;const n=Object.assign(Il.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:qa,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Il._eventId=0;class Pl extends Il{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(Pl.getDefaults(),e);this.duration=new kl(t.context,n.duration).valueOf(),this._interval=new kl(t.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Il.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new kl(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new kl(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new kl(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Nl extends ll{constructor(){super(ma(Nl.getDefaults(),arguments)),this.name="Transport",this._loop=new Bl(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ma,this._repeatedEvents=new Cl,this._syncedSignals=[],this._swingAmount=0;const t=ma(Nl.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new Tl({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),La(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(ll.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(2*this._swingTicks)!==0){const n=e%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(n*Math.PI)*this._swingAmount;t+=new kl(this.context,2*this._swingTicks/3).toSeconds()*s}this._timeline.forEachAtTime(e,(e=>e.invoke(t)))}schedule(t,e){const n=new Il(this,{callback:t,time:new al(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,s=1/0){const i=new Pl(this,{callback:t,duration:new sl(this.context,s).toTicks(),interval:new sl(this.context,e).toTicks(),time:new al(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,e){const n=new Il(this,{callback:t,once:!0,time:new al(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,(t=>this.clear(t.id))),this._repeatedEvents.forEachFrom(e,(t=>this.clear(t.id))),this}_bindClockEvents(){this._clock.on("start",((t,e)=>{e=new kl(this.context,e).toSeconds(),this.emit("start",t,e)})),this._clock.on("stop",(t=>{this.emit("stop",t)})),this._clock.on("pause",(t=>{this.emit("pause",t)}))}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return Wo(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Qo(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new sl(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new sl(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new kl(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new kl(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(this.loop){const t=this.now(),e=this._clock.getTicksAtTime(t);return(e-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(e),s=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e),i=e+s;this.emit("stop",i),this._clock.setTicksAtTime(t,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),n=this.getTicksAtTime(e),s=t-n%t;return this._clock.nextTickTime(s,e)}}syncSignal(t,e){if(!e){const n=this.now();if(0!==t.getValueAtTime(n)){const s=this.bpm.getValueAtTime(n),i=1/(60/s/this.PPQ);e=t.getValueAtTime(n)/i}else e=0}const n=new dl(e);return this.bpm.connect(n),n.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:n,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Fa(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Pa.mixin(Nl),Ra((t=>{t.transport=new Nl({context:t})})),Ba((t=>{t.transport.dispose()}));class Vl extends hl{constructor(t){super(t),this.input=void 0,this._state=new cl("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=qa,this._syncedStop=qa,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new El({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,La(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(hl.getDefaults(),{mute:!1,onstop:qa,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let s=Yo(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(s=this._clampToCurrentTime(s),this._synced||"started"!==this._state.getValueAtTime(s))if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const t=this._state.get(s);t&&(t.offset=this.toSeconds(va(e,0)),t.duration=n?this.toSeconds(n):void 0);const i=this.context.transport.schedule((t=>{this._start(t,e,n)}),s);this._scheduled.push(i),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else jo(this.context),this._start(s,e,n);else Fo(xa(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,e,n);return this}stop(t){let e=Yo(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||Wo(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){const s=e-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-s),this._start(t,this.toSeconds(n.offset)+s,i)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((t=>this.context.transport.clear(t))),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=qa,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Dl extends ml{constructor(){super(ma(Dl.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=ma(Dl.getDefaults(),arguments,["url","onload"]);fl(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ul({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new ja(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ml.getDefaults(),{url:new ja,loop:!1,loopEnd:0,loopStart:0,onload:qa,onerror:qa,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,s=1){Fo(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,s),e=this.loop?va(e,this.loopStart):va(e,0);let r=Math.max(this.toSeconds(e),0);if(this.loop){const t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;Ta(r,t)&&(r=(r-e)%n+e),Aa(r,this.buffer.duration)&&(r=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Sa(r,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,r)),Wo(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(i+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Ll(t,e){return oa(this,void 0,void 0,(function*(){const n=e/t.context.sampleRate,s=new Ha(1,n,t.context.sampleRate),i=new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination();i.start(0);const r=yield s.render();return r.getChannelData(0)}))}class Fl extends ml{constructor(){super(ma(Fl.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=ma(Fl.getDefaults(),arguments,["frequency","type"]);fl(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new ul({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new ul({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),La(this,["frequency","detune"])}static getDefaults(){return Object.assign(ml.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class ql extends Vl{constructor(){super(ma(ql.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=ma(ql.getDefaults(),arguments,["frequency","type"]);this.frequency=new vl({context:this.context,units:"frequency",value:t.frequency}),La(this,"frequency"),this.detune=new vl({context:this.context,units:"cents",value:t.detune}),La(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Vl.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),n=new Fl({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type){const t=ql._periodicWaveCache.find((t=>t.phase===this._phase&&da(t.partials,this._partials)));return t}{const t=ql._periodicWaveCache.find((t=>t.type===this._type&&t.phase===this._phase));return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const e=this._getCachedPeriodicWave();if(Wo(e)){const{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[e,n]=this._getRealImaginary(t,this._phase),s=this.context.createPeriodicWave(e,n);this._wave=s,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),ql._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),ql._periodicWaveCache.length>100&&ql._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){qo(t,0);let e=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{const e=new Float32Array(t);this._partials.forEach(((t,n)=>e[n]=t)),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){const n=4096;let s=n/2;const i=new Float32Array(s),r=new Float32Array(s);let o=1;if("custom"===t){if(o=this._partials.length+1,this._partialCount=this._partials.length,s=o,0===this._partials.length)return[i,r]}else{const e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(o=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],o=Math.max(o,2),s=o):this._partialCount=0,this._partials=[]}for(let a=1;a<s;++a){const n=2/(a*Math.PI);let s;switch(t){case"sine":s=a<=o?1:0,this._partials[a-1]=s;break;case"square":s=1&a?2*n:0,this._partials[a-1]=s;break;case"sawtooth":s=n*(1&a?1:-1),this._partials[a-1]=s;break;case"triangle":s=1&a?n*n*2*(a-1>>1&1?-1:1):0,this._partials[a-1]=s;break;case"custom":s=this._partials[a-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==s?(i[a]=-s*Math.sin(e*a),r[a]=s*Math.cos(e*a)):(i[a]=0,r[a]=0)}return[i,r]}_inverseFFT(t,e,n){let s=0;const i=t.length;for(let r=0;r<i;r++)s+=t[r]*Math.cos(r*n)+e[r]*Math.sin(r*n);return s}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let n=0;const s=2*Math.PI,i=32;for(let r=0;r<i;r++)n=Math.max(this._inverseFFT(t,e,r/i*s),n);return ka(-this._inverseFFT(t,e,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return oa(this,void 0,void 0,(function*(){return Ll(this,t)}))}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}ql._periodicWaveCache=[];class jl extends hl{constructor(){super(Object.assign(ma(jl.getDefaults(),arguments,["context"])))}connect(t,e=0,n=0){return bl(this,t,e,n),this}}class Hl extends jl{constructor(){super(Object.assign(ma(Hl.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=ma(Hl.getDefaults(),arguments,["mapping","length"]);Qo(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):Go(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(vl.getDefaults(),{length:1024})}setMap(t,e=1024){const n=new Float32Array(e);for(let s=0,i=e;s<i;s++){const e=s/(i-1)*2-1;n[s]=t(e,s)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const e=["none","2x","4x"].some((e=>e.includes(t)));Fo(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Xl extends jl{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Hl({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ul extends vl{constructor(){super(Object.assign(ma(Ul.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=ma(Ul.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new dl({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(vl.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Yl extends Vl{constructor(){super(ma(Yl.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Xl({context:this.context}),this._modulationNode=new dl({context:this.context});const t=ma(Yl.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new ql({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new ql({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Ul({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),La(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ql.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return oa(this,void 0,void 0,(function*(){return Ll(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Wl extends Vl{constructor(){super(ma(Wl.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new dl({context:this.context,gain:0});const t=ma(Wl.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new ql({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new vl({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new ql({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Ul({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new Ul({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),La(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ql.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return oa(this,void 0,void 0,(function*(){return Ll(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Gl extends Vl{constructor(){super(ma(Gl.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new dl({context:this.context,gain:0}),this._thresh=new Hl({context:this.context,mapping:t=>t<=0?-1:1});const t=ma(Gl.getDefaults(),arguments,["frequency","width"]);this.width=new vl({context:this.context,units:"audioRange",value:t.width}),this._triangle=new ql({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),La(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Vl.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return oa(this,void 0,void 0,(function*(){return Ll(this,t)}))}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class zl extends Vl{constructor(){super(ma(zl.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=ma(zl.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new vl({context:this.context,units:"frequency",value:t.frequency}),this.detune=new vl({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,La(this,["frequency","detune"])}static getDefaults(){return Object.assign(ql.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach((e=>e.start(t)))}_stop(t){t=this.toSeconds(t),this._forEach((e=>e.stop(t)))}_restart(t){this._forEach((e=>e.restart(t)))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach((e=>e.type=t))}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,n=t/(this._oscillators.length-1);this._forEach(((t,s)=>t.detune.value=e+n*s))}}get count(){return this._oscillators.length}set count(t){if(qo(t,1),this._oscillators.length!==t){this._forEach((t=>t.dispose())),this._oscillators=[];for(let e=0;e<t;e++){const n=new ql({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):qa});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach((t=>t.start()))}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach(((t,e)=>t.phase=this._phase+e/this.count*360))}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach((e=>e.baseType=t)),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((e=>e.partials=t)))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach((e=>e.partialCount=t)),this._type=this._oscillators[0].type}asArray(t=1024){return oa(this,void 0,void 0,(function*(){return Ll(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach((t=>t.dispose())),this}}class Zl extends Vl{constructor(){super(ma(Zl.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ul({context:this.context,value:2});const t=ma(Zl.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Gl({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new ql({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),La(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Vl.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return oa(this,void 0,void 0,(function*(){return Ll(this,t)}))}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Kl={am:Yl,fat:zl,fm:Wl,oscillator:ql,pulse:Gl,pwm:Zl};class Ql extends Vl{constructor(){super(ma(Ql.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=ma(Ql.getDefaults(),arguments,["frequency","type"]);this.frequency=new vl({context:this.context,units:"frequency",value:t.frequency}),this.detune=new vl({context:this.context,units:"cents",value:t.detune}),La(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(ql.getDefaults(),Wl.getDefaults(),Yl.getDefaults(),zl.getDefaults(),Gl.getDefaults(),Zl.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some((t=>this._sourceType===t))&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Kl[t],n=this.now();if(this._oscillator){const t=this._oscillator;t.stop(n),this.context.setTimeout((()=>t.dispose()),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof Kl[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&zo(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&zo(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&$o(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(t=1024){return oa(this,void 0,void 0,(function*(){return Ll(this,t)}))}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function $l(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){qo(s,t,e),n.set(this,s)}})}}function Jl(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){qo(this.toSeconds(s),t,e),n.set(this,s)}})}}class tc extends Vl{constructor(){super(ma(tc.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=ma(tc.getDefaults(),arguments,["url","onload"]);this._buffer=new ja({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Vl.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:qa,onerror:qa,playbackRate:1,reverse:!1})}load(t){return oa(this,void 0,void 0,(function*(){return yield this._buffer.load(t),this._onload(),this}))}_onload(t=qa){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){e=this._loop?va(e,this._loopStart):va(e,0);const s=this.toSeconds(e),i=n;n=va(n,Math.max(this._buffer.duration-s,0));let r=this.toSeconds(n);r/=this._playbackRate,t=this.toSeconds(t);const o=new Dl({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+r),this._state.setStateAtTime("stopped",t+r,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&Yo(i)?o.start(t,s):o.start(t,s,r-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach((t=>t.stop(e)))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}seek(t,e){const n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){const e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&qo(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopStart=t}))}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&qo(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopEnd=t}))}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((e=>{e.loop=t})),t)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((t=>t.cancelStop()))),this._activeSources.forEach((n=>{n.playbackRate.setValueAtTime(t,e)}))}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach((t=>t.dispose())),this._activeSources.clear(),this._buffer.dispose(),this}}ra([Jl(0)],tc.prototype,"fadeIn",void 0),ra([Jl(0)],tc.prototype,"fadeOut",void 0);class ec extends hl{constructor(){super(ma(ec.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new vl({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=ma(ec.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(hl.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if($o(t))return t;{let n;for(n in nc)if(nc[n][e]===t)return n;return t}}_setCurve(t,e,n){if($o(n)&&Reflect.has(nc,n)){const s=nc[n];Zo(s)?"_decayCurve"!==t&&(this[t]=s[e]):this[t]=s}else{if(!Qo(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){Fo(["linear","exponential"].some((e=>e===t)),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);const n=this.toSeconds(this.attack);let s=n;const i=this.toSeconds(this.decay),r=this.getValueAtTime(t);if(r>0){const t=1/s,e=1-r;s=e/t}if(s<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,s,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,s,t);else{this._sig.cancelAndHoldAtTime(t);let n=this._attackCurve;for(let t=1;t<n.length;t++)if(n[t-1]<=r&&r<=n[t]){n=this._attackCurve.slice(t),n[0]=r;break}this._sig.setValueCurveAtTime(n,t,s,e)}if(i&&this.sustain<1){const n=e*this.sustain,r=t+s;this.log("decay",r),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(n,i+r):this._sig.exponentialApproachValueAtTime(n,r,i)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(Fo(Qo(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return bl(this,t,e,n),this}asArray(t=1024){return oa(this,void 0,void 0,(function*(){const e=t/this.context.sampleRate,n=new Ha(1,e,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),r=.1*i,o=i+r,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/o,decay:e*this.toSeconds(this.decay)/o,release:e*this.toSeconds(this.release)/o,context:n}));a._sig.toDestination(),a.triggerAttackRelease(e*(s+r)/o,0);const l=yield n.render();return l.getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}ra([Jl(0)],ec.prototype,"attack",void 0),ra([Jl(0)],ec.prototype,"decay",void 0),ra([$l(0,1)],ec.prototype,"sustain",void 0),ra([Jl(0)],ec.prototype,"release",void 0);const nc=(()=>{const t=128;let e,n;const s=[];for(e=0;e<t;e++)s[e]=Math.sin(e/(t-1)*(Math.PI/2));const i=[],r=6.4;for(e=0;e<t-1;e++){n=e/(t-1);const s=Math.sin(n*(2*Math.PI)*r-Math.PI/2)+1;i[e]=s/10+.83*n}i[t-1]=1;const o=[],a=5;for(e=0;e<t;e++)o[e]=Math.ceil(e/(t-1)*a)/a;const l=[];for(e=0;e<t;e++)n=e/(t-1),l[e]=.5*(1-Math.cos(Math.PI*n));const c=[];for(e=0;e<t;e++){n=e/(t-1);const s=4*Math.pow(n,3)+.2,i=Math.cos(s*Math.PI*2*n);c[e]=Math.abs(i*(1-n))}function u(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}function h(t){return t.slice(0).reverse()}return{bounce:{In:u(c),Out:c},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:i,Out:u(i)},sine:{In:l,Out:u(l)},step:{In:o,Out:u(o)}}})();class sc extends hl{constructor(){super(ma(sc.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=ma(sc.getDefaults(),arguments);this._volume=this.output=new El({context:this.context,volume:t.volume}),this.volume=this._volume.volume,La(this,"volume")}static getDefaults(){return Object.assign(hl.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const n=this["_original_"+t]=this[t];this[t]=(...t)=>{const s=t[e],i=this.context.transport.schedule((s=>{t[e]=s,n.apply(this,t)}),s);this._scheduledEvents.push(i)}}unsync(){return this._scheduledEvents.forEach((t=>this.context.transport.clear(t))),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,n,s){const i=this.toSeconds(n),r=this.toSeconds(e);return this.triggerAttack(t,i,s),this.triggerRelease(i+r),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class ic extends sc{constructor(){super(ma(ic.getDefaults(),arguments));const t=ma(ic.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(sc.getDefaults(),{detune:0,onsilence:qa,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);const s=this.toSeconds(e);return this._triggerEnvelopeAttack(s,n),this.setNote(t,s),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const n=this.toSeconds(e),s=t instanceof il?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,t,n)}else this.frequency.setValueAtTime(s,n);return this}}ra([Jl(0)],ic.prototype,"portamento",void 0);class rc extends ec{constructor(){super(ma(rc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new dl({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class oc extends ic{constructor(){super(ma(oc.getDefaults(),arguments)),this.name="Synth";const t=ma(oc.getDefaults(),arguments);this.oscillator=new Ql(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new rc(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),La(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ic.getDefaults(),{envelope:Object.assign(ba(ec.getDefaults(),Object.keys(hl.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ba(Ql.getDefaults(),[...Object.keys(Vl.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ac extends oc{constructor(){super(ma(ac.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=ma(ac.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,La(this,["oscillator","envelope"])}static getDefaults(){return pa(ic.getDefaults(),oc.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const n=this.toSeconds(e),s=this.toFrequency(t instanceof il?t.toFrequency():t),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(s,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ra([$l(0)],ac.prototype,"octaves",void 0),ra([Jl(0)],ac.prototype,"pitchDecay",void 0);const lc=new Set;function cc(t){lc.add(t)}function uc(t,e){const n=`registerProcessor("${t}", ${e})`;lc.add(n)}const hc='\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n';cc(hc);const _c="\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n";cc(_c);const fc="\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n";cc(fc);const pc="feedback-comb-filter",dc='\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n';uc(pc,dc);class mc extends sc{constructor(){super(ma(mc.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=ma(mc.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach((n=>{const s=parseInt(n,10);if(Fo(Jo(n)||zo(s)&&isFinite(s),`url key is neither a note or midi pitch: ${n}`),Jo(n)){const s=new il(this.context,n).toMidi();e[s]=t.urls[n]}else zo(s)&&isFinite(s)&&(e[s]=t.urls[s])})),this._buffers=new Al({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(sc.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:qa,onerror:qa,release:.1,urls:{}})}_findClosest(t){const e=96;let n=0;while(n<e){if(this._buffers.has(t+n))return-n;if(this._buffers.has(t-n))return n;n++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach((t=>{const s=tl(new il(this.context,t).toFrequency()),i=Math.round(s),r=s-i,o=this._findClosest(i),a=i-o,l=this._buffers.get(a),c=Za(o+r),u=new Dl({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:c}).connect(this.output);u.start(e,0,l.duration/c,n),Qo(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(u),u.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){const t=this._activeSources.get(i),e=t.indexOf(u);-1!==e&&t.splice(e,1)}}})),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((t=>{const n=new il(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach((t=>{t.stop(e)})),this._activeSources.set(n,[])}})),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach((t=>{while(t.length){const n=t.shift();n.stop(e)}})),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,s=1){const i=this.toSeconds(n);return this.triggerAttack(t,i,s),Qo(e)?(Fo(Qo(t),"notes must be an array when duration is array"),t.forEach(((t,n)=>{const s=e[Math.min(n,e.length-1)];this.triggerRelease(t,i+this.toSeconds(s))}))):this.triggerRelease(t,i+this.toSeconds(e)),this}add(t,e,n){if(Fo(Jo(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Jo(t)){const s=new il(this.context,t).toMidi();this._buffers.add(s,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach((t=>{t.forEach((t=>t.dispose()))})),this._activeSources.clear(),this}}ra([Jl(0)],mc.prototype,"attack",void 0),ra([Jl(0)],mc.prototype,"release",void 0);class gc extends hl{constructor(){super(Object.assign(ma(gc.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=ma(gc.getDefaults(),arguments,["pan"]);this.pan=new ul({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",La(this,"pan")}static getDefaults(){return Object.assign(hl.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const vc="bit-crusher",bc="\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n";uc(vc,bc);class yc extends hl{constructor(){super(ma(yc.getDefaults(),arguments,["solo"])),this.name="Solo";const t=ma(yc.getDefaults(),arguments,["solo"]);this.input=this.output=new dl({context:this.context}),yc._allSolos.has(this.context)||yc._allSolos.set(this.context,new Set),yc._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(hl.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),yc._allSolos.get(this.context).forEach((t=>t._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){yc._soloed.has(this.context)||yc._soloed.set(this.context,new Set),yc._soloed.get(this.context).add(this)}_removeSolo(){yc._soloed.has(this.context)&&yc._soloed.get(this.context).delete(this)}_isSoloed(){return yc._soloed.has(this.context)&&yc._soloed.get(this.context).has(this)}_noSolos(){return!yc._soloed.has(this.context)||yc._soloed.has(this.context)&&0===yc._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),yc._allSolos.get(this.context).delete(this),this._removeSolo(),this}}yc._allSolos=new Map,yc._soloed=new Map;class wc extends hl{constructor(){super(ma(wc.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=ma(wc.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new gc({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new El({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,La(this,["pan","volume"])}static getDefaults(){return Object.assign(hl.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class xc extends hl{constructor(){super(ma(xc.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=ma(xc.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new yc({solo:t.solo,context:this.context}),this._panVol=this.output=new wc({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),La(this,["pan","volume"])}static getDefaults(){return Object.assign(hl.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return xc.buses.has(t)||xc.buses.set(t,new dl({context:this.context})),xc.buses.get(t)}send(t,e=0){const n=this._getBus(t),s=new dl({context:this.context,units:"decibels",gain:e});return this.connect(s),s.connect(n),s}receive(t){const e=this._getBus(t);return e.connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}xc.buses=new Map;class Tc extends hl{constructor(){super(...arguments),this.name="Listener",this.positionX=new ul({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ul({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ul({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ul({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ul({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ul({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ul({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ul({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ul({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(hl.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Ra((t=>{t.listener=new Tc({context:t})})),Ba((t=>{t.listener.dispose()}));Ya().transport;Ya().destination,Ya().destination;function Sc(){return Ya().destination}Ya().listener;Ya().draw;Ya()},3744:function(t,e){"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n}}}]);
//# sourceMappingURL=chunk-vendors.028306fc.js.map